(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6a3cc9ca"],{"2a86":function(e,t,n){"use strict";n("f72f")},"39b4":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},i=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[n("div",{attrs:{id:"cesiumContainer"}})])}],r=n("a43d"),c=(n("4390"),n("9e48")),o=n("dd8c"),s=[{lon:123.42953620485503,lat:41.81694999200361,name:"沈阳北站",data:{num:108}},{lon:123.43382736814452,lat:41.811201240193164,name:"惠工广场",data:{num:203}},{lon:123.42779707065701,lat:41.80227802016961,name:"市府广场",data:{num:500}}],l={name:"canvasImageSpot",data:function(){return{viewer:null,_Entity:null,_Canvas:null,positionData:s,billboardArr:[]}},mounted:function(){this.init()},methods:{init:function(){var e=this.cesium;e.Ion.defaultAccessToken=Object({VUE_APP_BASE_API:"/prod-api",NODE_ENV:"production",BASE_URL:""}).VUE_APP_TOKEN,this.viewer=new e.Viewer("cesiumContainer",{imageryProvider:new e.ArcGisMapServerImageryProvider({url:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer"}),terrainProvider:new e.CesiumTerrainProvider({url:"http://data.marsgis.cn/terrain"}),shouldAnimate:!0,infoBox:!1,selectionIndicator:!1}),this.viewer.scene.globe.depthTestAgainstTerrain=!1,this._Entity=new c["a"](e,this.viewer),this._Canvas=new o["a"](e,this.viewer),this.start()},start:function(){var e=this,t=this.cesium;this.positionData.map((function(n){var a=e._Canvas.drawImageText(Object(r["a"])(Object(r["a"])({},n),{},{height:140,width:300,src:"/image/textPnl.png"}));a.then((function(a){var i=e._Entity.createBillboard({position:t.Cartesian3.fromDegrees(n.lon,n.lat,0),image:a,scaleByDistance:new t.NearFarScalar(150,1,15e6,.2),translucencyByDistance:new t.NearFarScalar(150,1,15e6,.2),verticalOrigin:t.VerticalOrigin.BOTTOM,width:150,height:70,heightReference:t.HeightReference.CLAMP_TO_GROUND});e.billboardArr.push(i)}))})),this.viewer.camera.flyTo({destination:t.Cartesian3.fromDegrees(123.43382736814452,41.811201240193164,5e3),orientation:{heading:t.Math.toRadians(0),pitch:t.Math.toRadians(-90),roll:0},duration:3}),setTimeout((function(){e.updateBillboard()}),8e3)},updateBillboard:function(){var e=this;setInterval((function(){e.billboardArr.map((function(t){var n=e._Canvas.drawImageText(Object(r["a"])(Object(r["a"])({},t),{},{height:140,width:300,src:"/image/textPnl.png",data:{num:Math.round(-1e3*Math.random()+1e3)}}));n.then((function(e){t._billboard._image._value=e}))}))}),3e3)}}},u=l,d=(n("2a86"),n("cba8")),h=Object(d["a"])(u,a,i,!1,null,"2d6bfb7b",null);t["default"]=h.exports},dd8c:function(e,t,n){"use strict";var a=n("d941"),i=n("c3ae"),r=n("c15f"),c=n("a35b"),o=(n("13b6"),function(){function e(t,n){Object(r["a"])(this,e),this.Cesium=t,this.viewer=n}return Object(c["a"])(e,[{key:"drawText",value:function(e){var t=e.text,n=document.createElement("canvas"),a=(t+"").length*e.fontSize;n.width=a,n.height=e.fontSize;var i=n.getContext("2d");return i.fillStyle=e.color,i.font="bold "+e.fontSize+"px 微软雅黑",i.textBaseline="hanging",i.fillText(t,0,0),n}},{key:"drawImageText",value:function(){var e=Object(i["a"])(Object(a["a"])().mark((function e(t){return Object(a["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e,n){var a,i=document.createElement("img");i.src=t.src,i.onload=function(){a=document.createElement("canvas"),a.height=t.height,a.width=t.width;var n=a.getContext("2d");n.clearRect(0,0,a.width,a.height),n.drawImage(i,0,0),n.font="30px bold 楷体",n.fillStyle="#fff";var r="阳性："+t.data.num;n.fillText(r,(a.width-30*r.length)/2,(a.height+30)/2),e(a)}}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()}]),e}());t["a"]=o},f72f:function(e,t,n){}}]);