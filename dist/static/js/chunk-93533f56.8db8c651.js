(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-93533f56"],{"35aa":function(e,n,t){"use strict";t.r(n);var i=function(){var e=this,n=e.$createElement;e._self._c;return e._m(0)},r=[function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"container"},[t("div",{attrs:{id:"cesiumContainer"}})])}],a=(t("1ce2"),t("6f98"),t("9e48")),o=t("e9d3"),s=[{codeLanguage:"VUE",relyOn:[{label:"Entity.js",url:"cesium/Entity.js"},{label:"Transform.js",url:"cesium/Transform.js"}],code:[{codeLanguage:"html",content:'<template>\n                            <div class="container">\n                                <div id="cesiumContainer"></div>\n                            </div>\n                    </template>'},{codeLanguage:"js",content:'\n                import Entity from "@/common/cesium/Entity.js";\n                import Transform from "@/common/cesium/Transform.js";\n                export default {\n                  name: "GetCoordinates",\n                  data() {\n                    return {\n                      viewer: null,\n                      _Entity: null,\n                      _Transform: null,\n                      handler: null,\n                    };\n                  },\n                  mounted() {\n                    this.init();\n                  },\n                  methods: {\n                    init() {\n                      const Cesium = this.cesium;\n                      this.viewer = new Cesium.Viewer("cesiumContainer", {\n                        imageryProvider: new Cesium.ArcGisMapServerImageryProvider({\n                          url: "https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",\n                        }),\n                        terrainProvider: new Cesium.CesiumTerrainProvider({\n                          //加载火星在线地形\n                          url: "http://data.marsgis.cn/terrain",\n                        }),\n                        shouldAnimate: true,\n                        infoBox: false,\n                        selectionIndicator: false,\n                      });\n                      //设置贴地效果\n                      this.viewer.scene.globe.depthTestAgainstTerrain = false;\n                      this._Entity = new Entity(Cesium, this.viewer);\n                      this._Transform = new Transform(Cesium, this.viewer);\n                      this.handler = new Cesium.ScreenSpaceEventHandler(\n                        this.viewer.scene.canvas\n                      );\n                      this.start();\n                    },\n                    /**\n                     * 开始\n                     */\n                    start() {\n                      const Cesium = this.cesium;\n                      this.handler.setInputAction((event) => {\n                        // 添加点\n                        this._Entity.createPoint({\n                          position: this.viewer.scene.camera.pickEllipsoid(event.position),\n                          color: Cesium.Color.RED,\n                          pixelSize: 30,\n                        });\n                        // 获取点击位置\n                        const getPosition = this._Transform.getPosition(event);\n                        const getPositionAll = JSON.stringify(getPosition);\n                        const longitude = getPosition.longitude;\n                        const latitude = getPosition.latitude;\n                        const cameraHeight = getPosition.cameraHeight;\n                        const Alert =\n                          getPositionAll +\n                          "\n经度：" +\n                          longitude +\n                          "、纬度：" +\n                          latitude +\n                          "、相机高度：" +\n                          cameraHeight;\n                        console.log(Alert);\n                        alert(Alert);\n                      }, Cesium.ScreenSpaceEventType.LEFT_CLICK);\n                    },\n                  },\n                };\n                '},{codeLanguage:"css",content:" .container {\n                            width: 100%;\n                            height: 100%;\n                            #cesiumContainer {\n                                width: 100%;\n                                height: 100%;\n                            }\n                        }\n                            "}]}],c={name:"GetCoordinates",data:function(){return{viewer:null,_Entity:null,_Transform:null,handler:null}},created:function(){this.$store.dispatch("highlight/set_code",s)},mounted:function(){this.init()},methods:{init:function(){var e=this.cesium;e.Ion.defaultAccessToken=Object({NODE_ENV:"production",VUE_APP_BASE_API:"/prod-api",VUE_APP_GAODE_KEY_WEB_SERVICE:"181ced609de9d446207b55e549bafcb6",VUE_APP_GAODE_KEY_WEB_TERMINAL:"cb250acd7ee0e7b2049cb93747ae3d44",VUE_APP_PUBLIC_URL:"/cesium-template",VUE_APP_SECURITY_JS_CODE:"2a0ce2005352672661417093c485a056",BASE_URL:""}).VUE_APP_TOKEN,this.viewer=new e.Viewer("cesiumContainer",{imageryProvider:new e.ArcGisMapServerImageryProvider({url:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer"}),terrainProvider:new e.CesiumTerrainProvider({url:"http://data.marsgis.cn/terrain"}),shouldAnimate:!0,infoBox:!1,selectionIndicator:!1}),this.viewer.scene.globe.depthTestAgainstTerrain=!1,this._Entity=new a["a"](e,this.viewer),this._Transform=new o["a"](e,this.viewer),this.handler=new e.ScreenSpaceEventHandler(this.viewer.scene.canvas),this.start(),this.viewer.camera.flyTo({destination:e.Cartesian3.fromDegrees(123.43382736814452,41.811201240193164,3e3),orientation:{heading:e.Math.toRadians(0),pitch:e.Math.toRadians(-90),roll:0},duration:3})},start:function(){var e=this,n=this.cesium;this.handler.setInputAction((function(t){e._Entity.createPoint({position:e.viewer.scene.camera.pickEllipsoid(t.position),color:n.Color.RED,pixelSize:30});var i=e._Transform.getPosition(t),r="".concat(JSON.stringify(i),"\n经度：").concat(i.longitude,"、纬度：").concat(i.latitude,"、相机高度：").concat(i.cameraHeight);console.log(r),alert(r)}),n.ScreenSpaceEventType.LEFT_CLICK)}}},u=c,l=(t("cb4a"),t("cba8")),d=Object(l["a"])(u,i,r,!1,null,"08b5ac35",null);n["default"]=d.exports},"471c":function(e,n,t){},"68fad":function(e,n,t){var i=t("8c4d"),r=t("7cdd"),a=t("fb63");i({target:"Array",proto:!0},{fill:r}),a("fill")},"7cdd":function(e,n,t){"use strict";var i=t("8c3e"),r=t("b70d"),a=t("0d01");e.exports=function(e){var n=i(this),t=a(n),o=arguments.length,s=r(o>1?arguments[1]:void 0,t),c=o>2?arguments[2]:void 0,u=void 0===c?t:r(c,t);while(u>s)n[s++]=e;return n}},"8f06":function(e,n,t){"use strict";var i=t("8c4d"),r=t("bd4b"),a=t("1be9"),o=t("d981"),s=t("1507"),c=t("c80e"),u=RangeError,l=String,d=Math.floor,h=r(s),f=r("".slice),m=r(1..toFixed),v=function(e,n,t){return 0===n?t:n%2===1?v(e,n-1,t*e):v(e*e,n/2,t)},g=function(e){var n=0,t=e;while(t>=4096)n+=12,t/=4096;while(t>=2)n+=1,t/=2;return n},p=function(e,n,t){var i=-1,r=t;while(++i<6)r+=n*e[i],e[i]=r%1e7,r=d(r/1e7)},C=function(e,n){var t=6,i=0;while(--t>=0)i+=e[t],e[t]=d(i/n),i=i%n*1e7},E=function(e){var n=6,t="";while(--n>=0)if(""!==t||0===n||0!==e[n]){var i=l(e[n]);t=""===t?i:t+h("0",7-i.length)+i}return t},b=c((function(){return"0.000"!==m(8e-5,3)||"1"!==m(.9,0)||"1.25"!==m(1.255,2)||"1000000000000000128"!==m(0xde0b6b3a7640080,0)}))||!c((function(){m({})}));i({target:"Number",proto:!0,forced:b},{toFixed:function(e){var n,t,i,r,s=o(this),c=a(e),d=[0,0,0,0,0,0],m="",b="0";if(c<0||c>20)throw u("Incorrect fraction digits");if(s!=s)return"NaN";if(s<=-1e21||s>=1e21)return l(s);if(s<0&&(m="-",s=-s),s>1e-21)if(n=g(s*v(2,69,1))-69,t=n<0?s*v(2,-n,1):s/v(2,n,1),t*=4503599627370496,n=52-n,n>0){p(d,0,t),i=c;while(i>=7)p(d,1e7,0),i-=7;p(d,v(10,i,1),0),i=n-1;while(i>=23)C(d,1<<23),i-=23;C(d,1<<i),p(d,1,1),C(d,2),b=E(d)}else p(d,0,t),p(d,1<<-n,0),b=E(d)+h("0",c);return c>0?(r=b.length,b=m+(r<=c?"0."+h("0",c-r)+b:f(b,0,r-c)+"."+f(b,r-c))):b=m+b,b}})},a35b:function(e,n,t){"use strict";function i(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function r(e,n,t){return n&&i(e.prototype,n),t&&i(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}t.d(n,"a",(function(){return r}))},ba60:function(e,n,t){"use strict";var i=t("04c3"),r=t("b9f0"),a=t("bd4b"),o=t("b880"),s=t("6262"),c=t("d908"),u=t("6d3c"),l=t("db48"),d=t("33f5"),h=t("7ebf"),f=t("c80e"),m=t("5e78").f,v=t("7b19").f,g=t("8edf").f,p=t("d981"),C=t("7f34").trim,E="Number",b=r[E],w=b.prototype,_=r.TypeError,y=a("".slice),P=a("".charCodeAt),I=function(e){var n=h(e,"number");return"bigint"==typeof n?n:A(n)},A=function(e){var n,t,i,r,a,o,s,c,u=h(e,"number");if(d(u))throw _("Cannot convert a Symbol value to a number");if("string"==typeof u&&u.length>2)if(u=C(u),n=P(u,0),43===n||45===n){if(t=P(u,2),88===t||120===t)return NaN}else if(48===n){switch(P(u,1)){case 66:case 98:i=2,r=49;break;case 79:case 111:i=8,r=55;break;default:return+u}for(a=y(u,2),o=a.length,s=0;s<o;s++)if(c=P(a,s),c<48||c>r)return NaN;return parseInt(a,i)}return+u};if(o(E,!b(" 0o1")||!b("0b1")||b("+0x1"))){for(var S,T=function(e){var n=arguments.length<1?0:b(I(e)),t=this;return l(w,t)&&f((function(){p(t)}))?u(Object(n),t,T):n},N=i?m(b):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),M=0;N.length>M;M++)c(b,S=N[M])&&!c(T,S)&&g(T,S,v(b,S));T.prototype=w,w.constructor=T,s(r,E,T,{constructor:!0})}},c15f:function(e,n,t){"use strict";t.d(n,"a",(function(){return i}));t("f4cf");function i(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}},cb4a:function(e,n,t){"use strict";t("471c")},d981:function(e,n,t){var i=t("bd4b");e.exports=i(1..valueOf)},e9d3:function(e,n,t){"use strict";var i=t("c15f"),r=t("a35b"),a=(t("ba60"),t("8f06"),t("a256"),function(){function e(n,t){Object(i["a"])(this,e),this.Cesium=n,this.viewer=t}return Object(r["a"])(e,[{key:"formCssColorString",value:function(e){var n=this.Cesium;return n.Color.fromCssColorString(e)}},{key:"getPosition",value:function(e){var n=this.Cesium,t=this.viewer,i=t.scene.camera.pickEllipsoid(e.position),r=n.Cartographic.fromCartesian(i),a=n.Math.toDegrees(r.longitude),o=n.Math.toDegrees(r.latitude),s=Number(t.camera.positionCartographic.height.toFixed(0));return{longitude:a,latitude:o,cameraHeight:s}}},{key:"terrainProviderHeight",value:function(e){var n=this.Cesium,t=n.createWorldTerrain(),i=n.sampleTerrainMostDetailed(t,e);return Promise.resolve(i)}},{key:"getSeibelCurve",value:function(e,n,t,i){var r=this.Cesium,a=[],o=r.Cartographic.fromCartesian(e),s=r.Cartographic.fromCartesian(n),c=180*o.longitude/Math.PI,u=180*o.latitude/Math.PI,l=180*s.longitude/Math.PI,d=180*s.latitude/Math.PI,h=Math.sqrt((c-l)*(c-l)+(u-d)*(u-d)),f=h*t,m=r.Cartesian3.clone(e),v=r.Cartesian3.clone(n),g=r.Cartesian3.distance(m,r.Cartesian3.ZERO),p=r.Cartesian3.distance(v,r.Cartesian3.ZERO);if(r.Cartesian3.normalize(m,m),r.Cartesian3.normalize(v,v),0===r.Cartesian3.distance(m,v))return a;var C=r.Cartesian3.angleBetween(m,v);a.push(e);for(var E=1;E<i-1;E++){var b=1*E/(i-1),w=1-b,_=Math.sin(w*C)/Math.sin(C),y=Math.sin(b*C)/Math.sin(C),P=r.Cartesian3.multiplyByScalar(m,_,new r.Cartesian3),I=r.Cartesian3.multiplyByScalar(v,y,new r.Cartesian3),A=r.Cartesian3.add(P,I,new r.Cartesian3),S=b*Math.PI,T=g*w+p*b+Math.sin(S)*f,N=r.Cartesian3.multiplyByScalar(A,T,A);a.push(N)}return a.push(n),a}},{key:"getCatesian3FromPX",value:function(e){var n=this.viewer.camera.getPickRay(e);return n?this.viewer.scene.globe.pick(n,this.viewer.scene):null}}]),e}());n["a"]=a}}]);