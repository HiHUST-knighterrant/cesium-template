(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-25fcf26c"],{"1c72":function(n,e){n.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAcCAYAAAAAwr0iAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyBpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkQ3MzA5NjQ1MjNDRjExRTY4QkU2RTNBMzA2QjFDQUMzIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkQ3MzA5NjQ2MjNDRjExRTY4QkU2RTNBMzA2QjFDQUMzIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6RDczMDk2NDMyM0NGMTFFNjhCRTZFM0EzMDZCMUNBQzMiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6RDczMDk2NDQyM0NGMTFFNjhCRTZFM0EzMDZCMUNBQzMiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4LiDHYAAABnUlEQVR42mKcOXMmAw5gAMTGQKwFxOpALIEkJwrEcmjqHwHxayT+CyC+CcVnoRgDsGAR4wTiA0BsxkAakMPiKG8k9ikgdgbiL4Qc0Ihm+QWo5stAfB/qM5j4X7QQYwZiISBWQQpBY6g8yMw6IC4j5IAEKN0ExLOA+CmRIXABib0biQ2Kukyo5QnoDmDCYpAolK5Hs/wYEP8nEp9ESwv1aGbjdQAu8J0EtV+IVQhzgCIQbwTih3jUghIQI5HYGY8554F4ERBLw9KAFjR4+YH4IwPtgSI0gYJyiBUoBNqhlq8HYiU6OMANiPdBc0sLyAFOUIlcIH5HBweAsnQ0lO0KcgAPqQmHCgCWoPmZGAYYgBLhVmjx+5GO9n6EpoPvsBBgHgDPs8FCwAeHgv80doAtqSUhTcCoA4hxgDOBsp0ifSzEplZyUzk1HLCdTAdsHxJpAFsIMI7oXMCP1K7jR+OTi/mxmDt408BHaA8H1MGoRhK/A8SqJJp9G9o/qEPqPzxCr3VZcBQgXdC2PAO0qVZMZtOrF4jTkMwpQ1cEEGAAUeVjbcizjtAAAAAASUVORK5CYII="},"1d43":function(n,e,t){"use strict";t("3a87")},"2c0a":function(n,e,t){"use strict";t("4fdd")},"2f58":function(n,e,t){"use strict";t("5ab8")},"3a87":function(n,e,t){},"3ec9":function(n,e,t){},"4fdd":function(n,e,t){},"5ab8":function(n,e,t){},"5e72":function(n,e,t){"use strict";t("bcd4")},8968:function(n,e,t){"use strict";t.r(e);var i=function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("div",{staticClass:"container"},[t("div",{attrs:{id:"cesiumContainer"}}),t("el-button",{staticClass:"tools",attrs:{type:"primary",icon:"el-icon-s-tools",circle:""},on:{click:function(e){n.poiPanelShow=!n.poiPanelShow}}}),t("poi-Panel",{attrs:{show:n.poiPanelShow,poisId:n.poisClickId},on:{close:function(e){n.poiPanelShow=!1},load:n.load,poisClick:n.poisClick,stepsClick:n.setStepsCamera}})],1)},a=[],s=t("26b6"),l=t("76eb"),o=(t("2afa"),t("eb3b"),t("34b1"),t("e72f"),function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("el-drawer",{attrs:{title:"操作面板",visible:n.drawer,size:"500px",direction:"rtl","before-close":n.handleClose},on:{"update:visible":function(e){n.drawer=e}}},[t("div",{staticClass:"POI-panel"},[t("el-tabs",{on:{"tab-click":n.tabClick},model:{value:n.panelType,callback:function(e){n.panelType=e},expression:"panelType"}},n._l(n.panelTypeArr,(function(n,e){return t("el-tab-pane",{key:e,attrs:{label:n.label,name:n.value}})})),1),"1"==n.panelType?t("section",{staticClass:"pois"},[t("div",{staticClass:"form-view"},[t("div",{staticClass:"form-item"},[t("div",{staticClass:"form-label"},[n._v("范围：")]),t("div",{staticClass:"form-value"},[t("el-radio-group",{attrs:{size:"mini"},on:{change:n.search},model:{value:n.range,callback:function(e){n.range=e},expression:"range"}},[t("el-radio",{attrs:{label:"city"}},[n._v("城市")]),t("el-radio",{attrs:{label:"all"}},[n._v("全国")])],1)],1)]),t("div",{staticClass:"form-item"},[t("div",{staticClass:"form-label"},[n._v("城市：")]),t("div",{staticClass:"form-value"},[t("el-cascader",{staticStyle:{width:"100%"},attrs:{size:"mini",clearable:"",disabled:"all"==n.range,props:{children:"districtList",label:"name",value:"adcode"},placeholder:"城市选择...",options:n.cityOptions},on:{change:n.search},model:{value:n.city,callback:function(e){n.city=e},expression:"city"}})],1)]),t("div",{staticClass:"form-item multiple"},[t("div",{staticClass:"form-label"},[n._v("兴趣点类别：")]),t("div",{staticClass:"form-value"},[t("el-select",{staticClass:"select",attrs:{size:"mini",multiple:"",placeholder:"请选择兴趣类别（可多选）"},on:{change:n.search},model:{value:n.searchType,callback:function(e){n.searchType=e},expression:"searchType"}},n._l(n.placeSearchType,(function(n){return t("el-option",{key:n,attrs:{label:n,value:n}})})),1)],1)]),t("div",{staticClass:"form-item multiple"},[t("div",{staticClass:"form-label"},[n._v("是否聚合：")]),t("div",{staticClass:"form-value"},[t("el-switch",{attrs:{size:"mini","active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:n.search},model:{value:n.polymerization,callback:function(e){n.polymerization=e},expression:"polymerization"}})],1)]),t("div",{staticClass:"form-item search"},[t("el-input",{attrs:{size:"mini",placeholder:"请输入搜索关键词",clearable:""},on:{change:n.search},model:{value:n.keyword,callback:function(e){n.keyword="string"===typeof e?e.trim():e},expression:"keyword"}}),t("el-button",{staticClass:"button",attrs:{disabled:""==n.keyword,type:"primary",size:"mini",icon:"el-icon-search"},on:{click:n.search}},[n._v("搜索")])],1)]),t("div",{staticClass:"main"},[t("div",{directives:[{name:"loading",rawName:"v-loading",value:n.loading,expression:"loading"}],ref:"poisList",staticClass:"item-view"},n._l(n.poisList,(function(e,i){return t("div",{key:e.id+i,staticClass:"pois-item",class:{active:n.poisClickId==e.id},on:{click:function(t){return n.poisClick(e)}}},[t("div",{staticClass:"pois-item-image"},[0!=e.photos.length?t("el-image",{staticClass:"image",attrs:{src:e.photos[0].url,fit:"cover"}},[t("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[t("i",{staticClass:"el-icon-picture-outline"})])]):t("el-image",{staticClass:"image",attrs:{src:"",fit:"cover"}},[t("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[t("i",{staticClass:"el-icon-picture-outline"})])])],1),t("div",{staticClass:"pois-item-text"},[t("h3",[n._v(n._s(e.name))]),t("p",[n._v(" 电话： "),e.tel?[n._v(n._s(e.tel))]:[n._v("-")]],2),t("p",[n._v(" 类目： "+n._s(e.type)+" ")]),t("p",[n._v(" 地址： "+n._s(e.pname)+n._s(e.cityname)+n._s(e.adname)+n._s(e.address)+" ")])])])})),0),t("div",{staticClass:"pagination"},[t("el-pagination",{attrs:{"hide-on-single-page":"",layout:"prev, pager, next",total:n.total,"page-size":n.pageSize,"current-page":n.pageIndex},on:{"current-change":n.currentPaginationChange}})],1)])]):n._e(),"2"==n.panelType?t("section",{staticClass:"navigation"},[t("div",{staticClass:"form-view"},[t("el-form",{ref:"form",attrs:{"label-width":"100px"}},[t("el-form-item",{attrs:{label:"起始位置："}},[t("el-input",{attrs:{size:"mini",placeholder:"请输入起始位置",id:"startPosition"},model:{value:n.startPosition,callback:function(e){n.startPosition="string"===typeof e?e.trim():e},expression:"startPosition"}})],1),t("el-form-item",{attrs:{label:"终点位置："}},[t("el-input",{attrs:{size:"mini",placeholder:"请输入终点位置",id:"endPosition"},model:{value:n.endPosition,callback:function(e){n.endPosition="string"===typeof e?e.trim():e},expression:"endPosition"}})],1),t("el-form-item",{attrs:{label:"类型："}},[t("el-radio-group",{attrs:{disabled:"{}"==JSON.stringify(n.startPositionResult)||"{}"==JSON.stringify(n.endPositionResult),size:"mini"},on:{change:n.navigationTypeChange},model:{value:n.navigationType,callback:function(e){n.navigationType=e},expression:"navigationType"}},n._l(n.navigationTypeArr,(function(e,i){return t("el-radio-button",{key:i,attrs:{label:e.value}},[n._v(n._s(e.label))])})),1)],1)],1)],1),t("div",{staticClass:"steps-view",attrs:{id:"panel"}},["driving"==n.navigationType?[0!=n.drivingData.length?t("path-planning-driving",{attrs:{"data-arr":n.drivingData,start:n.startPositionResult.poi,end:n.endPositionResult.poi},on:{stepsClick:n.stepsClick,change:n.setLine}}):n._e()]:n._e(),"riding"==n.navigationType?[0!=n.ridingData.length?t("path-planning-riding",{attrs:{"data-arr":n.ridingData,start:n.startPositionResult.poi,end:n.endPositionResult.poi},on:{stepsClick:n.stepsClick,change:n.setLine}}):n._e()]:n._e(),"walking"==n.navigationType?[0!=n.walkingData.length?t("path-planning-walking",{attrs:{"data-arr":n.walkingData,start:n.startPositionResult.poi,end:n.endPositionResult.poi},on:{stepsClick:n.stepsClick,change:n.setLine}}):n._e()]:n._e(),"transfer"==n.navigationType?[0!=n.transferData.length?t("path-planning-transfer",{attrs:{"data-arr":n.transferData,start:n.startPositionResult.poi,end:n.endPositionResult.poi},on:{stepsClick:n.stepsClick,change:n.setLine}}):n._e()]:n._e()],2)]):n._e()],1)])}),r=[],c=(t("5f01"),t("6410"),t("f8c7"),t("5ab6"),t("c407")),p=t("4bb1"),d=t("e143"),m=(t("5e94"),t("62db"),function(){function n(e){Object(p["a"])(this,n),this.AMap=e}return Object(d["a"])(n,[{key:"districtList",value:function(n){var e=this.AMap,t={level:null!==n&&void 0!==n&&n.level?n.level:"country",subdistrict:null!==n&&void 0!==n&&n.subdistrict?n.subdistrict:1,showbiz:null===n||void 0===n||!n.showbiz||n.showbiz,extensions:null!==n&&void 0!==n&&n.extensions?n.extensions:"base"},i=null!==n&&void 0!==n&&n.keyword?n.keyword:"中国";return new Promise((function(n,a){e.plugin("AMap.DistrictSearch",(function(){var s=new e.DistrictSearch(t);s.search(i,(function(e,t){"complete"==e?n(t.districtList[0]["districtList"]):a("Error")}))}))}))}},{key:"placeSearchType",get:function(){var n="汽车服务|汽车销售|汽车维修|摩托车服务|餐饮服务|购物服务|生活服务|体育休闲服务|医疗保健服务|住宿服务|风景名胜|商务住宅|政府机构及社会团体|科教文化服务|交通设施服务|金融保险服务|公司企业|道路附属设施|地名地址信息|公共设施";return n.split("|")}},{key:"plugin",get:function(){var n=[{label:"输入提示，根据输入关键字提示匹配信息",value:"Autocomplete"},{label:"地点搜索服务插件，提供某一特定地区的位置查询服务",value:"PlaceSearch"},{label:"行政区查询服务，提供行政区相关信息",value:"DistrictSearch"},{label:"驾车路线规划服务",value:"Driving"},{label:"公交换乘服务",value:"Transfer"},{label:"骑行路线规划服务",value:"Riding"},{label:"步行路线规划服务",value:"Walking"},{label:"轨迹纠偏",value:"GraspRoad"}],e=n.map((function(n){return"AMap.".concat(n.value)}));return e.toString()}},{key:"placeSearch",value:function(n){var e=this.AMap,t={city:null!==n&&void 0!==n&&n.city&&""!=n.city?n.city:"全国",citylimit:!(null===n||void 0===n||!n.citylimit)&&n.citylimit,children:null!==n&&void 0!==n&&n.children?n.children:0,type:null!==n&&void 0!==n&&n.type?n.type:"餐饮服务|商务住宅|生活服务",lang:null!==n&&void 0!==n&&n.lang?n.lang:"zh_cn",pageSize:null!==n&&void 0!==n&&n.pageSize?n.pageSize:10,pageIndex:null!==n&&void 0!==n&&n.pageIndex?n.pageIndex:1,extensions:null!==n&&void 0!==n&&n.extensions?n.extensions:"base",map:null!==n&&void 0!==n&&n.map?n.map:void 0,panel:null!==n&&void 0!==n&&n.panel?n.panel:"",showCover:null===n||void 0===n||!n.showCover||n.showCover,renderStyle:null!==n&&void 0!==n&&n.renderStyle?n.renderStyle:"default",autoFitView:null===n||void 0===n||!n.autoFitView||n.autoFitView},i=null!==n&&void 0!==n&&n.searchKeyword?n.searchKeyword:"",a=new e.PlaceSearch(t);return new Promise((function(n,t){e.plugin("AMap.PlaceSearch",(function(){a.search(i,(function(e,i){"complete"==e?n(i.poiList):t("Error")}))}))}))}},{key:"getDetails",value:function(n){var e=this.AMap,t=new e.PlaceSearch({extensions:"all"});return new Promise((function(e,i){t.getDetails(n,(function(n,t){"complete"===n&&"OK"===t.info?e(t):i("Error")}))}))}},{key:"AutoComplete",value:function(n){var e=this.AMap,t={type:null!==n&&void 0!==n&&n.type?n.type:"",city:null!==n&&void 0!==n&&n.city&&""!=n.city?n.city:"全国",datatype:null!==n&&void 0!==n&&n.datatype?n.datatype:"all",citylimit:!(null===n||void 0===n||!n.citylimit)&&n.citylimit,input:null!==n&&void 0!==n&&n.input?n.input:void 0,output:null!==n&&void 0!==n&&n.output?n.output:void 0,outPutDirAuto:null===n||void 0===n||!n.outPutDirAuto||n.outPutDirAuto};return new Promise((function(n,i){e.plugin("AMap.AutoComplete",(function(){var i=new e.AutoComplete(t);n(i)}))}))}},{key:"Driving",value:function(n){var e=this.AMap,t={map:null!==n&&void 0!==n&&n.map?n.map:void 0,policy:null!==n&&void 0!==n&&n.policy?n.policy:0,extensions:null!==n&&void 0!==n&&n.extensions?n.extensions:"base",ferry:null!==n&&void 0!==n&&n.ferry?n.ferry:0,panel:null!==n&&void 0!==n&&n.panel?n.panel:void 0,hideMarkers:!(null===n||void 0===n||!n.hideMarkers)&&n.hideMarkers,showTraffic:null===n||void 0===n||!n.showTraffic||n.showTraffic,province:null!==n&&void 0!==n&&n.province?n.province:void 0,number:null!==n&&void 0!==n&&n.number?n.number:void 0,isOutline:null!==n&&void 0!==n&&n.isOutline?n.isOutline:void 0,outlineColor:null!==n&&void 0!==n&&n.outlineColor?n.outlineColor:void 0,autoFitView:null!==n&&void 0!==n&&n.autoFitView?n.autoFitView:void 0};return new Promise((function(i,a){e.plugin("AMap.Driving",(function(){var s=new e.Driving(t);s.search(n.start,n.end,(function(n,e){"complete"==n?i(e):a("Error")}))}))}))}},{key:"transit_mode_parameter",get:function(){return[{value:"BUS",label:"公共汽车"},{value:"SUBWAY",label:"地铁"},{value:"WALK",label:"步行"},{value:"METRO_RAIL",label:"地铁轨道"},{value:"RAILWAY",label:"铁路"},{value:"TAXI",label:"出租车"}]}},{key:"Transfer",value:function(n){var e=this.AMap,t={map:null!==n&&void 0!==n&&n.map?n.map:void 0,city:null!==n&&void 0!==n&&n.city?n.city:"",policy:null!==n&&void 0!==n&&n.policy?n.policy:0,nightflag:!(null===n||void 0===n||!n.nightflag)&&n.nightflag,extensions:null!==n&&void 0!==n&&n.extensions?n.extensions:"base",panel:null!==n&&void 0!==n&&n.panel?n.panel:"",hideMarkers:!(null===n||void 0===n||!n.hideMarkers)&&n.hideMarkers,isOutline:null!==n&&void 0!==n&&n.isOutline?n.isOutline:void 0,outlineColor:null!==n&&void 0!==n&&n.outlineColor?n.outlineColor:void 0,autoFitView:null!==n&&void 0!==n&&n.autoFitView?n.autoFitView:void 0};return new Promise((function(i,a){e.plugin("AMap.Transfer",(function(){var s=new e.Transfer(t);s.search(n.start,n.end,(function(n,e){"complete"==n?i(e):a("Error")}))}))}))}},{key:"Riding",value:function(n){var e=this.AMap,t={map:null!==n&&void 0!==n&&n.map?n.map:void 0,policy:null!==n&&void 0!==n&&n.policy?n.policy:0,panel:null!==n&&void 0!==n&&n.panel?n.panel:"",hideMarkers:!(null===n||void 0===n||!n.hideMarkers)&&n.hideMarkers,isOutline:null!==n&&void 0!==n&&n.isOutline?n.isOutline:void 0,outlineColor:null!==n&&void 0!==n&&n.outlineColor?n.outlineColor:void 0,autoFitView:null!==n&&void 0!==n&&n.autoFitView?n.autoFitView:void 0};return new Promise((function(i,a){e.plugin("AMap.Riding",(function(){var s=new e.Riding(t);s.search(n.start,n.end,(function(n,e){"complete"==n?i(e):a("Error")}))}))}))}},{key:"Walking",value:function(n){var e=this.AMap,t={map:null!==n&&void 0!==n&&n.map?n.map:void 0,panel:null!==n&&void 0!==n&&n.panel?n.panel:"",hideMarkers:!(null===n||void 0===n||!n.hideMarkers)&&n.hideMarkers,isOutline:null!==n&&void 0!==n&&n.isOutline?n.isOutline:void 0,outlineColor:null!==n&&void 0!==n&&n.outlineColor?n.outlineColor:void 0,autoFitView:null!==n&&void 0!==n&&n.autoFitView?n.autoFitView:void 0};return new Promise((function(i,a){e.plugin("AMap.Walking",(function(){var s=new e.Walking(t);s.search(n.start,n.end,(function(n,e){"complete"==n?i(e):a("Error")}))}))}))}}]),n}()),u=m,h=function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("div",{staticClass:"pathPlanning"},[t("el-collapse",{attrs:{accordion:""},on:{change:n.collapseChange},model:{value:n.collapseIndex,callback:function(e){n.collapseIndex=e},expression:"collapseIndex"}},n._l(n.dataArr,(function(e,i){return t("el-collapse-item",{key:i,attrs:{name:i}},[t("template",{slot:"title"},[t("div",{staticClass:"info-view"},[t("div",{staticClass:"tag"},[n._v("方案"+n._s(i+1))]),t("div",{staticClass:"info"},[t("div",{staticClass:"info-item"},[n._v("约 "+n._s(n.secondToTime(e.time)))]),t("span",[n._v("|")]),t("div",{staticClass:"info-item"},[n._v(" "+n._s(n.metreToKilometre(e.distance))+"公里 ")])]),t("div",{staticClass:"channel"},[t("div",{staticClass:"channel-label"},[n._v("途径：")]),t("div",{staticClass:"channel-info"},n._l(n.channel(e.steps),(function(e,i){return t("span",{key:"channel"+i},[0!=i?t("i",{staticClass:"el-icon-arrow-right"}):n._e(),t("span",[n._v(n._s(e))])])})),0)])])]),t("div",{staticClass:"step-main"},[t("div",{staticClass:"step-item",on:{click:function(e){return n.stepsClick(n.start.location.lng,n.start.location.lat)}}},[t("diricon",{staticClass:"diricon",attrs:{type:"text",value:"起"}}),t("div",{staticClass:"label"},[n._v("从 "+n._s(n.start.name)+"出发")])],1),n._l(e.steps,(function(e,i){return t("div",{key:"steps"+i,staticClass:"step-item",on:{click:function(t){return n.stepsClick(e.start_location.lng,e.start_location.lat)}}},[t("diricon",{staticClass:"diricon",attrs:{type:"driving",value:e.action}}),t("div",{staticClass:"label"},[n._v(n._s(e.instruction))])],1)})),t("div",{staticClass:"step-item",on:{click:function(e){return n.stepsClick(n.end.location.lng,n.end.location.lat)}}},[t("diricon",{staticClass:"diricon",attrs:{type:"text",value:"终"}}),t("div",{staticClass:"label"},[n._v("到达终点 "+n._s(n.end.name))])],1)],2)],2)})),1)],1)},g=[],v=t("5797"),f=(t("2237"),t("decf"),t("0c87"),t("c508"),function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("div",{class:"gaode-diricon "+n.iconName(),style:{backgroundColor:n.bgColor}})}),y=[],b=function(){function n(){Object(p["a"])(this,n)}return Object(d["a"])(n,[{key:"iconTypeText",get:function(){return[{label:"起",value:"15"},{label:"经",value:"16"},{label:"终",value:"17"}]}},{key:"iconTypeVehicle",get:function(){return[{label:"transfer",value:"22"},{label:"train",value:"23"},{label:"metro",value:"24"}]}},{key:"iconTypeDriving",get:function(){return[{label:"直行",value:"0"},{label:"左转",value:"1"},{label:"右转",value:"2"},{label:"向左前方行驶",value:"3"},{label:"向右前方行驶",value:"4"},{label:"向左后方行驶",value:"5"},{label:"向右后方行驶",value:"6"},{label:"左转调头",value:"7"},{label:"靠左",value:"9"},{label:"靠右",value:"10"},{label:"进入环岛",value:"13"},{label:"离开环岛",value:"14"},{label:"减速行驶",value:"12"}]}},{key:"iconTypeWalking",get:function(){return[{label:"直行",value:"0"},{label:"左转",value:"1"},{label:"右转",value:"2"},{label:"向左前方行走",value:"3"},{label:"向右前方行走",value:"4"},{label:"向左后方行走",value:"5"},{label:"向右后方行走",value:"6"},{label:"靠左",value:"9"},{label:"靠右",value:"10"},{label:"通过人行横道",value:"27"},{label:"通过过街天桥",value:"28"},{label:"通过地下通道",value:"26"},{label:"通过广场",value:"29"},{label:"到道路斜对面",value:"25"}]}},{key:"iconTypeTransfer",get:function(){return this.iconTypeDriving}},{key:"iconTypeRiding",get:function(){return this.iconTypeDriving}},{key:"setIcon",value:function(n,e){var t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i="",a=t?"blue":"grey";if("driving"==n){var s=this.iconTypeDriving.filter((function(n){return""==e||0==e.length?"直行"==n.label:n.label==e}));0!=s.length&&(i="gaode-diricon-".concat(n," gaode-diricon-").concat(s[0].value," gaode-diricon-").concat(a))}if("walking"==n){var l=this.iconTypeWalking.filter((function(n){return""==e||0==e.length?"直行"==n.label:n.label==e}));0!=l.length&&(i="gaode-diricon-".concat(n," gaode-diricon-").concat(l[0].value," gaode-diricon-").concat(a))}if("transfer"==n){var o=this.iconTypeTransfer.filter((function(n){return""==e||0==e.length?"直行"==n.label:n.label==e}));0!=o.length&&(i="gaode-diricon-".concat(n," gaode-diricon-").concat(o[0].value," gaode-diricon-").concat(a))}if("riding"==n){var r=this.iconTypeRiding.filter((function(n){return""==e||0==e.length?"直行"==n.label:n.label==e}));0!=r.length&&(i="gaode-diricon-".concat(n," gaode-diricon-").concat(r[0].value," gaode-diricon-").concat(a))}if("text"==n){var c=this.iconTypeText.filter((function(n){return n.label==e}));0!=c.length&&(i="gaode-diricon-".concat(n," gaode-diricon-").concat(c[0].value))}if("vehicle"==n){var p=this.iconTypeVehicle.filter((function(n){return n.label==e}));0!=p.length&&(i="gaode-diricon-".concat(n," gaode-diricon-").concat(p[0].value))}return i}}]),n}(),_={props:{type:{type:String,default:function(){return"driving"}},typeColor:{type:Boolean,default:function(){return!0}},bgColor:{type:String,default:function(){return""}},value:{type:String|Array,default:function(){return""}}},data:function(){return{_Diricon:null}},created:function(){this._Diricon=new b},mounted:function(){},methods:{iconName:function(){return this._Diricon.setIcon(this.type,this.value,this.typeColor)}}},C=_,w=(t("e0f1"),t("cba8")),x=Object(w["a"])(C,f,y,!1,null,"abb5e352",null),k=x.exports,A={components:{diricon:k},props:{start:{type:Object,default:function(){return{}}},end:{type:Object,default:function(){return{}}},dataArr:{type:Array,default:function(){return[]}}},data:function(){return{collapseIndex:0}},computed:{metreToKilometre:function(){return function(n){return(n/1e3).toFixed(1)}},secondToTime:function(){return function(n){var e=Math.floor(n/86400),t=Math.floor(n%86400/3600),i=Math.floor(n%86400%3600/60);return e?e+"天"+t+"小时"+i+"分钟":e||t?t+"小时"+i+"分钟":e||t||i?i+"分钟":void 0}},channel:function(){return function(n){var e=n.filter((function(n){return""!=n.road})),t=e.map((function(n){return n.road}));return Object(v["a"])(new Set(t))}}},mounted:function(){},methods:{stepsClick:function(n,e){this.$emit("stepsClick",{lng:n,lat:e})},collapseChange:function(n){""!==this.collapseIndex&&this.$emit("change",this.collapseIndex)}}},T=A,P=(t("2c0a"),Object(w["a"])(T,h,g,!1,null,"8e2bcf86",null)),I=P.exports,S=function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("div",{staticClass:"pathPlanning"},[t("el-collapse",{attrs:{accordion:""},on:{change:n.collapseChange},model:{value:n.collapseIndex,callback:function(e){n.collapseIndex=e},expression:"collapseIndex"}},n._l(n.dataArr,(function(e,i){return t("el-collapse-item",{key:i,attrs:{name:i}},[t("template",{slot:"title"},[t("div",{staticClass:"info-view"},[t("div",{staticClass:"tag"},[n._v("方案"+n._s(i+1))]),t("div",{staticClass:"info"},[t("div",{staticClass:"info-item"},[n._v("约 "+n._s(n.secondToTime(e.time)))]),t("span",[n._v("|")]),t("div",{staticClass:"info-item"},[n._v(" "+n._s(n.metreToKilometre(e.distance))+"公里 ")])]),t("div",{staticClass:"channel"},[t("div",{staticClass:"channel-label"},[n._v("途径：")]),t("div",{staticClass:"channel-info"},n._l(n.channel(e.rides),(function(e,i){return t("span",{key:"channel"+i},[0!=i?t("i",{staticClass:"el-icon-arrow-right"}):n._e(),t("span",[n._v(n._s(e))])])})),0)])])]),t("div",{staticClass:"step-main"},[t("div",{staticClass:"step-item",on:{click:function(e){return n.stepsClick(n.start.location.lng,n.start.location.lat)}}},[t("diricon",{staticClass:"diricon",attrs:{type:"text",value:"起"}}),t("div",{staticClass:"label"},[n._v("从 "+n._s(n.start.name)+"出发")])],1),n._l(e.rides,(function(e,i){return t("div",{key:"steps"+i,staticClass:"step-item",on:{click:function(t){return n.stepsClick(e.start_location.lng,e.start_location.lat)}}},[t("diricon",{staticClass:"diricon",attrs:{type:"riding",value:e.action}}),t("div",{staticClass:"label"},[n._v(n._s(e.instruction))])],1)})),t("div",{staticClass:"step-item",on:{click:function(e){return n.stepsClick(n.end.location.lng,n.end.location.lat)}}},[t("diricon",{staticClass:"diricon",attrs:{type:"text",value:"终"}}),t("div",{staticClass:"label"},[n._v("到达终点 "+n._s(n.end.name))])],1)],2)],2)})),1)],1)},M=[],E={components:{diricon:k},props:{start:{type:Object,default:function(){return{}}},end:{type:Object,default:function(){return{}}},dataArr:{type:Array,default:function(){return[]}}},data:function(){return{collapseIndex:0}},computed:{metreToKilometre:function(){return function(n){return(n/1e3).toFixed(1)}},secondToTime:function(){return function(n){var e=Math.floor(n/86400),t=Math.floor(n%86400/3600),i=Math.floor(n%86400%3600/60);return e?e+"天"+t+"小时"+i+"分钟":e||t?t+"小时"+i+"分钟":e||t||i?i+"分钟":void 0}},channel:function(){return function(n){var e=n.filter((function(n){return""!=n.road})),t=e.map((function(n){return n.road}));return Object(v["a"])(new Set(t))}}},mounted:function(){},methods:{stepsClick:function(n,e){this.$emit("stepsClick",{lng:n,lat:e})},collapseChange:function(n){""!==this.collapseIndex&&this.$emit("change",this.collapseIndex)}}},D=E,O=(t("8c84"),Object(w["a"])(D,S,M,!1,null,"98ef87de",null)),R=O.exports,L=function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("div",{staticClass:"pathPlanning"},[t("el-collapse",{attrs:{accordion:""},on:{change:n.collapseChange},model:{value:n.collapseIndex,callback:function(e){n.collapseIndex=e},expression:"collapseIndex"}},n._l(n.dataArr,(function(e,i){return t("el-collapse-item",{key:i,attrs:{name:i}},[t("template",{slot:"title"},[t("div",{staticClass:"info-view"},[t("div",{staticClass:"tag"},[n._v("方案"+n._s(i+1))]),t("div",{staticClass:"info"},[t("div",{staticClass:"info-item"},[n._v("约 "+n._s(n.secondToTime(e.time)))]),t("span",[n._v("|")]),t("div",{staticClass:"info-item"},[n._v(" "+n._s(n.metreToKilometre(e.distance))+"公里 ")])]),t("div",{staticClass:"channel"},[t("div",{staticClass:"channel-label"},[n._v("途径：")]),t("div",{staticClass:"channel-info"},n._l(n.channel(e.steps),(function(e,i){return t("span",{key:"channel"+i},[0!=i?t("i",{staticClass:"el-icon-arrow-right"}):n._e(),t("span",[n._v(n._s(e))])])})),0)])])]),t("div",{staticClass:"step-main"},[t("div",{staticClass:"step-item",on:{click:function(e){return n.stepsClick(n.start.location.lng,n.start.location.lat)}}},[t("diricon",{staticClass:"diricon",attrs:{type:"text",value:"起"}}),t("div",{staticClass:"label"},[n._v("从 "+n._s(n.start.name)+"出发")])],1),n._l(e.steps,(function(e,i){return t("div",{key:"steps"+i,staticClass:"step-item",on:{click:function(t){return n.stepsClick(e.start_location.lng,e.start_location.lat)}}},[t("diricon",{staticClass:"diricon",attrs:{type:"walking",value:e.action}}),t("div",{staticClass:"label"},[n._v(n._s(e.instruction))])],1)})),t("div",{staticClass:"step-item",on:{click:function(e){return n.stepsClick(n.end.location.lng,n.end.location.lat)}}},[t("diricon",{staticClass:"diricon",attrs:{type:"text",value:"终"}}),t("div",{staticClass:"label"},[n._v("到达终点 "+n._s(n.end.name))])],1)],2)],2)})),1)],1)},j=[],z={components:{diricon:k},props:{start:{type:Object,default:function(){return{}}},end:{type:Object,default:function(){return{}}},dataArr:{type:Array,default:function(){return[]}}},data:function(){return{collapseIndex:0}},computed:{metreToKilometre:function(){return function(n){return(n/1e3).toFixed(1)}},secondToTime:function(){return function(n){var e=Math.floor(n/86400),t=Math.floor(n%86400/3600),i=Math.floor(n%86400%3600/60);return e?e+"天"+t+"小时"+i+"分钟":e||t?t+"小时"+i+"分钟":e||t||i?i+"分钟":void 0}},channel:function(){return function(n){var e=n.filter((function(n){return""!=n.road})),t=e.map((function(n){return n.road}));return Object(v["a"])(new Set(t))}}},mounted:function(){},methods:{stepsClick:function(n,e){this.$emit("stepsClick",{lng:n,lat:e})},collapseChange:function(n){""!==this.collapseIndex&&this.$emit("change",this.collapseIndex)}}},G=z,N=(t("1d43"),Object(w["a"])(G,L,j,!1,null,"73ff115a",null)),B=N.exports,V=function(){var n=this,e=n.$createElement,i=n._self._c||e;return i("div",{staticClass:"pathPlanning"},[0!=n.handleArr.length?[i("el-collapse",{attrs:{accordion:""},on:{change:n.collapseChange},model:{value:n.collapseIndex,callback:function(e){n.collapseIndex=e},expression:"collapseIndex"}},n._l(n.handleArr,(function(e,a){return i("el-collapse-item",{key:a,attrs:{name:a}},[i("template",{slot:"title"},[i("div",{staticClass:"head"},[i("div",{staticClass:"head-step-view"},n._l(n.step(e.segments),(function(e,a){return i("div",{key:a,staticClass:"head-step-item-for"},[0!=a?i("i",{staticClass:"el-icon-arrow-right icon"}):n._e(),i("div",{staticClass:"head-step-item"},["BUS"==e.transit_mode?i("img",{attrs:{src:t("1c72"),alt:""}}):n._e(),"SUBWAY"==e.transit_mode?i("img",{attrs:{src:t("9119"),alt:""}}):n._e(),n._v(" "+n._s(e.transit.lines[0].name)+" ")])])})),0),i("div",{staticClass:"info-view"},[i("div",{staticClass:"info"},[i("div",{staticClass:"info-item"},[n._v(" 约"+n._s(n.secondToTime(e.time))+"（"+n._s(n.metreToKilometre(e.transit_distance))+"） ")]),i("span",[n._v("|")]),i("div",{staticClass:"info-item"},[n._v(" 步行"+n._s(n.metreToKilometre(e.walking_distance))+" ")]),i("span",[n._v("|")]),i("div",{staticClass:"info-item",staticStyle:{color:"red"}},[n._v(" "+n._s(e.cost)+"元 ")])])])])]),i("div",{staticClass:"step-main"},[i("div",{staticClass:"step-item start"},[i("diricon",{staticClass:"diricon",attrs:{type:"text",value:"起"}}),i("div",{staticClass:"label"},[n._v(n._s(n.start.name))])],1),n._l(e.segments,(function(e,t){return i("div",{key:t},["WALK"==e.transit_mode?i("div",{staticClass:"step-item WALK"},[i("div",{staticClass:"label"},[n._v(n._s(e.instruction))])]):i("div",{staticClass:"step-item Multiple"},[i("div",{staticClass:"spot"}),i("diricon",{staticClass:"diricon",attrs:{type:"vehicle",value:"transfer",bgColor:"#418AEC"}}),i("div",{staticClass:"multiple-step"},[i("div",{staticClass:"multiple-step-head"},[n._v(" "+n._s(e.instruction)+" ")]),i("div",{staticClass:"multiple-step-content"},[i("div",{staticClass:"multiple-step-content-item"},[i("div",{staticClass:"multiple-step-content-item-value"},[n._v(" "+n._s(e.transit.on_station.name)+" ")]),i("div",{staticClass:"multiple-step-content-item-label"},[n._v(" 上车 "),e.transit.entrance?[n._v(n._s(e.transit.entrance.name))]:n._e()],2)]),i("div",{staticClass:"list",class:{hide:e.open}},[i("ul",n._l(e.transit.via_stops,(function(e,t){return i("li",{key:t},[n._v(" "+n._s(e.name)+" ")])})),0)]),i("div",{staticClass:"multiple-step-content-item"},[i("div",{staticClass:"multiple-step-content-item-value"},[n._v(" "+n._s(e.transit.off_station.name)+" ")]),i("div",{staticClass:"multiple-step-content-item-label"},[n._v(" 下车 "),e.transit.exit?[n._v(n._s(e.transit.exit.name))]:n._e()],2)]),i("div",{staticClass:"multiple-step-content-item-info",class:{open:e.open}},[i("div",{staticClass:"multiple-step-content-item-info-text"},[0!=e.transit.lines[0].stime.length?[n._v(" 上车站 首："+n._s(n.stringToTime(e.transit.lines[0].stime))+" 末："+n._s(n.stringToTime(e.transit.lines[0].etime))+" ")]:n._e()],2),e.transit.via_num>0?i("div",{staticClass:"multiple-step-content-item-info-leng",on:{click:function(e){return n.openPlatformStep(a,t)}}},[i("span",[n._v(n._s(e.transit.via_num+1)+"站")]),i("i",{staticClass:"el-icon-arrow-up icon"})]):n._e()])])])],1)])})),i("div",{staticClass:"step-item end"},[i("diricon",{staticClass:"diricon",attrs:{type:"text",value:"终"}}),i("div",{staticClass:"label"},[n._v(n._s(n.end.name))])],1)],2)],2)})),1)]:n._e()],2)},U=[],F=t("9192"),H=(t("150a"),{components:{diricon:k},props:{start:{type:Object,default:function(){return{}}},end:{type:Object,default:function(){return{}}},dataArr:{type:Array,default:function(){return[]}}},data:function(){return{collapseIndex:0,open:!1,handleArr:[]}},computed:{metreToKilometre:function(){return function(n){return n<1e3?n+"米":(n/1e3).toFixed(1)+"公里"}},secondToTime:function(){return function(n){var e=Math.floor(n/86400),t=Math.floor(n%86400/3600),i=Math.floor(n%86400%3600/60);return e?e+"天"+t+"小时"+i+"分钟":e||t?t+"小时"+i+"分钟":e||t||i?i+"分钟":void 0}},step:function(){return function(n){var e=n.filter((function(n){return"WALK"!=n.transit_mode}));return 0!=e.length?e:[]}},stringToTime:function(){return function(n){return n.replace(/^(.{2})/,"$1:")}}},watch:{dataArr:{handler:function(n,e){function t(){return n.map((function(n){var e=n.segments.map((function(n){return Object(F["a"])(Object(F["a"])({},n),{},{open:!1})}));return Object(F["a"])(Object(F["a"])({},n),e)}))}this.handleArr=t()},immediate:!0,deep:!0}},methods:{openPlatformStep:function(n,e){console.log(n,e),this.$set(this.handleArr[n].segments[e],"open",!this.handleArr[n].segments[e].open)},stepsClick:function(n,e){this.$emit("stepsClick",{lng:n,lat:e})},collapseChange:function(n){""!==this.collapseIndex&&this.$emit("change",this.collapseIndex)}}}),Q=H,W=(t("f120"),Object(w["a"])(Q,V,U,!1,null,"a89bbee0",null)),J=W.exports,Y={components:{pathPlanningDriving:I,pathPlanningRiding:R,pathPlanningWalking:B,pathPlanningTransfer:J},props:{show:{type:Boolean,default:function(){return!1}},option:{type:Object,default:function(){return{}}},poisId:{type:String,default:function(){return""}}},data:function(){return{drawer:!1,_GaodeMap:null,_Utils:null,loading:!1,panelTypeArr:[{label:"兴趣点",value:"1"},{label:"路线规划与导航",value:"2"}],panelType:"1",range:"city",cityOptions:[],city:["210000","210100"],placeSearchType:[],searchType:["餐饮服务","商务住宅","生活服务"],polymerization:!1,keyword:"",poisClickId:"",pageIndex:1,pageSize:20,total:0,poisList:[],startPosition:"",endPosition:"",startPositionResult:{},endPositionResult:{},navigationTypeArr:[{label:"驾车",value:"driving"},{label:"公交",value:"transfer"},{label:"骑行",value:"riding"},{label:"步行",value:"walking"}],navigationType:"",routeLocationArr:[],drivingData:[],ridingData:[],walkingData:[],transferData:[]}},watch:{show:{handler:function(n,e){this.drawer=n,n&&this.initAutoComplete()},deep:!0,immediate:!0},poisId:{handler:function(n,e){this.poisClickId=n},deep:!0,immediate:!0}},mounted:function(){var n=this;window._AMapSecurityConfig={securityJsCode:"2a0ce2005352672661417093c485a056"},this._Utils=new c["a"],this._Utils.loadJs("https://webapi.amap.com/maps?v=2.0&key=".concat("cb250acd7ee0e7b2049cb93747ae3d44","&plugin=").concat((new u).plugin),{append:"body",defer:!0}).then((function(){n._GaodeMap=new u(AMap),n.$nextTick((function(){n._GaodeMap.districtList({subdistrict:2}).then((function(e){n.cityOptions=e})),n.placeSearchType=n._GaodeMap.placeSearchType}))}))},methods:{handleRoutes:function(n){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=arguments.length>2?arguments[2]:void 0,i=[],a=n[e][t],s=a.length,l=0;l<s;l++){var o=a[l];if(0!=o.path.length)for(var r=0;r<o.path.length;r++)i.push([o.path[r].lng,o.path[r].lat]);else i.push([o.start_location.lng,o.start_location.lat])}this.$emit("load",{type:"navigation",style:this.navigationType,data:i})},navigationTypeChange:function(n){var e=this,t=[this.startPositionResult.poi.location.lng,this.startPositionResult.poi.location.lat],i=[this.endPositionResult.poi.location.lng,this.endPositionResult.poi.location.lat];"driving"==n&&this._GaodeMap.Driving({extensions:"all",policy:10,start:t,end:i}).then((function(n){e.drivingData=n.routes,0!=n.routes.length&&e.handleRoutes(n.routes,0,"steps")})),"transfer"==n&&this._GaodeMap.Transfer({extensions:"all",start:t,end:i,city:"沈阳市"}).then((function(n){console.log(n),e.transferData=n.plans})),"riding"==n&&this._GaodeMap.Riding({extensions:"all",start:t,end:i}).then((function(n){e.ridingData=n.routes,0!=n.routes.length&&e.handleRoutes(n.routes,0,"rides")})),"walking"==n&&this._GaodeMap.Walking({start:t,end:i}).then((function(n){e.walkingData=n.routes,0!=n.routes.length&&e.handleRoutes(n.routes,0,"steps")}))},setLine:function(n){"driving"==this.navigationType&&this.handleRoutes(this.drivingData,n,"steps"),"riding"==this.navigationType&&this.handleRoutes(this.ridingData,n,"rides"),"walking"==this.navigationType&&this.handleRoutes(this.walkingData,n,"steps")},tabClick:function(n){"2"==n.name&&this.initAutoComplete()},stepsClick:function(n){this.$emit("stepsClick",n)},initAutoComplete:function(){var n=this;setTimeout((function(){n._GaodeMap.AutoComplete({input:"startPosition"}).then((function(e){e.on("select",(function(e){e.poi.location?(n.startPositionResult=e,n.startPosition=e.poi.name):n.$notify({title:"警告",message:"输入的地址有误，请重新输入",type:"warning"})}))})),n._GaodeMap.AutoComplete({input:"endPosition"}).then((function(e){e.on("select",(function(e){e.poi.location?(n.endPositionResult=e,n.endPosition=e.poi.name):n.$notify({title:"警告",message:"输入的地址有误，请重新输入",type:"warning"})}))}))}),500)},poisClick:function(n){this.poisClickId=n.id,this.$emit("poisClick",n)},search:function(){var n=this;if(""!=this.keyword)if("city"!=this.range||0!=this.city.length){var e={pageSize:this.pageSize,pageIndex:this.pageIndex,searchKeyword:this.keyword,extensions:"all"};"city"==this.range&&(e.city=this.city[1]||""),0!=this.searchType.length&&(e.type=this.searchType.join("|")),this.loading=!0,this._GaodeMap.placeSearch(e).then((function(e){n.total=e.count,n.poisList=e.pois,n.$nextTick((function(){n.$refs.poisList.scrollTop=0})),n.loading=!1,n.$emit("load",{type:"pois",polymerization:n.polymerization,data:n.poisList})})).catch((function(e){n.$notify.error({title:"错误",message:"请重新搜索"})}))}else this.$message({message:"请选择城市",type:"warning"})},currentPaginationChange:function(n){this.pageIndex=n,this.search()},handleClose:function(){this.$emit("close")}}},Z=Y,K=(t("5e72"),Object(w["a"])(Z,o,r,!1,null,"8d6ecc00",null)),X=K.exports,$=t("dd8c"),q=t("9e48"),nn=t("f4bf"),en=t("4cef"),tn=t("7adc"),an=t.n(tn),sn=[{codeLanguage:"VUE",relyOn:[{label:"gcoord（npm）",url:"https://www.npmjs.com/package/gcoord",externalLinks:!0},{label:"geojson（npm）",url:"https://www.npmjs.com/package/geojson",externalLinks:!0},{label:"Utils.js",url:"cesium/Utils.js"},{label:"Entity.js",url:"cesium/Entity.js"},{label:"Canvas.js",url:"cesium/Canvas.js"},{label:"Gaode/index.js",url:"cesium/Map/Gaode/index.js"},{label:"Materials/index.js",url:"cesium/Materials/index.js"},{label:"TrailLineMaterialProperty.js",url:"Vue/Maps/Gaode/PoiQuery/material/TrailLineMaterialProperty.js"},{label:"POI-panel.scss",url:"Vue/Maps/Gaode/PoiQuery/POI-panel.scss"},{label:"POI-panel.vue",url:"Vue/Maps/Gaode/PoiQuery/POI-panel.vue"},{label:"components.zip（组件包）",url:"Vue/Maps/Gaode/PoiQuery/components.zip"},{label:"position.png",url:"Vue/Maps/Gaode/PoiQuery/position.png"},{label:"position-active.png",url:"Vue/Maps/Gaode/PoiQuery/position-active.png"},{label:"cluster_1.png",url:"Vue/Maps/Gaode/PoiQuery/cluster_1.png"},{label:"cluster_2.png",url:"Vue/Maps/Gaode/PoiQuery/cluster_2.png"},{label:"cluster_3.png",url:"Vue/Maps/Gaode/PoiQuery/cluster_3.png"},{label:"cluster_4.png",url:"Vue/Maps/Gaode/PoiQuery/cluster_4.png"}],code:[{codeLanguage:"html",content:'<template>\n                    <div class="container">\n                      <div id="cesiumContainer"></div>\n                      <el-button\n                        type="primary"\n                        class="tools"\n                        icon="el-icon-s-tools"\n                        circle\n                        @click="poiPanelShow = !poiPanelShow"\n                      ></el-button>\n                      <poi-Panel\n                        :show="poiPanelShow"\n                        :poisId="poisClickId"\n                        @close="poiPanelShow = false"\n                        @load="load"\n                        @poisClick="poisClick"\n                        @stepsClick="setStepsCamera"\n                      />\n                    </div>\n                  </template>'},{codeLanguage:"js",content:'import poiPanel from "./module/POI-panel.vue";\n                  import Canvas from "@/common/cesium/Canvas.js";\n                  import Entity from "@/common/cesium/Entity.js";\n                  import gcoord from "gcoord";\n                  import Material from "@/common/cesium/Materials/index.js";\n                  import GeoJSON from "geojson";\n                  import { v4 as uuidv4 } from "uuid";\n                  export default {\n                    name: "PoiQuery",\n                    components: { poiPanel },\n                    data() {\n                      return {\n                        poiPanelShow: false,\n                  \n                        viewer: null,\n                        _Entity: null,\n                        _Canvas: null,\n                        handler: null,\n                  \n                        EntityArr: [],\n                        poisClickId: "", //兴趣点高亮id\n                      };\n                    },\n                    mounted() {\n                      this.init();\n                    },\n                    methods: {\n                      init() {\n                        const Cesium = this.cesium;\n                        Cesium.Ion.defaultAccessToken = process.env.VUE_APP_TOKEN;\n                        this.viewer = new Cesium.Viewer("cesiumContainer", {\n                          imageryProvider: new Cesium.ArcGisMapServerImageryProvider({\n                            url: "https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",\n                          }),\n                          shouldAnimate: true,\n                          infoBox: false,\n                          selectionIndicator: false,\n                        });\n                        //地形侦测\n                        // this.viewer.scene.globe.depthTestAgainstTerrain = false;\n                        //去锯齿 使文字清晰\n                        this.viewer.scene.postProcessStages.fxaa.enabled = false;\n                  \n                        this._Entity = new Entity(Cesium, this.viewer);\n                        this._Material = new Material(Cesium, this.viewer);\n                        this._Canvas = new Canvas(Cesium, this.viewer);\n                  \n                        this.handler = new Cesium.ScreenSpaceEventHandler(\n                          this.viewer.scene.canvas\n                        );\n                  \n                        //去掉双击事件\n                        this.viewer.cesiumWidget.screenSpaceEventHandler.removeInputAction(\n                          Cesium.ScreenSpaceEventType.LEFT_DOUBLE_CLICK\n                        );\n                  \n                        //鼠标左键点击\n                        this.handler.setInputAction((event) => {\n                          const pick = this.viewer.scene.pick(event.position);\n                          if (pick) {\n                            if (!pick.id) return;\n                            this.setPoisActive(pick.id._id);\n                            this.viewer.flyTo(pick.id);\n                          }\n                        }, Cesium.ScreenSpaceEventType.LEFT_CLICK);\n                      },\n                      /**\n                      * 兴趣点触发\n                      * @param {*} e\n                      */\n                      poisClick(e) {\n                        //坐标系转换\n                        const result = gcoord.transform(\n                          [e.location.lng, e.location.lat], // 经纬度坐标\n                          gcoord.AMap, // 当前坐标系\n                          gcoord.WGS84 // 目标坐标系\n                        );\n                        this.setCamera({\n                          location: result,\n                          id: e.id,\n                        });\n                      },\n                      /**\n                      * 设置兴趣点高亮\n                      * @param {*} id\n                      */\n                      setPoisActive(id) {\n                        this.poisClickId = id || "";\n                        for (let i = 0; i < this.EntityArr.length; i++) {\n                          if (this.EntityArr[i].id == id) {\n                            this.EntityArr[i].billboard.image =\n                              process.env.VUE_APP_PUBLIC_URL +\n                              "/Vue/Maps/Gaode/PoiQuery/position-active.png";\n                          } else {\n                            this.EntityArr[i].billboard.image =\n                              process.env.VUE_APP_PUBLIC_URL +\n                              "/Vue/Maps/Gaode/PoiQuery/position.png";\n                          }\n                        }\n                      },\n                      /**\n                      * 设置点击位置相机位置\n                      * @param {*} e\n                      */\n                      setStepsCamera(e) {\n                        const Cesium = this.cesium;\n                        this.viewer.camera.flyTo({\n                          destination: Cesium.Cartesian3.fromDegrees(e.lng, e.lat, 3000),\n                        });\n                      },\n                      /**\n                      * 设置相机位置\n                      * @param {*} e\n                      */\n                      setCamera(e) {\n                        const Cesium = this.cesium;\n                        //设置兴趣点高亮\n                        this.setPoisActive(e.id || "");\n                  \n                        this.viewer.camera.flyTo({\n                          destination: Cesium.Cartesian3.fromDegrees(\n                            e.location[0],\n                            e.location[1],\n                            3000\n                          ),\n                        });\n                      },\n                      /**\n                      * 操作面板加载回调\n                      */\n                      load(e) {\n                        this.clearEntity();\n                        if (e.type == "pois") {\n                          this.setPointPosition(e).then((res) => {\n                            // console.log(res);\n                            this.EntityArr = res;\n                            this.viewer.flyTo(res);\n                          });\n                        }\n                        if (e.type == "navigation") {\n                          this.setDrawRoute(e);\n                        }\n                      },\n                      /**\n                      * 坐标转换\n                      */\n                      gcoordTransform(position) {\n                        const result = gcoord.transform(\n                          position, // 经纬度坐标\n                          gcoord.AMap, // 当前坐标系\n                          gcoord.WGS84 // 目标坐标系\n                        );\n                        return result;\n                      },\n                      /**\n                      * 绘制起点和终点广告牌\n                      * @param {Array} start\n                      * @param {Array} end\n                      */\n                      setStartAndEndPosition(start, end) {\n                        const Cesium = this.cesium;\n                        this._Entity.createBillboard({\n                          id: uuidv4(),\n                          position: Cesium.Cartesian3.fromDegrees(start[0], start[1]),\n                          image:\n                            process.env.VUE_APP_PUBLIC_URL + "/Vue/Maps/Gaode/PoiQuery/start.png",\n                          verticalOrigin: Cesium.VerticalOrigin.BOTTOM,\n                          heightReference: Cesium.HeightReference.CLAMP_TO_GROUND,\n                          width: 23,\n                          height: 35,\n                        });\n                        this._Entity.createBillboard({\n                          id: uuidv4(),\n                          position: Cesium.Cartesian3.fromDegrees(end[0], end[1]),\n                          image:\n                            process.env.VUE_APP_PUBLIC_URL + "/Vue/Maps/Gaode/PoiQuery/end.png",\n                          verticalOrigin: Cesium.VerticalOrigin.BOTTOM,\n                          heightReference: Cesium.HeightReference.CLAMP_TO_GROUND,\n                          width: 23,\n                          height: 35,\n                        });\n                      },\n                      /**\n                      * 绘制路线\n                      * @param {Object} parameter\n                      */\n                      setDrawRoute(parameter) {\n                        console.log(parameter);\n                        const { data, style } = parameter;\n                        const Cesium = this.cesium;\n                        let color = "";\n                        if (style == "driving") {\n                          color = "#409EFF";\n                        }\n                        if (style == "riding") {\n                          color = "#67C23A";\n                        }\n                        if (style == "walking") {\n                          color = "#E6A23C";\n                        }\n                  \n                        const arrData = [];\n                        data.map((item) => {\n                          const result = this.gcoordTransform([item[0], item[1]]);\n                          arrData.push(result[0], result[1]);\n                        });\n                  \n                        //设置广告牌哦\n                        this.setStartAndEndPosition(\n                          [arrData[0], arrData[1]],\n                          [arrData[arrData.length - 2], arrData[arrData.length - 1]]\n                        );\n                  \n                        const Route = this._Entity.createPolyline({\n                          positions: Cesium.Cartesian3.fromDegreesArray(arrData),\n                          // clampToGround: true,\n                          material: new Cesium.Color.fromCssColorString(color),\n                          arcType: Cesium.ArcType.GEODESIC,\n                          width: 10,\n                        });\n                  \n                        this.viewer.flyTo(Route);\n                      },\n                      /**\n                      * 清空实体\n                      */\n                      clearEntity() {\n                        this.viewer.entities.removeAll();\n                      },\n                      /**\n                      * 设置标点\n                      */\n                      async setPointPosition(data) {\n                        const Cesium = this.cesium;\n                  \n                        //实体数据\n                        const EntityArr = [];\n                        //是否聚合\n                        const polymerization = data.polymerization;\n                        //json数据\n                        const arr = data.data;\n                        //geojson 数据\n                        return await new Promise((resolve, reject) => {\n                          if (polymerization) {\n                            const _getJson = GeoJSON.parse(arr, {\n                              Point: ["location.lat", "location.lng"],\n                            });\n                            new Cesium.GeoJsonDataSource().load(_getJson).then((dataSource) => {\n                              this.viewer.dataSources.add(dataSource);\n                              // 设置聚合参数\n                              dataSource.clustering.enabled = true;\n                              dataSource.clustering.pixelRange = 60;\n                              dataSource.clustering.minimumClusterSize = 2;\n                  \n                              // foreach用于调用数组的每个元素，并将元素传递给回调函数。\n                              for (let i = 0; i < dataSource.entities.values.length; i++) {\n                                const entity = dataSource.entities.values[i];\n                                // 将点拉伸一定高度，防止被地形压盖\n                                entity.position._value.z += 50.0;\n                                entity._id = entity._properties._id._value;\n                                let image = "";\n                                if (entity._id == this.poisClickId) {\n                                  image =\n                                    process.env.VUE_APP_PUBLIC_URL +\n                                    "/Vue/Maps/Gaode/PoiQuery/position-active.png";\n                                } else {\n                                  image =\n                                    process.env.VUE_APP_PUBLIC_URL +\n                                    "/Vue/Maps/Gaode/PoiQuery/position.png";\n                                }\n                                entity.billboard = {\n                                  image,\n                                  width: 16,\n                                  height: 22,\n                                  verticalOrigin: Cesium.VerticalOrigin.BOTTOM,\n                                  heightReference: Cesium.HeightReference.CLAMP_TO_GROUND,\n                                };\n                                //⽂字标签\n                                entity.label = {\n                                  text: entity.properties.name._value,\n                                  font: "500 30px Helvetica", // 15pt monospace\n                                  scale: 0.5,\n                                  style: Cesium.LabelStyle.FILL_AND_OUTLINE,\n                                  fillColor: Cesium.Color.WHITE,\n                                  pixelOffset: new Cesium.Cartesian2(-8, -50), //偏移量\n                                  showBackground: false,\n                                  heightReference: Cesium.HeightReference.CLAMP_TO_GROUND,\n                                  distanceDisplayCondition: new Cesium.DistanceDisplayCondition(\n                                    0.0,\n                                    20000.0\n                                  ),\n                                };\n                                EntityArr.push(entity);\n                              }\n                              // 添加监听函数\n                              dataSource.clustering.clusterEvent.addEventListener(\n                                (clusteredEntities, cluster) => {\n                                  // 关闭自带的显示聚合数量的标签\n                                  cluster.label.show = false;\n                                  cluster.billboard.show = true;\n                                  cluster.billboard.verticalOrigin = Cesium.VerticalOrigin.BOTTOM;\n                  \n                                  // 根据聚合数量的多少设置不同层级的图片以及大小\n                                  if (clusteredEntities.length >= 20) {\n                                    cluster.billboard.image = this._Canvas.combineIconAndLabel({\n                                      url:\n                                        process.env.VUE_APP_PUBLIC_URL +\n                                        "/Vue/Maps/Gaode/PoiQuery/cluster_4.png",\n                                      label: clusteredEntities.length,\n                                      size: 72,\n                                    });\n                                    cluster.billboard.width = 72;\n                                    cluster.billboard.height = 72;\n                                  } else if (clusteredEntities.length >= 12) {\n                                    cluster.billboard.image = this._Canvas.combineIconAndLabel({\n                                      url:\n                                        process.env.VUE_APP_PUBLIC_URL +\n                                        "/Vue/Maps/Gaode/PoiQuery/cluster_3.png",\n                                      label: clusteredEntities.length,\n                                      size: 56,\n                                    });\n                                    cluster.billboard.width = 56;\n                                    cluster.billboard.height = 56;\n                                  } else if (clusteredEntities.length >= 8) {\n                                    cluster.billboard.image = this._Canvas.combineIconAndLabel({\n                                      url:\n                                        process.env.VUE_APP_PUBLIC_URL +\n                                        "/Vue/Maps/Gaode/PoiQuery/cluster_2.png",\n                                      label: clusteredEntities.length,\n                                      size: 48,\n                                    });\n                                    cluster.billboard.width = 48;\n                                    cluster.billboard.height = 48;\n                                  } else {\n                                    cluster.billboard.image = this._Canvas.combineIconAndLabel({\n                                      url:\n                                        process.env.VUE_APP_PUBLIC_URL +\n                                        "/Vue/Maps/Gaode/PoiQuery/cluster_1.png",\n                                      label: clusteredEntities.length,\n                                      size: 40,\n                                    });\n                                    cluster.billboard.width = 40;\n                                    cluster.billboard.height = 40;\n                                  }\n                                }\n                              );\n                            });\n                            setTimeout(() => {\n                              resolve(EntityArr);\n                            }, 1000);\n                          } else {\n                            for (let i = 0; i < arr.length; i++) {\n                              const item = arr[i];\n                              //坐标系转换\n                              const result = gcoord.transform(\n                                [item.location.lng, item.location.lat], // 经纬度坐标\n                                gcoord.AMap, // 当前坐标系\n                                gcoord.WGS84 // 目标坐标系\n                              );\n                              const _Entity_ = this._Entity.createBillboard({\n                                id: item.id,\n                                name: item.name,\n                                position: Cesium.Cartesian3.fromDegrees(result[0], result[1]),\n                                common: {\n                                  label: {\n                                    //⽂字标签\n                                    text: item.name,\n                                    font: "500 30px Helvetica", // 15pt monospace\n                                    scale: 0.5,\n                                    style: Cesium.LabelStyle.FILL_AND_OUTLINE,\n                                    fillColor: Cesium.Color.WHITE,\n                                    pixelOffset: new Cesium.Cartesian2(-8, -50), //偏移量\n                                    showBackground: false,\n                                    heightReference: Cesium.HeightReference.CLAMP_TO_GROUND,\n                                    distanceDisplayCondition: new Cesium.DistanceDisplayCondition(\n                                      0.0,\n                                      20000.0\n                                    ),\n                                  },\n                                },\n                                image:\n                                  process.env.VUE_APP_PUBLIC_URL +\n                                  "/Vue/Maps/Gaode/PoiQuery/position.png",\n                                verticalOrigin: Cesium.VerticalOrigin.BOTTOM,\n                                heightReference: Cesium.HeightReference.CLAMP_TO_GROUND,\n                                width: 16,\n                                height: 22,\n                              });\n                              EntityArr.push(_Entity_);\n                            }\n                            setTimeout(() => {\n                              resolve(EntityArr);\n                            }, 1000);\n                          }\n                        });\n                      },\n                    },\n                  };'},{codeLanguage:"css",content:".container {\n                    width: 100%;\n                    height: 100%;\n                    #cesiumContainer {\n                      width: 100%;\n                      height: 100%;\n                    }\n                    .tools {\n                      position: fixed;\n                      bottom: 40px;\n                      right: 20px;\n                    }\n                  }"}]},{codeLanguage:"JS",relyOn:[{label:"gcoord",url:"JavaScript/cesium/Tripartite/gcoord/dist/gcoord.js"},{label:"geojson",url:"JavaScript/cesium/Tripartite/geojson/geojson.min.js"},{label:"layer",url:"JavaScript/cesium/Tripartite/layer/layer.zip"},{label:"layui",url:"JavaScript/cesium/Tripartite/layui/layui.zip"},{label:"Utils.js",url:"JavaScript/cesium/Utils.js"},{label:"Entity.js",url:"JavaScript/cesium/Entity.js"},{label:"Canvas.js",url:"JavaScript/cesium/Canvas.js"},{label:"Gaode/index.js",url:"JavaScript/cesium/Map/Gaode/index.js"},{label:"position.png",url:"JavaScript/Maps/Gaode/PoiQuery/position.png"},{label:"position-active.png",url:"JavaScript/Maps/Gaode/PoiQuery/position-active.png"},{label:"cluster_1.png",url:"JavaScript/Maps/Gaode/PoiQuery/cluster_1.png"},{label:"cluster_2.png",url:"JavaScript/Maps/Gaode/PoiQuery/cluster_2.png"},{label:"cluster_3.png",url:"JavaScript/Maps/Gaode/PoiQuery/cluster_3.png"},{label:"cluster_4.png",url:"JavaScript/Maps/Gaode/PoiQuery/cluster_4.png"},{label:"iconfont.css",url:"JavaScript/cesium/iconfont/iconfont.css"},{label:"diricon.7z",url:"JavaScript/cesium/Map/Gaode/diricon.7z"}],code:[{codeLanguage:"js",content:" window.gaodePoiVar = {\n                    tabIndex: 0,\n                    securityJsCode: \"必填\",//高德code  测试不久之后会失效 需要自行注册\n                    key: \"必填\",//高德key 测试不久之后会失效 需要自行注册\n                    openSetUpDomId: \"openSetUp\",//打开操作面板元素id\n                    openPOIPanelDomId: \"POIPanel\",//操作面板元素id\n                    filePath: \"/test/Maps/Gaode/PoiQuery\",//通用路径\n                    _Utils: null,\n                    _GaodeMap: null,\n                    _Entity: null,//初始化实体函数\n                    _Canvas: null,\n                    _Diricon: null,//icon 雪碧图\n                    linkageAddressProvinceDom: null,//存放 初始化 城市联动dom元素（省）\n                    linkageAddressCityDom: null,//存放 初始化 城市联动dom元素（市）\n                    cityCode: \"\",//选择的市code （只存了市级的code 因为目前检索需要 而省则暂时不需要）\n                    placeSearchType: [],//搜索的兴趣点类别数据\n                    placeSearchTypeCheckboxDom: null,//暂存 兴趣点类别 复选数据\n                    districtList: [],//行政列表数据\n                    polymerization: false,//是否聚合\n            \n                    pageSize: 10,\n                    pageIndex: 1,\n                    total: 0,\n                    poisList: [],//检索点数据\n            \n                    poisEntityArr: [],//存入点位实体\n            \n            \n                    startPosition: \"\", //起始输入位置数据\n                    endPosition: \"\", //终点输入位置数据\n                    startPositionResult: {}, //起始结果位置数据\n                    endPositionResult: {}, //终点结果位置数据\n            \n                    //驾车路线\n                    drivingData: [],\n                    //骑行路线\n                    ridingData: [],\n                    //步行路线\n                    walkingData: [],\n                    //公交路线\n                    transferData: [],\n            \n            \n            \n                    //初始化\n                    init() {\n                        window._AMapSecurityConfig = {\n                            securityJsCode: this.securityJsCode,\n                        };\n                        this._Utils = new Utils()\n                        this._Canvas = new Canvas(Cesium)\n                        this._Entity = new Entity(Cesium, viewer);\n                        this._Utils.loadJs(\n                            'https://webapi.amap.com/maps?v=2.0&key='+this.key+'&plugin='+new GaodeMap().plugin,\n                            { append: \"body\", defer: true }\n                        ).then(() => {\n                                this._GaodeMap = new GaodeMap(AMap);\n                                //行政列表\n                                this._GaodeMap.districtList({ subdistrict: 2 }).then((res) => {\n                                    // console.log(res)\n                                    this.districtList = res\n            \n                                    //创建 省 dom元素 start\n                                    let province = window.document.createElement(\"div\");\n                                    province.id = 'linkageAddress-province'\n                                    province.className = 'linkageAddress-province linkageAddress-input'\n                                    let province_find_html = \"\"\n                                    for (let province_i = 0; province_i < res.length; province_i++) {\n                                        const province_item = res[province_i]\n                                        province_find_html += '<li onclick=\"gaodePoiVar.linkageAddressTrigger('+event+','+'province'+')\" data-value=\"'+province_item.adcode+'\" data-label=\"+'province_item.name'+\">'+province_item.name+'</li>'\n                                    }\n                                    let provinceHtml = '<p>请选择省<span>&or;</span></p><input><ul>'+province_find_html+'</ul>'\n                                    province.innerHTML = provinceHtml\n                                    this.linkageAddressProvinceDom = province\n                                    //创建 省 dom元素 end\n\n                                    // 创建 市 dom元素 start\n                                    let city = window.document.createElement(\"div\");\n                                    city.id = 'linkageAddress-city'\n                                    city.className = 'linkageAddress-city linkageAddress-input disabled'\n                                    let cityHtml = '<p>请选择市<span>&or;</span></p><input><ul></ul>'\n                                    city.innerHTML = cityHtml\n                                    this.linkageAddressCityDom = city\n                                    // 创建 市 dom元素 end\n            \n                                    //调用创建 面板打开关闭按钮\n                                    this.createOpenSetUpButton()\n                                    //创建操作面板\n                                    this.createPOIPanel({\n                                        linkageAddress: {\n                                            province,\n                                            city\n                                        }\n                                    })\n                                    //创建导航搜索组件\n                                    this.initAutoComplete()\n                                    //加载自定义icon所需文件 -- 用作导航指引图标 start\n                                    this._Utils.loadJs(\n                                        '../landstar/js/LS-cesium-common/Map/Gaode/diricon/Diricon.js',\n                                        { append: \"body\", defer: true }\n                                    )\n                                    createStyleModule('../landstar/js/LS-cesium-common/Map/Gaode/diricon/css/index.css')\n                                    //加载自定义icon所需文件 -- 用作导航指引图标 end\n                                });\n                                //搜索数据的兴趣点类别\n                                this.placeSearchType = this._GaodeMap.placeSearchType\n                                let placeSearchType = window.document.createElement(\"div\");\n                                placeSearchType.id = 'placeSearchType'\n                                placeSearchType.className = 'placeSearchType'\n                                let placeSearchType_html = \"\"\n                                for (let placeSearchType_i = 0; placeSearchType_i < this._GaodeMap.placeSearchType.length; placeSearchType_i++) {\n                                    const placeSearchType_item = this._GaodeMap.placeSearchType[placeSearchType_i]\n                                    placeSearchType_html += '<label><input type=\"checkbox\" value=\"'+placeSearchType_item+'\" name=\"placeSearchType\">'+placeSearchType_item+'</label>'\n                                }\n                                placeSearchType.innerHTML = placeSearchType_html\n                                this.placeSearchTypeCheckboxDom = placeSearchType\n                            });\n                    },\n                    /**\n                    * 创建初始化 点击显示面板按钮\n                    */\n                    createOpenSetUpButton() {\n                        const createOpenSetUpDom = (id) => {\n                            let _div = window.document.createElement(\"div\");\n                            _div.id = id\n                            _div.className = id\n                            let html = '<div class=\"icon-view\" onclick=\"gaodePoiVar.openPOIPanel()\"><img src=\"'+this.filePath+'/icon-setup.png\" alt=\"\" /></div>'\n                            _div.innerHTML = html\n                            return _div\n                        }\n            \n                        if (!this._Utils.operationDom('has', this.openSetUpDomId)) {\n                            this._Utils.operationDom(\"append\", 'MainCenter', createOpenSetUpDom(this.openSetUpDomId))\n                        }\n                    },\n                    /**\n                    * 关闭操作面板\n                    */\n                    closePOIPanel() {\n                        document.getElementById(this.openPOIPanelDomId).className = \"POIPanel\";\n                    },\n                    /**\n                    * 打开操作面板\n                    */\n                    openPOIPanel() {\n                        document.getElementById(this.openPOIPanelDomId).className = \"POIPanel active\";\n                    },\n                    /**\n                    * 创建操作面板\n                    */\n                    createPOIPanel({ linkageAddress }) {\n                        /**\n                        * 创建操作面板dom\n                        * @param {*} id \n                        * @returns html\n                        */\n                        const createPOIPanelDom = (id) => {\n                            let _div = window.document.createElement(\"div\");\n                            _div.id = id\n                            _div.className = id\n                            let html = '<div class=\"poiHead\"><div class=\"poiHead-title\">操作面板</div><div class=\"poiHead-close\" onclick=\"gaodePoiVar.closePOIPanel()\">×</div></div>'\n                            html+='<div class=\"poi-operation\">'\n                            html+='<div class=\"poi-tab\">'\n                            html+='<div class=\"poi-tab-item active\" onclick=\"gaodePoiVar.poiTabClick(0)\">兴趣点</div>'\n                            html+='<div class=\"poi-tab-item\" onclick=\"gaodePoiVar.poiTabClick(1)\">路线规划与导航</div>'\n                            html+='</div>'\n                            html+='<div class=\"poi-tab-box active\">'\n                            html+='<div class=\"poi-tab-box-item\">'\n                            html+='<div class=\"poi-form\">'\n                            html+='<div class=\"poi-form-item\">'\n                            html+='<div class=\"poi-form-item-label\">范围：</div>'\n                            html+='<div class=\"poi-form-item-value\">'\n                            html+='<label>'\n                            html+='<input onclick=\"gaodePoiVar.rangeClick(event)\" class=\"radio\" type=\"radio\" name=\"range\" value=\"city\" checked=\"checked\" />城市'\n                            html+='</label>'\n                            html+='<label>'\n                            html+='<input onclick=\"gaodePoiVar.rangeClick(event)\" class=\"radio\" type=\"radio\" name=\"range\" value=\"all\"/>全国'\n                            html+='</label>'\n                            html+='</div>'\n                            html+='</div>'\n                            html+='<div class=\"poi-form-item\" id=\"city-poi-form-item\">'\n                            html+='<div class=\"poi-form-item-label\">城市：</div>'\n                            html+='<div class=\"poi-form-item-value\">'\n                            html+='<div id=\"cityAddress\" class=\"linkageAddress\"></div>'\n                            html+='</div>'\n                            html+='</div>'\n                            html+='<div class=\"poi-form-item\">'\n                            html+='<div class=\"poi-form-item-label\">兴趣点类别：</div>'\n                            html+='<div class=\"poi-form-item-value\" id=\"placeSearchTypeWrap\"></div>'\n                            html+='</div>'\n                            html+='<div class=\"poi-form-item\">'\n                            html+='<div class=\"poi-form-item-label\">是否聚合：</div>'\n                            html+='<div class=\"poi-form-item-value\">'\n                            html+='<div class=\"polymerization\">'\n                            html+='<label>'\n                            html+='<input type=\"radio\" name=\"polymerization\" value=\"0\" checked />否'\n                            html+='</label>'\n                            html+='<label>'\n                            html+='<input type=\"radio\" name=\"polymerization\" value=\"1\" />是'\n                            html+='</label>'\n                            html+='</div>'\n                            html+='</div>'\n                            html+='</div>'\n                            html+='<div class=\"text-search\">'\n                            html+='<input type=\"text\" class=\"search-text\" id=\"search-text\" autocomplete=\"off\" placeholder=\"请输入搜索关键词\"/>'\n                            html+='<button class=\"text-search-button\" onclick=\"gaodePoiVar.get_form_data()\">搜索</button>'\n                            html+='</div>'\n                            html+='</div>'\n                            html+='</div>'\n                            html+='</div>'\n                            html+='<div class=\"poi-tab-box\">'\n                            html+='<div class=\"poi-tab-box-item\">'\n                            html+='<div class=\"poi-form\">'\n                            html+='<div class=\"poi-form-item\">'\n                            html+='<div class=\"poi-form-item-label\">起始位置：</div>'\n                            html+='<div class=\"poi-form-item-value\">'\n                            html+='<input type=\"text\" class=\"poiInput\" id=\"startPosition\" autocomplete=\"off\" placeholder=\"搜索起始位置\"/>'\n                            html+='</div>'\n                            html+='</div>'\n                            html+='<div class=\"poi-form-item\">'\n                            html+='<div class=\"poi-form-item-label\">终点位置：</div>'\n                            html+='<div class=\"poi-form-item-value\">'\n                            html+='<input type=\"text\" class=\"poiInput\" id=\"endPosition\" autocomplete=\"off\" placeholder=\"搜索终点位置\"/>'\n                            html+='</div>'\n                            html+='</div>'\n                            html+='<div class=\"poi-form-item\">'\n                            html+='<div class=\"poi-form-item-label\">类型：</div>'\n                            html+='<div class=\"poi-form-item-value\">'\n                            html+='<div class=\"navigationType\">'\n                            html+='<label>'\n                            html+='<input type=\"radio\" name=\"navigationType\" value=\"1\"  />驾车'\n                            html+='</label>'\n                            html+='<label>'\n                            html+='<input type=\"radio\" name=\"navigationType\" value=\"2\" />公交'\n                            html+='</label>'\n                            html+='<label>'\n                            html+='<input type=\"radio\" name=\"navigationType\" value=\"3\"  />骑行'\n                            html+='</label>'\n                            html+='<label>'\n                            html+='<input type=\"radio\" name=\"navigationType\" value=\"4\" />步行'\n                            html+='</label>'\n                            html+='<button class=\"search-button\" onclick=\"gaodePoiVar.get_form_data()\">搜索</button>'\n                            html+='</div>'\n                            html+='</div>'\n                            html+='</div>'\n                            html+='</div>'\n                            html+='</div>'\n                            html+='</div>'\n                            html+='</div>'\n                            html+='<div class=\"poi-main active\">'\n                            html+='<div class=\"data-view\" id=\"data-view\"></div>'\n                            html+='<div id=\"pagination-view\" class=\"pagination-view\"></div>'\n                            html+='</div>'\n                            html+='<div class=\"poi-main\" id=\"panel\">'\n                            html+='</div>'\n                            _div.innerHTML = html\n                            return _div\n                        }\n                        if (!this._Utils.operationDom('has', this.openPOIPanelDomId)) {\n                            this._Utils.operationDom(\"append\", 'MainCenter', createPOIPanelDom(this.openPOIPanelDomId))\n                        }\n                        const cityAddress = document.getElementById(\"cityAddress\")\n                        cityAddress.appendChild(linkageAddress.province)\n                        cityAddress.appendChild(linkageAddress.city)\n                        document.getElementById(\"placeSearchTypeWrap\").appendChild(this.placeSearchTypeCheckboxDom)\n                    },\n            \n                    /**\n                    * 操作面板切换操作功能\n                    * @param {*} index\n                    */\n                    poiTabClick(index) {\n                        this.tabIndex = Number(index)\n                        const POIPanel = document.querySelector('#POIPanel')\n                        const poiHeadTabItem = POIPanel.querySelectorAll('.poi-tab-item');\n                        const poiTabBox = POIPanel.querySelectorAll('.poi-tab-box');\n                        const poiMain = POIPanel.querySelectorAll('.poi-main');\n                        for (let i = 0; i < poiHeadTabItem.length; i++) {\n                            poiHeadTabItem[i].className = \"poi-tab-item\"\n                            poiTabBox[i].className = \"poi-tab-box\"\n                            poiMain[i].className = \"poi-main\"\n                        }\n                        poiHeadTabItem[index].className = \"poi-tab-item active\"\n                        poiTabBox[index].className = \"poi-tab-box active\"\n                        poiMain[index].className = \"poi-main active \" + \"poi-main\" + index\n                    },\n                    /**\n                    * 联动菜单组件触发\n                    * @param {*} event \n                    * @param {*} type province/省 city/市\n                    */\n                    linkageAddressTrigger(event, type) {\n                        const e = {\n                            label: event.target.dataset.label,\n                            value: event.target.dataset.value\n                        }\n                        //省触发\n                        if (type == \"province\") {\n                            const province = document.getElementById(\"linkageAddress-province\")\n                            const p = province.getElementsByTagName(\"p\")\n                            p[0].innerHTML = e.label + '<span>&or;</span>'\n            \n                            const city = document.getElementById(\"linkageAddress-city\")\n                            city.className = 'linkageAddress-city linkageAddress-input'\n                            const ul = city.getElementsByTagName(\"ul\")[0]\n                            ul.innerHTML = \"\"\n                            this.cityCode = \"\"\n                            const city_p = city.getElementsByTagName(\"p\")\n                            city_p[0].innerHTML = '请选择市<span>&or;</span>'\n                            const f_data = this.districtList.filter(item => item.adcode == e.value)\n                            if (f_data.length == 0) return\n            \n                            let city_li_html = \"\"\n                            for (let city_i = 0; city_i < f_data[0].districtList.length; city_i++) {\n                                const city_item = f_data[0].districtList[city_i]\n                                city_li_html += '<li onclick=\"gaodePoiVar.linkageAddressTrigger('+event+','+'city'+')\" data-value=\"'+city_item.adcode+'\" data-label=\"'+city_item.name+'\">'+city_item.name+'</li>'\n                            }\n                            ul.innerHTML = city_li_html\n                        }\n            \n                        //市触发\n                        if (type == \"city\") {\n                            const city = document.getElementById(\"linkageAddress-city\")\n                            const p = city.getElementsByTagName(\"p\")\n                            p[0].innerHTML = e.label + '<span>&or;</span>'\n                            this.cityCode = e.value\n                        }\n                    },\n            \n                    /**\n                    * 范围触发\n                    * @param {*} event \n                    */\n                    rangeClick(event) {\n                        const cityForm = document.getElementById(\"city-poi-form-item\")\n                        if (event.target.defaultValue == \"all\") {\n                            cityForm.style.display = \"none\"\n                        }\n                        if (event.target.defaultValue == \"city\") {\n                            cityForm.style.display = \"flex\"\n                        }\n                    },\n            \n                    /**\n                    * 操作分页\n                    */\n                    setPagination() {\n                        layui.use('laypage', () => {\n                            var laypage = layui.laypage;\n                            //执行一个laypage实例\n                            laypage.render({\n                                elem: 'pagination-view',\n                                count: this.total,//数据总数，从服务端得到\n                                limit: this.pageSize,\n                                curr: this.pageIndex,\n                                jump: (obj, first) => {\n                                    //obj包含了当前分页的所有参数，比如：\n                                    // console.log(obj.curr); //得到当前页，以便向服务端请求对应页的数据。\n                                    // console.log(obj.limit); //得到每页显示的条数\n                                    //首次不执行\n                                    if (!first) {\n                                        this.pageIndex = obj.curr\n                                        this.get_form_data()\n                                    }\n                                }\n                            });\n                        });\n                    },\n            \n                    /**\n                    * 渲染视图\n                    */\n                    setView() {\n                        const dataView = document.getElementById(\"data-view\")\n                        dataView.innerHTML = \"\"\n                        let _div = window.document.createElement(\"div\");\n                        _div.className = \"data-view-box\"\n                        let html = \"\"\n                        let image = \"\"\n                        for (let i = 0; i < this.poisList.length; i++) {\n                            const item = this.poisList[i]\n                            if (item.photos.length != 0) {\n                                image = '<img src=\"'+item.photos[0].url+'\"/>'\n                            } else {\n                                image = '<div class=\"imageError\">error</div>'\n                            }\n                            html+='<div class=\"data-view-item\" onclick='gaodePoiVar.setFlyTo(\"'+item.id+'\")'>'\n                            html+='<div class=\"data-view-item-image\">' + image + '</div>'\n                            html+='<div class=\"data-view-item-text\">'\n                            html+='<h3>'+item.name+'</h3>'\n                            html+='<p>电话：'+item.tel+'</p>'\n                            html+='<p>类目：'+item.type+'</p>'\n                            html+='<p>地址：'+item.pname+item.cityname+item.adname+item.address+'</p>'\n                            html+='</div>'\n                            html+='</div>'\n                        }\n                        _div.innerHTML = html\n                        dataView.appendChild(_div)\n                    },\n            \n                    /**\n                    * 渲染点位\n                    */\n                    setPoint() {\n                        const _this = this\n                        async function setPointPosition(data) {\n                            viewer.entities.removeAll();\n                            //实体数据\n                            const EntityArr = [];\n                            //是否聚合\n                            const polymerization = data.polymerization;\n                            //json数据\n                            const arr = data.data;\n                            //geojson 数据\n                            return await new Promise((resolve, reject) => {\n                                if (polymerization) {\n                                    const _getJson = GeoJSON.parse(arr, {\n                                        Point: [\"location.lat\", \"location.lng\"],\n                                    });\n                                    new Cesium.GeoJsonDataSource().load(_getJson).then((dataSource) => {\n                                        viewer.dataSources.add(dataSource);\n                                        // 设置聚合参数\n                                        dataSource.clustering.enabled = true;\n                                        dataSource.clustering.pixelRange = 60;\n                                        dataSource.clustering.minimumClusterSize = 2;\n            \n                                        // foreach用于调用数组的每个元素，并将元素传递给回调函数。\n                                        for (let i = 0; i < dataSource.entities.values.length; i++) {\n                                            const entity = dataSource.entities.values[i];\n                                            // 将点拉伸一定高度，防止被地形压盖\n                                            entity.position._value.z += 50.0;\n                                            // 使用大小为64*64的icon，缩小展示poi\n                                            entity.billboard = {\n                                                image:\n                                                    _this.filePath + \"/position.png\",\n                                                width: 16,\n                                                height: 22,\n                                            };\n                                            //⽂字标签\n                                            entity.label = {\n                                                text: entity.properties.name._value,\n                                                font: \"500 30px Helvetica\", // 15pt monospace\n                                                scale: 0.5,\n                                                style: Cesium.LabelStyle.FILL_AND_OUTLINE,\n                                                fillColor: Cesium.Color.WHITE,\n                                                pixelOffset: new Cesium.Cartesian2(-8, -50), //偏移量\n                                                showBackground: false,\n                                                heightReference: Cesium.HeightReference.CLAMP_TO_GROUND,\n                                                distanceDisplayCondition: new Cesium.DistanceDisplayCondition(\n                                                    0.0,\n                                                    20000.0\n                                                ),\n                                            };\n                                            EntityArr.push(entity);\n                                        }\n            \n                                        // 添加监听函数\n                                        dataSource.clustering.clusterEvent.addEventListener(\n                                            (clusteredEntities, cluster) => {\n                                                // 关闭自带的显示聚合数量的标签\n                                                cluster.label.show = false;\n                                                cluster.billboard.show = true;\n                                                cluster.billboard.verticalOrigin = Cesium.VerticalOrigin.BOTTOM;\n            \n                                                // 根据聚合数量的多少设置不同层级的图片以及大小\n                                                if (clusteredEntities.length >= 20) {\n                                                    cluster.billboard.image = _this._Canvas.combineIconAndLabel({\n                                                        url:\n                                                            _this.filePath + \"/cluster_4.png\",\n                                                        label: clusteredEntities.length,\n                                                        size: 72,\n                                                    });\n                                                    cluster.billboard.width = 72;\n                                                    cluster.billboard.height = 72;\n                                                } else if (clusteredEntities.length >= 12) {\n                                                    cluster.billboard.image = _this._Canvas.combineIconAndLabel({\n                                                        url:\n                                                            _this.filePath + \"/cluster_3.png\",\n                                                        label: clusteredEntities.length,\n                                                        size: 56,\n                                                    });\n                                                    cluster.billboard.width = 56;\n                                                    cluster.billboard.height = 56;\n                                                } else if (clusteredEntities.length >= 8) {\n                                                    cluster.billboard.image = _this._Canvas.combineIconAndLabel({\n                                                        url:\n                                                            _this.filePath + \"/cluster_2.png\",\n                                                        label: clusteredEntities.length,\n                                                        size: 48,\n                                                    });\n                                                    cluster.billboard.width = 48;\n                                                    cluster.billboard.height = 48;\n                                                } else {\n                                                    cluster.billboard.image = _this._Canvas.combineIconAndLabel({\n                                                        url:\n                                                            _this.filePath + \"/cluster_1.png\",\n                                                        label: clusteredEntities.length,\n                                                        size: 40,\n                                                    });\n                                                    cluster.billboard.width = 40;\n                                                    cluster.billboard.height = 40;\n                                                }\n                                            }\n                                        );\n                                    });\n                                    setTimeout(() => {\n                                        resolve(EntityArr)\n                                    }, 1000)\n                                    // return await EntityArr;\n                                } else {\n                                    for (let i = 0; i < arr.length; i++) {\n                                        const item = arr[i];\n                                        //坐标系转换\n                                        const result = gcoord.transform(\n                                            [item.location.lng, item.location.lat], // 经纬度坐标\n                                            gcoord.AMap, // 当前坐标系\n                                            gcoord.WGS84 // 目标坐标系\n                                        );\n                                        const _Entity_ = _this._Entity.createBillboard({\n                                            id: item.id,\n                                            name: item.name,\n                                            position: Cesium.Cartesian3.fromDegrees(result[0], result[1]),\n                                            common: {\n                                                label: {\n                                                    //⽂字标签\n                                                    text: item.name,\n                                                    font: \"500 30px Helvetica\", // 15pt monospace\n                                                    scale: 0.5,\n                                                    style: Cesium.LabelStyle.FILL_AND_OUTLINE,\n                                                    fillColor: Cesium.Color.WHITE,\n                                                    pixelOffset: new Cesium.Cartesian2(-8, -50), //偏移量\n                                                    showBackground: false,\n                                                    heightReference: Cesium.HeightReference.CLAMP_TO_GROUND,\n                                                    distanceDisplayCondition: new Cesium.DistanceDisplayCondition(\n                                                        0.0,\n                                                        20000.0\n                                                    ),\n                                                },\n                                            },\n                                            image:\n                                                _this.filePath + \"/position.png\",\n                                            verticalOrigin: Cesium.VerticalOrigin.BOTTOM,\n                                            heightReference: Cesium.HeightReference.CLAMP_TO_GROUND,\n                                            width: 16,\n                                            height: 22,\n                                        });\n                                        EntityArr.push(_Entity_);\n                                    }\n                                    setTimeout(() => {\n                                        resolve(EntityArr)\n                                    }, 1000)\n                                    // return await EntityArr;\n                                }\n                            });\n                        }\n            \n                        setPointPosition({\n                            polymerization: this.getPolymerization(),\n                            data: this.poisList,\n                        }).then((res) => {\n                            this.poisEntityArr = res;\n                            viewer.flyTo(res);\n                        });\n                    },\n                    /**\n                    * 触发单条 视图定位\n                    * @param {*} id \n                    */\n                    setFlyTo(id) {\n                        this.poisEntityArr.map(item => {\n                            if (item.id == id) {\n                                viewer.flyTo(item);\n                            }\n                        })\n                    },\n                    /**\n                    * 是否聚合\n                    */\n                    getPolymerization() {\n                        const arr = [...document.querySelectorAll('input[type=radio][name=polymerization]')]\n                        let data = false\n                        arr.map(item => {\n                            if (item.checked) {\n                                if (item.defaultValue === \"0\") {\n                                    data = false\n                                } else {\n                                    data = true\n                                }\n                            }\n                        })\n                        return data\n                    },\n            \n                    /**\n                    * 初始化路线规划和导航的表单筛选\n                    */\n                    initAutoComplete() {\n                        //搜素组件\n                        this._GaodeMap\n                            .AutoComplete({\n                                input: \"startPosition\",\n                            })\n                            .then((res) => {\n                                res.on(\"select\", (result) => {\n                                    if (!result.poi.location) {\n                                        layer.msg('输入的地址有误，请重新输入', { icon: 5 });\n                                        return;\n                                    }\n                                    this.startPositionResult = result;\n                                });\n                            });\n            \n                        this._GaodeMap\n                            .AutoComplete({\n                                input: \"endPosition\",\n                            })\n                            .then((res) => {\n                                res.on(\"select\", (result) => {\n                                    if (!result.poi.location) {\n                                        layer.msg('输入的地址有误，请重新输入', { icon: 5 });\n                                        return;\n                                    }\n                                    this.endPositionResult = result;\n                                });\n                            });\n                    },\n                    /**\n                    * 绘制起点和终点广告牌\n                    * @param {Array} start\n                    * @param {Array} end\n                    */\n                    setStartAndEndPosition(start, end) {\n                        this._Entity.createBillboard({\n                            id: uuid4(),\n                            position: Cesium.Cartesian3.fromDegrees(start[0], start[1]),\n                            image: \"../landstar/js/LS-cesium-common/Map/Gaode/diricon/image/start.png\",\n                            verticalOrigin: Cesium.VerticalOrigin.BOTTOM,\n                            heightReference: Cesium.HeightReference.CLAMP_TO_GROUND,\n                            width: 23,\n                            height: 35,\n                        });\n                        this._Entity.createBillboard({\n                            id: uuid4(),\n                            position: Cesium.Cartesian3.fromDegrees(end[0], end[1]),\n                            image: \"../landstar/js/LS-cesium-common/Map/Gaode/diricon/image/end.png\",\n                            verticalOrigin: Cesium.VerticalOrigin.BOTTOM,\n                            heightReference: Cesium.HeightReference.CLAMP_TO_GROUND,\n                            width: 23,\n                            height: 35,\n                        });\n                    },\n                    /**\n                    * 坐标转换\n                    */\n                    gcoordTransform(position) {\n                        const result = gcoord.transform(\n                            position, // 经纬度坐标\n                            gcoord.AMap, // 当前坐标系\n                            gcoord.WGS84 // 目标坐标系\n                        );\n                        return result;\n                    },\n                    /**\n                    * 绘制路线\n                    * @param {*} arr \n                    * @param {*} style \n                    */\n                    setDrawRoute(arr, style) {\n                        viewer.entities.removeAll();\n                        if (viewer.terrainProvider.availability) {\n                            viewer.terrainProvider = new Cesium.EllipsoidTerrainProvider({});//关闭地形\n                            viewer.scene.globe.depthTestAgainstTerrain = false;//是否检查深度\n                        }\n                        let color = \"\";\n                        if (style == \"driving\") {\n                            color = \"#409EFF\";\n                        }\n                        if (style == \"riding\") {\n                            color = \"#67C23A\";\n                        }\n                        if (style == \"walking\") {\n                            color = \"#E6A23C\";\n                        }\n            \n                        const arrData = [];\n                        arr.map((item) => {\n                            const result = this.gcoordTransform([item[0], item[1]]);\n                            arrData.push(result[0], result[1]);\n                        });\n                        this.setStartAndEndPosition(\n                            [arrData[0], arrData[1]],\n                            [arrData[arrData.length - 2], arrData[arrData.length - 1]]\n                        );\n            \n                        const Route = this._Entity.createPolyline({\n                            positions: Cesium.Cartesian3.fromDegreesArray(arrData),\n                            material: new Cesium.Color.fromCssColorString(color),\n                            arcType: Cesium.ArcType.GEODESIC,\n                            width: 10,\n                        });\n            \n                        viewer.flyTo(Route);\n                    },\n                    /**\n                    * 处理路线数据\n                    * @param {Array} arr 数据\n                    * @param {Number} index 索引\n                    * @param {String} key 根据数据自定义key名称\n                    */\n                    handleRoutes(arr, index = 0, key) {\n                        let routeLocationArr = [];\n                        const steps = arr[index][key];\n                        const len = steps.length;\n            \n                        for (let i = 0; i < len; i++) {\n                            const item = steps[i];\n                            if (item.path.length != 0) {\n                                for (let j = 0; j < item.path.length; j++) {\n                                    routeLocationArr.push([item.path[j].lng, item.path[j].lat]);\n                                }\n                            } else {\n                                routeLocationArr.push([\n                                    item.start_location.lng,\n                                    item.start_location.lat,\n                                ]);\n                            }\n                        }\n                        return routeLocationArr\n                    },\n                    /**\n                    * 获取表单数据\n                    */\n                    get_form_data() {\n                        viewer.entities.removeAll();\n                        //获取复选框\n                        function getAllCheckbox() {\n                            const arr = [...document.querySelectorAll('input[type=checkbox][name=placeSearchType]')]\n                            let arrData = []\n                            arr.map(item => {\n                                if (item.checked) {\n                                    arrData.push(item.defaultValue)\n                                }\n                            })\n                            return arrData.join(\"|\")\n                        }\n            \n                        //全国/城市\n                        function getRange() {\n                            const arr = [...document.querySelectorAll('input[type=radio][name=range]')]\n                            let data = \"\"\n                            arr.map(item => {\n                                if (item.checked) {\n                                    data = item.defaultValue\n                                }\n                            })\n                            return data\n                        }\n                        //0=兴趣点 \n                        if (this.tabIndex == 0) {\n                            const data = {\n                                range: getRange(),//范围 all=全国 city=城市\n                                cityCode: this.cityCode, //选择的城市code\n                                placeSearchType: getAllCheckbox(),//兴趣点复选\n                                polymerization: this.getPolymerization(),//是否启动聚合\n                                searchText: document.getElementById(\"search-text\").value//检索关键词\n                            }\n            \n                            if (data.range == \"city\") {\n                                if (data.cityCode == \"\") {\n                                    layer.msg('请选择城市', { icon: 5 });\n                                    return\n                                }\n                            }\n                            if (data.placeSearchType == \"\") {\n                                layer.msg('请选择兴趣点', { icon: 5 });\n                                return\n                            }\n                            if (data.searchText == \"\") {\n                                layer.msg('请输入搜索关键词', { icon: 5 });\n                                return\n                            }\n                            let placeSearchData = {\n                                pageSize: this.pageSize,\n                                pageIndex: this.pageIndex,\n                                searchKeyword: data.searchText,\n                                extensions: \"all\",\n                            };\n                            if (data.range == \"city\") {\n                                placeSearchData.city = data.cityCode || \"\";\n                            }\n                            if (data.searchType != \"\") {\n                                placeSearchData.type = data.placeSearchType;\n                            }\n                            // console.log(placeSearchData)\n                            this._GaodeMap\n                                .placeSearch(placeSearchData)\n                                .then((res) => {\n                                    console.log(res)\n                                    this.total = res.count;\n                                    this.poisList = res.pois;\n                                    document.getElementById(\"data-view\").scrollTop = 0\n                                    //操作分页\n                                    this.setPagination()\n                                    //渲染视图\n                                    this.setView()\n                                    //渲染散点\n                                    this.setPoint()\n                                })\n                        }\n                        // 1=路线规划与导航\n                        if (this.tabIndex == 1) {\n                            document.getElementById(\"panel\").innerHTML = \"\";\n                            /**\n                            * 获取类型\n                            * @returns \n                            */\n                            function getNavigationType() {\n                                const arr = [...document.querySelectorAll('input[type=radio][name=navigationType]')]\n                                let data = \"\"\n                                arr.map(item => {\n                                    if (item.checked) {\n                                        data = item.defaultValue\n                                    }\n                                })\n                                return data\n                            }\n                            if (JSON.stringify(this.startPositionResult) == \"{}\") {\n                                layer.msg('请输入选择起始位置', { icon: 5 });\n                                return\n                            }\n                            if (JSON.stringify(this.endPositionResult) == \"{}\") {\n                                layer.msg('请输入选择终点位置', { icon: 5 });\n                                return\n                            }\n                            const navigationType = getNavigationType()\n                            if (navigationType == \"\") {\n                                layer.msg('请选择类型', { icon: 5 });\n                                return\n                            }\n            \n                            const start = [\n                                this.startPositionResult.poi.location.lng,\n                                this.startPositionResult.poi.location.lat,\n                            ];\n                            const end = [\n                                this.endPositionResult.poi.location.lng,\n                                this.endPositionResult.poi.location.lat,\n                            ];\n            \n                            //驾车\n                            if (navigationType == \"1\") {\n                                this._GaodeMap\n                                    .Driving({\n                                        extensions: \"all\",\n                                        policy: 10,\n                                        start,\n                                        end,\n                                    })\n                                    .then((res) => {\n                                        this.drivingData = res.routes;\n                                        if (res.routes.length != 0) {\n                                            this.setDrawRoute(this.handleRoutes(res.routes, 0, \"steps\"), \"driving\");\n                                            this.createDrivingSteps(res.routes, 'steps', 'driving')\n                                        }\n                                    });\n                            }\n                            //公交车\n                            if (navigationType == \"2\") {\n                                this._GaodeMap\n                                    .Transfer({\n                                        extensions: \"all\",\n                                        start,\n                                        end,\n                                        city: \"沈阳市\",\n                                    })\n                                    .then((res) => {\n                                        this.transferData = res.plans;\n                                        if (res.plans.length != 0) {\n                                            this.createDrivingSteps(res.plans, \"segments\", 'riding')\n                                        }\n                                    });\n                            }\n                            //骑行\n                            if (navigationType == \"3\") {\n                                this._GaodeMap\n                                    .Riding({\n                                        extensions: \"all\",\n                                        start,\n                                        end,\n                                    })\n                                    .then((res) => {\n                                        this.ridingData = res.routes;\n                                        if (res.routes.length != 0) {\n                                            this.setDrawRoute(this.handleRoutes(res.routes, 0, \"rides\"), \"riding\");\n                                            this.createDrivingSteps(res.routes, \"rides\", 'riding')\n                                        }\n                                    });\n                            }\n                            //步行\n                            if (navigationType == \"4\") {\n                                this._GaodeMap\n                                    .Walking({\n                                        start,\n                                        end,\n                                    })\n                                    .then((res) => {\n                                        this.walkingData = res.routes;\n                                        if (res.routes.length != 0) {\n                                            this.setDrawRoute(this.handleRoutes(res.routes, 0, \"steps\"), \"walking\");\n                                            this.createDrivingSteps(res.routes, \"steps\", 'walking')\n                                        }\n                                    });\n                            }\n            \n                        }\n            \n                    },\n                    /**\n                    * 获取类型\n                    * @returns \n                    */\n                    getNavigationType() {\n                        const arr = [...document.querySelectorAll('input[type=radio][name=navigationType]')]\n                        let data = \"\"\n                        arr.map(item => {\n                            if (item.checked) {\n                                data = item.defaultValue\n                            }\n                        })\n                        return data\n                    },\n                    /**\n                    * 处理折叠路径画线\n                    */\n                    setDrawRouteTwo(e) {\n                        const getNavigationType = this.getNavigationType()\n                        let arr = []\n                        if (getNavigationType == 1) {\n                            arr = this.drivingData\n                        }\n                        if (getNavigationType == 2) {\n                            arr = this.transferData\n                        }\n                        if (getNavigationType == 3) {\n                            arr = this.ridingData\n                        }\n                        if (getNavigationType == 4) {\n                            arr = this.walkingData\n                        }\n            \n                        const { index, type, key } = e;\n                        if (getNavigationType != 2) {\n                            this.setDrawRoute(this.handleRoutes(arr, index, key), type);\n                        }\n            \n                        const collapseItem = document.getElementsByClassName(\"collapse-item\")\n                        for (let i = 0; i < collapseItem.length; i++) {\n                            collapseItem[i].className = \"collapse-item\"\n                        }\n                        collapseItem[index].className = \"collapse-item show\"\n                    },\n                    /**\n                    * 转换\n                    */\n                    transform: {\n                        /**\n                        * 秒转时间\n                        * @param {Number} second 秒\n                        */\n                        secondToTime(second) {\n                            let days = Math.floor(second / 86400);\n                            let hours = Math.floor((second % 86400) / 3600);\n                            let minutes = Math.floor(((second % 86400) % 3600) / 60);\n                            if (days) {\n                                return days + \"天\" + hours + \"小时\" + minutes + \"分钟\";\n                            } else if (days || hours) {\n                                return hours + \"小时\" + minutes + \"分钟\";\n                            } else if (days || hours || minutes) {\n                                return minutes + \"分钟\";\n                            }\n                        },\n                        /**\n                        * 米转换公里\n                        * @param {Number} metre 米\n                        */\n                        metreToKilometre(metre) {\n                            return (metre / 1000).toFixed(1);\n                        },\n                        /**\n                        * 字符串转时间\n                        * @param {*} str \n                        */\n                        stringToTime(str) {\n                            return str.replace(/^(.{2})/, \"$1:\");\n                        }\n                    },\n                    /**\n                    * 创建图标\n                    * @param {*} parma \n                    */\n                    crecteIcon(parma) {\n                        this._Diricon = new Diricon()\n                        let value = '', type, bgColor, typeColor\n                        if (parma?.type) {\n                            type = parma.type\n                        }\n                        if (parma?.value) {\n                            value = parma.value\n                        }\n                        if (parma?.bgColor) {\n                            bgColor = parma.bgColor\n                        }\n                        if (parma?.typeColor) {\n                            typeColor = parma.typeColor\n                        }\n                        const _class = this._Diricon.setIcon(type, value, typeColor);\n                        return '<div class=\"gaode-diricon '+_class+'\" style=\"background-color:'+bgColor+'\"></div>'\n                    },\n                    /**\n                    * 设置点击位置相机位置\n                    * @param {*} position \n                    */\n                    setStepsCamera(position) {\n                        viewer.camera.flyTo({\n                            destination: Cesium.Cartesian3.fromDegrees(position[0], position[1], 3000),\n                        });\n                    },\n                    /**\n                    * 公交车站点操作\n                    */\n                    openTransferLeng({ i, j }) {\n                        const collapseItem = document.getElementsByClassName(\"collapse-item\") || []\n                        for (let l = 0; l < collapseItem.length; l++) {\n                            const stepItem = collapseItem[l].getElementsByClassName(\"step-item\") || []\n                            for (let k = 0; k < stepItem.length; k++) {\n                                if (stepItem[k].className == \"step-item Multiple\") {\n                                    let list = stepItem[k].getElementsByClassName('list')[0]\n                                    if (l == i && j == k) {\n                                        list.className = 'list show'\n                                    } else {\n                                        list.className = 'list'\n                                    }\n                                }\n            \n                            }\n                        }\n                    },\n                    /**\n                    * 创建自定义规划面板\n                    * @param {*} arr 数据\n                    * @param {*} key  字段key名称\n                    * @param {*} type 类型 \n                    */\n                    createDrivingSteps(arr, key, type) {\n                        let _div = window.document.createElement(\"div\");\n                        _div.id = \"pathPlanningDriving\"\n                        // _div.className = \"pathPlanning driving\"\n                        let _html = \"\"\n                        const getNavigationType = this.getNavigationType()\n                        if (getNavigationType == 2) {\n                            _div.className = \"pathPlanning transfer\"\n                            /**\n                            * 过滤title使用的 交通工具数据\n                            * @param {*} arr \n                            * @returns \n                            */\n                            function stepFilter(arr) {\n                                const filterArr = arr.filter((item) => item.transit_mode != \"WALK\");\n                                if (filterArr.length != 0) {\n                                    return filterArr;\n                                } else {\n                                    return [];\n                                }\n                            }\n            \n                            for (let i = 0; i < arr.length; i++) {\n                                const item = arr[i]\n                                // console.log(item)\n                                //过滤title使用的 交通工具数据\n                                const step = stepFilter(item.segments)\n                                // console.log(step)\n                                const defaultShow = i == 0 ? 'show' : '';\n            \n                                let stepHtml = \"\"\n                                for (let stepI = 0; stepI < step.length; stepI++) {\n                                    const stepItem = step[stepI]\n                                    const imgURL = stepItem.transit_mode == \"BUS\" ? 'busline.png' : 'subway.png'\n                                    const linesInfo = stepItem.transit.lines[0]\n            \n                                    if (stepI == 0) {\n                                      stepHtml+='<div class=\"head-step-item\">'\n                                      stepHtml+='<div class=\"head-step-block\">'\n                                      stepHtml+='<img src=\"../landstar/js/LS-cesium-common/Map/Gaode/diricon/image/'+imgURL+'\" alt=\"\" />'\n                                      stepHtml+=linesInfo.name\n                                      stepHtml+='</div>'\n                                      stepHtml+='</div>'\n                                    } else {\n                                      stepHtml += '<div class=\"head-step-item\">'\n                                      stepHtml += '<i class=\"iconfont icon-jiantouyou\"></i>'\n                                      stepHtml += '<div class=\"head-step-block\">'\n                                      stepHtml += '<img src=\"../landstar/js/LS-cesium-common/Map/Gaode/diricon/image/'+imgURL+'\" alt=\"\" />'\n                                      stepHtml += linesInfo.name\n                                      stepHtml += '</div>'\n                                      stepHtml += '</div>'\n                                    }\n                                }\n            \n                                let step_html = \"\"\n                                for (let j = 0; j < item[key].length; j++) {\n                                    const stepsItem = item[key][j]\n                                    // console.log(stepsItem)\n                                    if (stepsItem.transit_mode == \"WALK\") {\n                                        step_html += '<div class=\"step-item WALK\"><div class=\"label\">'+stepsItem.instruction+'</div></div>'\n                                    } else {\n                                        let via_stops_html = \"\"\n                                        let via_num = 0\n                                        if (stepsItem.transit_mode != \"WALK\") {\n                                            via_num = stepsItem.transit.via_num\n                                            for (let viaI = 0; viaI < stepsItem.transit.via_num; viaI++) {\n                                                const viaItem = stepsItem.transit.via_stops[viaI]\n                                                via_stops_html += '<li>' + viaItem.name + '</li>'\n                                            }\n                                        }\n                                        const openTransferLengParameter = JSON.stringify({ i, j: j + 1 })\n                                        const stimeText = stepsItem.transit.lines[0].stime.length != 0 ? '上车站 首：'+this.transform.stringToTime(stepsItem.transit.lines[0].stime)+' 末：'+this.transform.stringToTime(stepsItem.transit.lines[0].etime) : \"\"\n                                        const entrance = stepsItem.transit.entrance ? stepsItem.transit.entrance.name : \"\"\n                                        const exit = stepsItem.transit.exit ? stepsItem.transit.exit.name : \"\"\n                                        step_html += '<div class=\"step-item Multiple\">'\n                                        step_html += '<div class=\"spot\"></div>'\n                                        step_html += this.crecteIcon({ type: 'vehicle', value: 'transfer', bgColor: \"#418AEC\" })\n                                        step_html += '<div class=\"multiple-step\">'\n                                        step_html += '<div class=\"multiple-step-head\">'\n                                        step_html += stepsItem.instruction\n                                        step_html += '</div>'\n                                        step_html += '<div class=\"multiple-step-content\">'\n                                        step_html += '<div class=\"multiple-step-content-item\">'\n                                        step_html += '<div class=\"multiple-step-content-item-value\">'\n                                        step_html += stepsItem.transit.on_station.name\n                                        step_html += '</div>'\n                                        step_html += '<div class=\"multiple-step-content-item-label\">'\n                                        step_html += '上车 ' + entrance\n                                        step_html += '</div>'\n                                        step_html += '</div>'\n                                        step_html += '<div class=\"list\">'\n                                        step_html += '<ul>'+via_stops_html+'</ul>'\n                                        step_html += ' </div>'\n                                        step_html += '<div class=\"multiple-step-content-item\">'\n                                        step_html += '<div class=\"multiple-step-content-item-value\">'\n                                        step_html += stepsItem.transit.off_station.name\n                                        step_html += '</div>'\n                                        step_html += '<div class=\"multiple-step-content-item-label\">'\n                                        step_html += '下车 '+exit\n                                        step_html += '</div>'\n                                        step_html += '</div>'\n                                        step_html += '<div class=\"multiple-step-content-item-info\">'\n                                        step_html += '<div class=\"multiple-step-content-item-info-text\">'+stimeText+'</div>'\n                                        step_html += '<div class=\"multiple-step-content-item-info-leng\" onclick='gaodePoiVar.openTransferLeng('+openTransferLengParameter+')'>'\n                                        step_html += '<span>'+Number(via_num + 1)+'站</span>'\n                                        step_html += '<i class=\"iconfont icon-jiantoushang\"></i>'\n                                        step_html += '</div>'\n                                        step_html += '</div>'\n                                        step_html += '</div>'\n                                        step_html += '</div>'\n                                        step_html += '</div>'\n                                    }\n                                }\n                                let step_html_con = '<div class=\"step-main\">'\n                                step_html_con += '<div class=\"step-item\">'\n                                step_html_con += this.crecteIcon({ type: \"text\", value: \"起\" })\n                                step_html_con += '<div class=\"label\">从 '+this.startPositionResult.poi.name+'出发</div>'\n                                step_html_con += '</div>'\n                                step_html_con += step_html\n                                step_html_con += '<div class=\"step-item\">'\n                                step_html_con += this.crecteIcon({ type: \"text\", value: \"终\" })\n                                step_html_con += '<div class=\"label\">到达终点 '+this.endPositionResult.poi.name+'</div>'\n                                step_html_con += '</div>'\n                                step_html_con += '</div>'\n                                const parameter = JSON.stringify({ index: i, type: 'transfer', key: \"\" })\n                                _html += '<div class=\"collapse-item '+defaultShow+'\">'\n                                _html += '<div class=\"collapse-item-head\" onclick='gaodePoiVar.setDrawRouteTwo('+parameter+')'>'\n                                _html += '<div class=\"collapse-item-head-info-view\">'\n                                _html += '<div class=\"head-step-view\">'+stepHtml+'</div>'\n                                _html += '<div class=\"info-view\">'\n                                _html += '<div class=\"info\">'\n                                _html += '<div class=\"info-item\">'\n                                _html += '约'+this.transform.secondToTime(item.time)+'（'+this.transform.metreToKilometre(item.transit_distance)+'）'\n                                _html += '</div>'\n                                _html += '<span>|</span>'\n                                _html += '<div class=\"info-item\">'\n                                _html += '步行'+this.transform.metreToKilometre(item.walking_distance)\n                                _html += '</div>'\n                                _html += '<span>|</span>'\n                                _html += '<div class=\"info-item\" style=\"color: red\">'\n                                _html += item.cost + '元'\n                                _html += '</div>'\n                                _html += '</div>'\n                                _html += '</div>'\n                                _html += '</div>'\n                                _html += '<i class=\"iconfont icon-jiantouyou\"></i>'\n                                _html += '</div>'\n                                _html += '<div class=\"collapse-item-content\">' + step_html_con + '</div>'\n                                _html += '</div>'\n                            }\n                        } else {\n                            for (let i = 0; i < arr.length; i++) {\n                                const item = arr[i]\n            \n                                let step_html = \"\"\n            \n                                let parameter = {}\n                                let crecteIconType = \"\"\n                                if (getNavigationType == 1) {\n                                    parameter = JSON.stringify({ index: i, type: 'driving', key: 'steps' })\n                                    crecteIconType = \"driving\"\n                                    _div.className = \"pathPlanning driving\"\n                                }\n                                if (getNavigationType == 3) {\n                                    parameter = JSON.stringify({ index: i, type: 'riding', key: 'rides' })\n                                    crecteIconType = \"riding\"\n                                    _div.className = \"pathPlanning riding\"\n                                }\n                                if (getNavigationType == 4) {\n                                    parameter = JSON.stringify({ index: i, type: 'walking', key: 'steps' })\n                                    crecteIconType = \"walking\"\n                                    _div.className = \"pathPlanning walking\"\n                                }\n            \n                                for (let j = 0; j < item[key].length; j++) {\n                                    const stepsItem = item[key][j]\n                                    const _position = [stepsItem.start_location.lng, stepsItem.start_location.lat]\n                                    step_html+='<div class=\"step-item\" onclick='gaodePoiVar.setStepsCamera('+JSON.stringify(_position)+')'>'\n                                    step_html+=this.crecteIcon({ type: crecteIconType, value: stepsItem.action })\n                                    step_html+='<div class=\"label\">'+stepsItem.instruction+'</div>'\n                                    step_html+='</div>'\n                                }\n            \n                                const start_position = [this.startPositionResult.poi.location.lng, this.startPositionResult.poi.location.lat];\n                                const end_position = [this.endPositionResult.poi.location.lng, this.endPositionResult.poi.location.lat];\n\n                                let step_html_con = '<div class=\"step-main\">'\n                                step_html_con+='<div class=\"step-item\" onclick='gaodePoiVar.setStepsCamera('+JSON.stringify(start_position)+')'>'\n                                step_html_con+=this.crecteIcon({ type: \"text\", value: \"起\" })\n                                step_html_con+='<div class=\"label\">从 '+this.startPositionResult.poi.name+'出发</div>'\n                                step_html_con+='</div>'\n                                step_html_con+=step_html\n                                step_html_con+='<div class=\"step-item\" onclick='gaodePoiVar.setStepsCamera('+JSON.stringify(end_position)+')'>'\n                                step_html_con+=this.crecteIcon({ type: \"text\", value: \"终\" })\n                                step_html_con+='<div class=\"label\">到达终点 '+this.endPositionResult.poi.name+'</div>'\n                                step_html_con+='</div>'\n                                step_html_con+='</div>'\n                                const defaultShow = i == 0 ? 'show' : '';\n                                html += '<div class=\"collapse-item '+defaultShow+'\">'\n                                html += '<div class=\"collapse-item-head\" onclick='gaodePoiVar.setDrawRouteTwo('+parameter+')'>'\n                                html += '<div class=\"collapse-item-head-info-view\">'\n                                html += '<div class=\"scheme-tag\">方案'+Number(i + 1)+'</div>'\n                                html += '<div class=\"info\">'\n                                html += '<div class=\"info-item\">约 '+this.transform.secondToTime(item.time)+'</div>'\n                                html += '<span>|</span>'\n                                html += '<div class=\"info-item\">'+this.transform.metreToKilometre(item.distance)+'公里</div>'\n                                html += '</div>'\n                                html += '</div>'\n                                html += '<i class=\"iconfont icon-jiantouyou\"></i>'\n                                html += '</div>'\n                                html += '<div class=\"collapse-item-content\">'\n                                html += step_html_con\n                                html += '</div>'\n                                html += '</div>'\n                  }\n              }\n  \n              _div.innerHTML = '<div class=\"collapse-view\">'+_html+'</div>'\n              this._Utils.operationDom(\"append\", 'panel', _div)\n          },\n  \n      }\n  \n      //初始化\n      gaodePoiVar.init()"},{codeLanguage:"css",content:'.openSetUp {\n          width: 40px;\n          height: 40px;\n          border-radius: 50%;\n          position: fixed;\n          right: 20px;\n          bottom: 20px;\n          background-color: #409EFF;\n        \n          cursor: pointer;\n        \n          .icon-view {\n            width: 100%;\n            height: 100%;\n            border-radius: 50%;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n          }\n        \n          img {\n            width: 16px;\n            display: block;\n          }\n        \n          &:hover {\n            opacity: 0.8;\n          }\n        }\n        \n        .POIPanel {\n          width: 500px;\n          height: 100vh;\n          background-color: #fff;\n          box-shadow: 0 8px 10px -5px rgba(0, 0, 0, 0.2), 0 16px 24px 2px rgba(0, 0, 0, 0.14), 0 6px 30px 5px rgba(0, 0, 0, 0.12);\n          position: fixed;\n          top: 0;\n          right: -100%;\n          box-sizing: border-box;\n          padding-top: 60px;\n          display: flex;\n          flex-direction: column;\n          transition: all 0.3s;\n        \n          &.active {\n            right: 0;\n          }\n        \n          .poiHead {\n            padding: 10px 20px;\n            box-sizing: border-box;\n            border-bottom: 1px solid #ccc;\n            display: flex;\n            align-items: center;\n            justify-content: space-between;\n        \n            .poiHead-title {\n              font-size: 16px;\n              font-weight: bold;\n            }\n        \n            .poiHead-close {\n              color: #409EFF;\n              font-size: 20px;\n              cursor: pointer;\n        \n              &:hover {\n                color: #F56C6C;\n              }\n            }\n          }\n        \n          .poi-operation {\n            padding: 0 20px;\n        \n            .poi-tab {\n              height: 40px;\n              display: flex;\n              align-items: center;\n              // border-bottom: 1px solid #ccc;\n              padding: 10px 0;\n        \n              .poi-tab-item {\n                margin-right: 30px;\n                cursor: pointer;\n                color: #303133;\n                font-size: 14px;\n                position: relative;\n                height: 100%;\n                display: flex;\n                align-items: center;\n        \n                &:hover {\n                  color: #409EFF;\n                }\n        \n                &.active {\n                  color: #409EFF;\n        \n                  &::after {\n                    content: "";\n                    display: block;\n                    height: 2px;\n                    width: 100%;\n                    background-color: #409EFF;\n                    position: absolute;\n                    bottom: -10px;\n                    left: 0;\n                  }\n                }\n              }\n            }\n        \n            .poi-tab-box {\n              display: none;\n        \n              &.active {\n                display: block;\n              }\n        \n              .poi-tab-box-item {\n                .poi-form {\n                  padding-top: 10px;\n        \n                  .poi-form-item {\n                    display: flex;\n                    align-items: center;\n                    margin-bottom: 5px;\n        \n                    .poi-form-item-label {\n                      white-space: nowrap;\n                    }\n        \n                    .poi-form-item-value {\n                      flex: 1;\n        \n                      .poiInput {\n                        -webkit-appearance: none;\n                        background-color: #FFF;\n                        background-image: none;\n                        border-radius: 4px;\n                        border: 1px solid #DCDFE6;\n                        -webkit-box-sizing: border-box;\n                        box-sizing: border-box;\n                        color: #606266;\n                        display: inline-block;\n                        font-size: 12px;\n                        height: 28px;\n                        line-height: 28px;\n                        outline: 0;\n                        padding: 0 15px;\n                        -webkit-transition: border-color .2s cubic-bezier(.645, .045, .355, 1);\n                        transition: border-color .2s cubic-bezier(.645, .045, .355, 1);\n                        width: 100%;\n                      }\n        \n                      .navigationType {\n                        display: flex;\n                        align-items: center;\n        \n                        .search-button {\n                          margin-left: auto;\n                          display: inline-block;\n                          line-height: 1;\n                          white-space: nowrap;\n                          cursor: pointer;\n                          border: 1px solid #DCDFE6;\n                          color: #606266;\n                          -webkit-appearance: none;\n                          text-align: center;\n                          -webkit-box-sizing: border-box;\n                          box-sizing: border-box;\n                          outline: 0;\n                          -webkit-transition: .1s;\n                          transition: .1s;\n                          font-weight: 500;\n                          padding: 7px 15px;\n                          font-size: 12px;\n                          border-radius: 3px;\n        \n                          color: #FFF;\n                          background-color: #409EFF;\n                          border-color: #409EFF;\n                        }\n                      }\n                    }\n        \n                    label {\n                      margin-bottom: 0;\n        \n                    }\n                  }\n        \n                  .text-search {\n                    display: flex;\n                    align-items: center;\n        \n                    .search-text {\n                      -webkit-appearance: none;\n                      background-color: #FFF;\n                      background-image: none;\n                      border-radius: 4px;\n                      border: 1px solid #DCDFE6;\n                      -webkit-box-sizing: border-box;\n                      box-sizing: border-box;\n                      color: #606266;\n                      display: inline-block;\n                      font-size: 12px;\n                      height: 28px;\n                      line-height: 28px;\n                      outline: 0;\n                      padding: 0 15px;\n                      -webkit-transition: border-color .2s cubic-bezier(.645, .045, .355, 1);\n                      transition: border-color .2s cubic-bezier(.645, .045, .355, 1);\n                      flex: 1;\n                    }\n        \n                    .text-search-button {\n                      display: inline-block;\n                      line-height: 1;\n                      white-space: nowrap;\n                      cursor: pointer;\n                      border: 1px solid #DCDFE6;\n                      color: #606266;\n                      -webkit-appearance: none;\n                      text-align: center;\n                      -webkit-box-sizing: border-box;\n                      box-sizing: border-box;\n                      outline: 0;\n                      margin: 0;\n                      -webkit-transition: .1s;\n                      transition: .1s;\n                      font-weight: 500;\n                      padding: 7px 15px;\n                      font-size: 12px;\n                      border-radius: 3px;\n        \n                      color: #FFF;\n                      margin-left: 10px;\n                      background-color: #409EFF;\n                      border-color: #409EFF;\n        \n                    }\n                  }\n                }\n              }\n            }\n          }\n        \n          .poi-main {\n            height: calc(100vh - 360px);\n            flex-direction: column;\n            padding-top: 10px;\n            display: none;\n        \n            &.poi-main1 {\n              height: calc(100vh - 260px);\n            }\n        \n            &.active {\n              display: flex;\n            }\n        \n            &#panel {\n              overflow-y: auto;\n            }\n        \n            .data-view {\n              // flex: 1;\n              height: calc(100% - 50px);\n              overflow-y: auto;\n              padding: 0 20px;\n              overflow-x: hidden;\n        \n              .data-view-box {\n                .data-view-item {\n                  height: 120px;\n                  display: flex;\n                  justify-content: space-between;\n                  margin-bottom: 10px;\n                  cursor: pointer;\n        \n                  .data-view-item-image {\n                    height: 120px;\n                    width: 120px;\n                    display: flex;\n                    align-items: center;\n                    justify-content: center;\n                    overflow: hidden;\n                    background-color: #eee;\n        \n                    img {\n                      display: block;\n                      max-width: 100%;\n                      // max-height: 100%;\n                      transition: all 0.6s cubic-bezier(0.34, 1.01, 1, 1);\n                      -webkit-transition: all 0.6s cubic-bezier(0.34, 1.01, 1, 1);\n                      -moz-transition: all 0.6s cubic-bezier(0.34, 1.01, 1, 1);\n                      -ms-transition: all 0.6s cubic-bezier(0.34, 1.01, 1, 1);\n                      -o-transition: all 0.6s cubic-bezier(0.34, 1.01, 1, 1);\n                    }\n                  }\n        \n                  .data-view-item-text {\n                    width: calc(100% - 130px);\n        \n                    h3 {\n                      font-size: 18px;\n                    }\n        \n                    p {\n                      font-size: 12px;\n                    }\n                  }\n        \n                  &:hover {\n                    .data-view-item-image {\n                      img {\n                        transform: scale(1.15);\n                        -webkit-transform: scale(1.15);\n                        -moz-transform: scale(1.15);\n                        -o-transform: scale(1.15);\n                        -ms-transform: scale(1.15);\n                      }\n                    }\n        \n                    .data-view-item-text {\n                      h3 {\n                        color: #409EFF;\n                      }\n                    }\n                  }\n                }\n              }\n            }\n        \n            .pagination-view {\n              height: 50px;\n              display: flex;\n              justify-content: flex-end;\n              padding: 0 20px;\n            }\n          }\n        }\n        \n        \n        .linkageAddress {\n          display: flex;\n          align-items: center;\n        \n          .linkageAddress-input {\n            -webkit-appearance: none;\n            background-color: #fff;\n            background-image: none;\n            border-radius: 4px;\n            border: 1px solid #dcdfe6;\n            box-sizing: border-box;\n            color: #606266;\n            display: inline-block;\n            font-size: inherit;\n            height: 28px;\n            line-height: 28px;\n            outline: none;\n            padding: 0 15px;\n            width: 160px;\n            font-size: 12px;\n            color: #333;\n            cursor: pointer;\n            position: relative;\n            margin: 0 5px;\n        \n            &.disabled {\n              background-color: #f5f7fa;\n              border-color: #e4e7ed;\n              color: #c0c4cc;\n              cursor: not-allowed;\n        \n              input {\n                display: none;\n              }\n            }\n        \n            p {\n              display: flex;\n              align-items: center;\n              justify-content: space-between;\n              color: #666;\n            }\n        \n            ul {\n              height: 180px;\n              overflow-y: auto;\n              position: absolute;\n              top: 30px;\n              left: 0;\n              width: 100%;\n              padding: 6px 0;\n              box-sizing: border-box;\n              list-style-type: none;\n              background: #fff;\n              visibility: hidden;\n              opacity: 0;\n              -webkit-transform: translate3d(0, -20px, 0);\n              transform: translate3d(0, -20px, 0);\n              -webkit-transition: opacity 0.3s ease, visibility 0.3s ease, transform 0.3s ease;\n              transition: opacity 0.3s ease, visibility 0.3s ease, transform 0.3s ease;\n        \n              li {\n                font-size: 14px;\n                padding: 0 20px;\n                position: relative;\n                white-space: nowrap;\n                overflow: hidden;\n                text-overflow: ellipsis;\n                color: #606266;\n                height: 34px;\n                line-height: 34px;\n                box-sizing: border-box;\n                cursor: pointer;\n        \n                &:hover {\n                  background: #F5F7FA;\n                }\n              }\n            }\n        \n            input {\n              position: absolute;\n              top: 0;\n              left: 0;\n              width: 100%;\n              height: 100%;\n              opacity: 0;\n              cursor: pointer;\n        \n              &:focus+ul {\n                -webkit-transform: translate3d(0, 0, 0);\n                transform: translate3d(0, 0, 0);\n                visibility: visible;\n                opacity: 1;\n              }\n            }\n        \n        \n        \n          }\n        }\n        \n        \n        .pathPlanning {\n          height: 100%;\n        \n          .collapse-view {\n            padding: 0 16px;\n            height: 100%;\n        \n            .collapse-item {\n        \n              .collapse-item-head {\n                padding: 15px 0;\n                color: #333;\n                display: flex;\n                align-items: center;\n                justify-content: space-between;\n                border-bottom: 1px solid #ebeef5;\n                font-size: 13px;\n                font-weight: 500;\n                position: relative;\n                cursor: pointer;\n        \n                .collapse-item-head-info-view {\n                  padding-top: 23px;\n        \n                  .scheme-tag {\n                    position: absolute;\n                    top: 0;\n                    left: 0;\n                    font-size: 12px;\n                    height: 23px;\n                    padding: 0 14px;\n                    line-height: 23px;\n                    background: #e0f0ff;\n                    color: #3c3d3f;\n                  }\n        \n                  .info {\n                    display: flex;\n                    align-items: center;\n                    line-height: 1.2;\n                    font-size: 12px;\n                    color: #3c3d3f;\n        \n                    span {\n                      padding: 0 10px;\n                    }\n                  }\n                }\n        \n                .iconfont {\n                  font-size: 13px;\n                  color: #333;\n                }\n        \n                &:hover {\n                  .collapse-item-head-info-view {\n                    .info {\n                      color: #409EFF;\n                    }\n                  }\n        \n                  .iconfont {\n                    color: #409EFF;\n                  }\n                }\n              }\n        \n              .collapse-item-content {\n                padding-bottom: 20px;\n                display: none;\n        \n        \n                .step-item {\n                  min-height: 40px;\n                  display: -webkit-box;\n                  display: -ms-flexbox;\n                  display: flex;\n                  -webkit-box-align: center;\n                  -ms-flex-align: center;\n                  align-items: center;\n                  position: relative;\n        \n                  .label {\n                    -webkit-box-flex: 1;\n                    -ms-flex: 1;\n                    flex: 1;\n                    min-height: 40px;\n                    margin-left: 20px;\n                    border-bottom: 1px solid #eee;\n                    height: 100%;\n                    display: -webkit-box;\n                    display: -ms-flexbox;\n                    display: flex;\n                    -webkit-box-align: center;\n                    -ms-flex-align: center;\n                    align-items: center;\n                    color: #565656;\n                    word-wrap: break-word;\n                    font-weight: 700;\n                    font-size: 14px;\n                    padding: 10px 0 10px 5px;\n                    cursor: pointer;\n                  }\n        \n                  &::after {\n                    content: "";\n                    height: 110%;\n                    width: 4px;\n                    z-index: 9;\n                    background-color: #e5e7e8;\n                    position: absolute;\n                    left: 10px;\n                    top: 0;\n                  }\n        \n                  &:first-child {\n                    .gaode-diricon {\n                      position: relative;\n                      left: 2px;\n                    }\n        \n                    .label {\n                      padding-left: 7px;\n                    }\n        \n                    &::after {\n                      top: 50%;\n                      height: 60%;\n                    }\n                  }\n        \n                  &:last-child {\n                    .gaode-diricon {\n                      position: relative;\n                      left: 2px;\n                    }\n        \n                    .label {\n                      padding-left: 7px;\n                    }\n        \n                    &::after {\n                      top: 0;\n                      height: 60%;\n                    }\n                  }\n                }\n              }\n        \n        \n              &.show {\n                .collapse-item-head {\n                  .collapse-item-head-info-view {\n                    .scheme-tag {\n                      background: #3d93fd;\n                      color: #fff;\n                    }\n                  }\n                }\n        \n                .collapse-item-content {\n                  display: block;\n                }\n              }\n            }\n          }\n        \n          &.transfer {\n            .collapse-view {\n              .collapse-item {\n                .collapse-item-head {\n                  .collapse-item-head-info-view {\n                    padding-top: 0;\n                    flex: 1;\n        \n                    .head-step-view {\n                      display: flex;\n                      flex-wrap: wrap;\n                      margin-bottom: 10px;\n        \n                      .head-step-item {\n                        color: #565656;\n                        font-size: 12px;\n                        font-weight: 400;\n                        display: -webkit-box;\n                        display: -ms-flexbox;\n                        display: flex;\n                        -webkit-box-align: center;\n                        -ms-flex-align: center;\n                        align-items: center;\n                        flex-wrap: wrap;\n        \n                        .iconfont {\n                          margin: 0 5px;\n                          font-size: 12px;\n                        }\n        \n                        .head-step-block {\n                          display: -webkit-box;\n                          display: -ms-flexbox;\n                          display: flex;\n                          -webkit-box-align: center;\n                          -ms-flex-align: center;\n                          align-items: center;\n        \n                          img {\n                            width: 16px;\n                            display: block;\n                            margin-right: 5px;\n                          }\n        \n                        }\n        \n                      }\n                    }\n                  }\n        \n                  &:hover {\n                    .collapse-item-head-info-view {\n                      .head-step-view {\n                        .head-step-item {\n                          .iconfont {\n                            color: #409EFF;\n                          }\n        \n                          .head-step-block {\n                            color: #409EFF;\n                          }\n                        }\n                      }\n                     \n                    }\n                  }\n                }\n        \n                .collapse-item-content {\n                  .step-main {\n                    .step-item {\n                      &.WALK {\n                        .label {\n                          font-weight: 400;\n                          margin-left: 40px;\n                        }\n                      }\n        \n                      &.Multiple {\n                        background-color: rgba(65, 138, 236, .15);\n                        border-radius: 4px;\n        \n                        .spot {\n        \n                          &::after,\n                          &::before {\n                            content: "";\n                            position: absolute;\n                            left: 9px;\n                            width: 6px;\n                            height: 6px;\n                            border-radius: 4px;\n                            background: #fff;\n                            border: 1px solid #418aec;\n                            z-index: 10;\n                          }\n        \n                          &::after {\n                            bottom: 0;\n                          }\n        \n                          &::before {\n                            top: 0;\n                          }\n                        }\n        \n                        .gaode-diricon {\n                          z-index: 10;\n                        }\n        \n                        .multiple-step {\n                          width: calc(100% - 40px);\n                          margin-left: 20px;\n        \n                          .multiple-step-head {\n                            color: #027cff;\n                            font-weight: 700;\n                            font-size: 14px;\n                            padding: 10px 0 10px 5px;\n                            border-bottom: 1px solid #fff;\n                          }\n        \n                          .multiple-step-content {\n                            padding: 5px;\n        \n                            .list {\n                              max-height: 0;\n                              -webkit-transition: max-height .8s linear;\n                              transition: max-height .8s linear;\n                              overflow: hidden;\n        \n                              &.show {\n                                max-height: 300px\n                              }\n        \n                              ul {\n                                list-style: none;\n                                margin: 0;\n                                padding: 0;\n        \n                                li {\n                                  color: grey;\n                                  font-size: 12px;\n                                  margin: 4px 0;\n                                }\n                              }\n                            }\n        \n                            .multiple-step-content-item {\n                              padding: 5px 0;\n                              display: -webkit-box;\n                              display: -ms-flexbox;\n                              display: flex;\n                              -webkit-box-align: center;\n                              -ms-flex-align: center;\n                              align-items: center;\n                              font-size: 12px;\n                              font-weight: 400;\n                              line-height: 1;\n        \n                              .multiple-step-content-item-value {\n                                color: #000;\n                                margin-right: 10px;\n                              }\n        \n                              .multiple-step-content-item-label {\n                                color: #878a8c;\n                              }\n                            }\n        \n                            .multiple-step-content-item-info {\n                              display: -webkit-box;\n                              display: -ms-flexbox;\n                              display: flex;\n                              -webkit-box-align: center;\n                              -ms-flex-align: center;\n                              align-items: center;\n                              -webkit-box-pack: justify;\n                              -ms-flex-pack: justify;\n                              justify-content: space-between;\n        \n                              .multiple-step-content-item-info-text {\n                                font-size: 12px;\n                                color: grey !important;\n                              }\n        \n                              .multiple-step-content-item-info-leng {\n                                font-size: 12px;\n                                color: #0f89f5;\n                                cursor: pointer;\n                                display: -webkit-box;\n                                display: -ms-flexbox;\n                                display: flex;\n                                -webkit-box-align: center;\n                                -ms-flex-align: center;\n                                align-items: center;\n                                position: relative;\n                                top: -20px;\n        \n                                span {\n                                  padding-right: 5px;\n                                }\n        \n                                .iconfont {\n                                  font-size: 12px;\n                                  transition: all .3s ease-in 0s;\n                                  -webkit-transition: all .3s ease-in 0s;\n                                  -moz-transition: all .3s ease-in 0s;\n                                  transform: rotate(180deg);\n                                  -webkit-transform: rotate(180deg);\n                                  -moz-transform: rotate(180deg);\n                                }\n                              }\n                            }\n                          }\n                        }\n                      }\n                    }\n                  }\n                }\n        \n                &.show {\n                  .collapse-item-head {\n                    .collapse-item-head-info-view {\n                      .head-step-view {\n                        .head-step-item {\n                          .iconfont {\n                            color: #409EFF;\n                          }\n        \n                          .head-step-block {\n                            color: #409EFF;\n                          }\n                        }\n                      }\n                      .info-view {\n                        .info {\n                          color: #409EFF;\n                        }\n                      }\n                    }\n                  }\n                }\n              }\n            }\n          }\n        }'}]}],ln=t("896e"),on={name:"PoiQuery",components:{poiPanel:X},data:function(){return{poiPanelShow:!1,viewer:null,_Entity:null,_Canvas:null,handler:null,EntityArr:[],poisClickId:""}},created:function(){this.$store.dispatch("highlight/set_code",sn)},mounted:function(){this.init()},methods:{init:function(){var n=this,e=this.cesium;e.Ion.defaultAccessToken=Object({NODE_ENV:"production",VUE_APP_BASE_API:"/prod-api",VUE_APP_GAODE_KEY_WEB_SERVICE:"181ced609de9d446207b55e549bafcb6",VUE_APP_GAODE_KEY_WEB_TERMINAL:"cb250acd7ee0e7b2049cb93747ae3d44",VUE_APP_PUBLIC_URL:"/cesium-template",VUE_APP_QINIU_URL:"http://re8r7gk9l.hb-bkt.clouddn.com",VUE_APP_SECURITY_JS_CODE:"2a0ce2005352672661417093c485a056",BASE_URL:"/cesium-template/"}).VUE_APP_TOKEN,this.viewer=new e.Viewer("cesiumContainer",{imageryProvider:new e.ArcGisMapServerImageryProvider({url:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer"}),shouldAnimate:!0,infoBox:!1,selectionIndicator:!1}),this.viewer.scene.postProcessStages.fxaa.enabled=!1,this._Entity=new q["a"](e,this.viewer),this._Material=new en["a"](e,this.viewer),this._Canvas=new $["a"](e,this.viewer),this.handler=new e.ScreenSpaceEventHandler(this.viewer.scene.canvas),this.viewer.cesiumWidget.screenSpaceEventHandler.removeInputAction(e.ScreenSpaceEventType.LEFT_DOUBLE_CLICK),this.handler.setInputAction((function(e){var t=n.viewer.scene.pick(e.position);if(t){if(!t.id)return;n.setPoisActive(t.id._id),n.viewer.flyTo(t.id)}}),e.ScreenSpaceEventType.LEFT_CLICK)},poisClick:function(n){var e=nn["a"].transform([n.location.lng,n.location.lat],nn["a"].AMap,nn["a"].WGS84);this.setCamera({location:e,id:n.id})},setPoisActive:function(n){this.poisClickId=n||"";for(var e=0;e<this.EntityArr.length;e++)this.EntityArr[e].id==n?this.EntityArr[e].billboard.image="/cesium-template/Vue/Maps/Gaode/PoiQuery/position-active.png":this.EntityArr[e].billboard.image="/cesium-template/Vue/Maps/Gaode/PoiQuery/position.png"},setStepsCamera:function(n){var e=this.cesium;this.viewer.camera.flyTo({destination:e.Cartesian3.fromDegrees(n.lng,n.lat,3e3)})},setCamera:function(n){var e=this.cesium;this.setPoisActive(n.id||""),this.viewer.camera.flyTo({destination:e.Cartesian3.fromDegrees(n.location[0],n.location[1],3e3)})},load:function(n){var e=this;this.clearEntity(),"pois"==n.type&&this.setPointPosition(n).then((function(n){e.EntityArr=n,e.viewer.flyTo(n)})),"navigation"==n.type&&this.setDrawRoute(n)},gcoordTransform:function(n){var e=nn["a"].transform(n,nn["a"].AMap,nn["a"].WGS84);return e},setStartAndEndPosition:function(n,e){var t=this.cesium;this._Entity.createBillboard({id:Object(ln["a"])(),position:t.Cartesian3.fromDegrees(n[0],n[1]),image:"/cesium-template/Vue/Maps/Gaode/PoiQuery/start.png",verticalOrigin:t.VerticalOrigin.BOTTOM,heightReference:t.HeightReference.CLAMP_TO_GROUND,width:23,height:35}),this._Entity.createBillboard({id:Object(ln["a"])(),position:t.Cartesian3.fromDegrees(e[0],e[1]),image:"/cesium-template/Vue/Maps/Gaode/PoiQuery/end.png",verticalOrigin:t.VerticalOrigin.BOTTOM,heightReference:t.HeightReference.CLAMP_TO_GROUND,width:23,height:35})},setDrawRoute:function(n){var e=this;console.log(n);var t=n.data,i=n.style,a=this.cesium,s="";"driving"==i&&(s="#409EFF"),"riding"==i&&(s="#67C23A"),"walking"==i&&(s="#E6A23C");var l=[];t.map((function(n){var t=e.gcoordTransform([n[0],n[1]]);l.push(t[0],t[1])})),this.setStartAndEndPosition([l[0],l[1]],[l[l.length-2],l[l.length-1]]);var o=this._Entity.createPolyline({positions:a.Cartesian3.fromDegreesArray(l),material:new a.Color.fromCssColorString(s),arcType:a.ArcType.GEODESIC,width:10});this.viewer.flyTo(o)},clearEntity:function(){this.viewer.entities.removeAll()},setPointPosition:function(n){var e=this;return Object(l["a"])(Object(s["a"])().mark((function t(){var i,a,l,o;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=e.cesium,a=[],l=n.polymerization,o=n.data,t.next=6,new Promise((function(n,t){if(l){var s=an.a.parse(o,{Point:["location.lat","location.lng"]});(new i.GeoJsonDataSource).load(s).then((function(n){e.viewer.dataSources.add(n),n.clustering.enabled=!0,n.clustering.pixelRange=60,n.clustering.minimumClusterSize=2;for(var t=0;t<n.entities.values.length;t++){var s=n.entities.values[t];s.position._value.z+=50,s._id=s._properties._id._value;var l="";l=s._id==e.poisClickId?"/cesium-template/Vue/Maps/Gaode/PoiQuery/position-active.png":"/cesium-template/Vue/Maps/Gaode/PoiQuery/position.png",s.billboard={image:l,width:16,height:22,verticalOrigin:i.VerticalOrigin.BOTTOM,heightReference:i.HeightReference.CLAMP_TO_GROUND},s.label={text:s.properties.name._value,font:"500 30px Helvetica",scale:.5,style:i.LabelStyle.FILL_AND_OUTLINE,fillColor:i.Color.WHITE,pixelOffset:new i.Cartesian2(-8,-50),showBackground:!1,heightReference:i.HeightReference.CLAMP_TO_GROUND,distanceDisplayCondition:new i.DistanceDisplayCondition(0,2e4)},a.push(s)}n.clustering.clusterEvent.addEventListener((function(n,t){t.label.show=!1,t.billboard.show=!0,t.billboard.verticalOrigin=i.VerticalOrigin.BOTTOM,n.length>=20?(t.billboard.image=e._Canvas.combineIconAndLabel({url:"/cesium-template/Vue/Maps/Gaode/PoiQuery/cluster_4.png",label:n.length,size:72}),t.billboard.width=72,t.billboard.height=72):n.length>=12?(t.billboard.image=e._Canvas.combineIconAndLabel({url:"/cesium-template/Vue/Maps/Gaode/PoiQuery/cluster_3.png",label:n.length,size:56}),t.billboard.width=56,t.billboard.height=56):n.length>=8?(t.billboard.image=e._Canvas.combineIconAndLabel({url:"/cesium-template/Vue/Maps/Gaode/PoiQuery/cluster_2.png",label:n.length,size:48}),t.billboard.width=48,t.billboard.height=48):(t.billboard.image=e._Canvas.combineIconAndLabel({url:"/cesium-template/Vue/Maps/Gaode/PoiQuery/cluster_1.png",label:n.length,size:40}),t.billboard.width=40,t.billboard.height=40)}))})),setTimeout((function(){n(a)}),1e3)}else{for(var r=0;r<o.length;r++){var c=o[r],p=nn["a"].transform([c.location.lng,c.location.lat],nn["a"].AMap,nn["a"].WGS84),d=e._Entity.createBillboard({id:c.id,name:c.name,position:i.Cartesian3.fromDegrees(p[0],p[1]),common:{label:{text:c.name,font:"500 30px Helvetica",scale:.5,style:i.LabelStyle.FILL_AND_OUTLINE,fillColor:i.Color.WHITE,pixelOffset:new i.Cartesian2(-8,-50),showBackground:!1,heightReference:i.HeightReference.CLAMP_TO_GROUND,distanceDisplayCondition:new i.DistanceDisplayCondition(0,2e4)}},image:"/cesium-template/Vue/Maps/Gaode/PoiQuery/position.png",verticalOrigin:i.VerticalOrigin.BOTTOM,heightReference:i.HeightReference.CLAMP_TO_GROUND,width:16,height:22});a.push(d)}setTimeout((function(){n(a)}),1e3)}}));case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t)})))()}}},rn=on,cn=(t("2f58"),Object(w["a"])(rn,i,a,!1,null,"38fd9076",null));e["default"]=cn.exports},"8c84":function(n,e,t){"use strict";t("3ec9")},9119:function(n,e){n.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAgCAYAAAABtRhCAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyBpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkY1Q0I2N0Q1MjNDRjExRTY4MzYwQTQzQkE4NDFGQzJDIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkY1Q0I2N0Q2MjNDRjExRTY4MzYwQTQzQkE4NDFGQzJDIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6RjVDQjY3RDMyM0NGMTFFNjgzNjBBNDNCQTg0MUZDMkMiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6RjVDQjY3RDQyM0NGMTFFNjgzNjBBNDNCQTg0MUZDMkMiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz633+cyAAABMUlEQVR42mKcOXMmAxKQBuJeILaBsikBT4H4CBAXQ9lgwIKkQAKIzwOxKAN1AMjB4UDsBMR6QPwCJMiEpKAdatlBIDYHYkYKMciMfVAzW2CWIFvoDaUjgPgUFXwIMiMFyvbDZiEbEH+EeZ1K4D7UTDZsFtIFjFo4auGohQNvIQsWsQ9AzE8l8z+OxuGAWmgLxA5kmOkA1Ut0ooEBHiBmJsNCkL6/xFrIj6R4O5mhtgXNPBB4jS9ImWkQdTuwWaiB7BIqApCZZdgsBDUtDIF4JZWaGS+gZhkim8eCpS0ZMaIzPqj1BWqqv4XimcgtMnILb3wA1FhOQ+KD2N+BuIAUC/+TETLOUHovEOdDMU18iBy0ZMchKf2FPqRSCFYS9ZFiBqk+rISWROFQ/kqoGNEAIMAAjzExMPYmt/EAAAAASUVORK5CYII="},bcd4:function(n,e,t){},dd8c:function(n,e,t){"use strict";var i=t("26b6"),a=t("76eb"),s=t("4bb1"),l=t("e143"),o=(t("eb3b"),function(){function n(e,t){Object(s["a"])(this,n),this.Cesium=e,this.viewer=t}return Object(l["a"])(n,[{key:"drawText",value:function(n){var e=n.text,t=document.createElement("canvas"),i=(e+"").length*n.fontSize;t.width=i,t.height=n.fontSize;var a=t.getContext("2d");return a.fillStyle=n.color,a.font="bold "+n.fontSize+"px 微软雅黑",a.textBaseline="hanging",a.fillText(e,0,0),t}},{key:"drawImageText",value:function(){var n=Object(a["a"])(Object(i["a"])().mark((function n(e){return Object(i["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,new Promise((function(n,t){var i,a=document.createElement("img");a.src=e.src,a.onload=function(){i=document.createElement("canvas"),i.height=e.height,i.width=e.width;var t=i.getContext("2d");t.clearRect(0,0,i.width,i.height),t.drawImage(a,0,0),t.font="30px bold 楷体",t.fillStyle="#fff";var s="阳性："+e.data.num;t.fillText(s,(i.width-30*s.length)/2,(i.height+30)/2),n(i)}}));case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n)})));function e(e){return n.apply(this,arguments)}return e}()},{key:"combineIconAndLabel",value:function(n){var e=n.url,t=n.label,i=n.size,a=this.Cesium,s=document.createElement("canvas");s.width=i,s.height=i;var l=s.getContext("2d"),o=new a.Resource.fetchImage(e).then((function(n){try{l.drawImage(n,0,0)}catch(e){console.log(e)}return l.fillStyle=a.Color.WHITE.toCssColorString(),l.font="bold 20px Microsoft YaHei",l.textAlign="center",l.textBaseline="middle",l.fillText(t,i/2,i/2),s}));return o}}]),n}());e["a"]=o},e0f1:function(n,e,t){"use strict";t("fa2b")},f120:function(n,e,t){"use strict";t("ff51")},fa2b:function(n,e,t){},ff51:function(n,e,t){}}]);