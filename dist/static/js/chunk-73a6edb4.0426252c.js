(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-73a6edb4"],{"21b7":function(e,n,t){},"4cef":function(e,n,t){"use strict";var i=t("c15f"),a=t("a35b"),o=function(){function e(n,t){Object(i["a"])(this,e),this.Cesium=n,this.viewer=t}return Object(a["a"])(e,[{key:"create",value:function(e){var n=this.Cesium,t=this.viewer,i=null!==e&&void 0!==e&&e.cesiumName?e.cesiumName:"",a=null!==e&&void 0!==e&&e.source?e.source:"",o=null!==e&&void 0!==e&&e.uniforms?e.uniforms:"";function r(){this._definitionChanged=new n.Event,this._color=void 0,this._colorSubscription=void 0,this.color=null!==e&&void 0!==e&&e.color?e.color:n.Color.BLUE,this.duration=null!==e&&void 0!==e&&e.duration?e.duration:1e3,this.image=null!==e&&void 0!==e&&e.image?e.image:"",this._time=(new Date).getTime()}Object.defineProperties(r.prototype,{isConstant:{get:function(){return!1}},definitionChanged:{get:function(){return this._definitionChanged}},color:n.createPropertyDescriptor("color")});var l="Material".concat(parseInt(1e3*Math.random()));return r.prototype.getType=function(e){return l},r.prototype.getValue=function(e,i){return n.defined(i)||(i={}),i.color=n.Property.getValueOrClonedDefault(this._color,e,n.Color.WHITE,i.color),i.image=this.image,this.duration&&(i.time=((new Date).getTime()-this._time)%this.duration/this.duration),t.scene.requestRender(),i},r.prototype.equals=function(e){return this===e||e instanceof r&&n.Property.equals(this._color,e._color)},n.Material._materialCache.addMaterial(l,{fabric:{type:l,uniforms:o,source:a},translucent:function(e){return!0}}),n[i]=r,r}}]),e}();n["a"]=o},"50ff":function(e,n,t){},8968:function(e,n,t){"use strict";t.r(n);var i=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"container"},[t("div",{attrs:{id:"cesiumContainer"}}),t("el-button",{staticClass:"tools",attrs:{type:"primary",icon:"el-icon-s-tools",circle:""},on:{click:function(n){e.poiPanelShow=!e.poiPanelShow}}}),t("poi-Panel",{attrs:{show:e.poiPanelShow},on:{close:function(n){e.poiPanelShow=!1},load:e.load,poisClick:e.poisClick}})],1)},a=[],o=t("d941"),r=t("c3ae"),l=(t("4390"),t("13b6"),t("30d8"),t("67ad"),function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("el-drawer",{attrs:{title:"操作面板",visible:e.drawer,size:"500px",direction:"rtl","before-close":e.handleClose},on:{"update:visible":function(n){e.drawer=n}}},[t("div",{staticClass:"POI-panel"},[t("el-tabs",{on:{"tab-click":e.tabClick},model:{value:e.panelType,callback:function(n){e.panelType=n},expression:"panelType"}},e._l(e.panelTypeArr,(function(e,n){return t("el-tab-pane",{key:n,attrs:{label:e.label,name:e.value}})})),1),"1"==e.panelType?t("section",{staticClass:"pois"},[t("div",{staticClass:"form-view"},[t("div",{staticClass:"form-item"},[t("div",{staticClass:"form-label"},[e._v("范围：")]),t("div",{staticClass:"form-value"},[t("el-radio-group",{attrs:{size:"mini"},on:{change:e.search},model:{value:e.range,callback:function(n){e.range=n},expression:"range"}},[t("el-radio",{attrs:{label:"city"}},[e._v("城市")]),t("el-radio",{attrs:{label:"all"}},[e._v("全国")])],1)],1)]),t("div",{staticClass:"form-item"},[t("div",{staticClass:"form-label"},[e._v("城市：")]),t("div",{staticClass:"form-value"},[t("el-cascader",{staticStyle:{width:"100%"},attrs:{size:"mini",clearable:"",disabled:"all"==e.range,props:{children:"districtList",label:"name",value:"adcode"},placeholder:"城市选择...",options:e.cityOptions},on:{change:e.search},model:{value:e.city,callback:function(n){e.city=n},expression:"city"}})],1)]),t("div",{staticClass:"form-item multiple"},[t("div",{staticClass:"form-label"},[e._v("兴趣点类别：")]),t("div",{staticClass:"form-value"},[t("el-select",{staticClass:"select",attrs:{size:"mini",multiple:"",placeholder:"请选择兴趣类别（可多选）"},on:{change:e.search},model:{value:e.searchType,callback:function(n){e.searchType=n},expression:"searchType"}},e._l(e.placeSearchType,(function(e){return t("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1)]),t("div",{staticClass:"form-item multiple"},[t("div",{staticClass:"form-label"},[e._v("是否聚合：")]),t("div",{staticClass:"form-value"},[t("el-switch",{attrs:{size:"mini","active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:e.search},model:{value:e.polymerization,callback:function(n){e.polymerization=n},expression:"polymerization"}})],1)]),t("div",{staticClass:"form-item search"},[t("el-input",{attrs:{size:"mini",placeholder:"请输入搜索关键词",clearable:""},on:{change:e.search},model:{value:e.keyword,callback:function(n){e.keyword="string"===typeof n?n.trim():n},expression:"keyword"}}),t("el-button",{staticClass:"button",attrs:{disabled:""==e.keyword,type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.search}},[e._v("搜索")])],1)]),t("div",{staticClass:"main"},[t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"poisList",staticClass:"item-view"},e._l(e.poisList,(function(n,i){return t("div",{key:n.id+i,staticClass:"pois-item",on:{click:function(t){return e.poisClick(n)}}},[t("div",{staticClass:"pois-item-image"},[0!=n.photos.length?t("el-image",{staticClass:"image",attrs:{src:n.photos[0].url,fit:"cover"}},[t("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[t("i",{staticClass:"el-icon-picture-outline"})])]):t("el-image",{staticClass:"image",attrs:{src:"",fit:"cover"}},[t("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[t("i",{staticClass:"el-icon-picture-outline"})])])],1),t("div",{staticClass:"pois-item-text"},[t("h3",[e._v(e._s(n.name))]),t("p",[e._v(" 电话： "),n.tel?[e._v(e._s(n.tel))]:[e._v("-")]],2),t("p",[e._v(" 类目： "+e._s(n.type)+" ")]),t("p",[e._v(" 地址： "+e._s(n.pname)+e._s(n.cityname)+e._s(n.adname)+e._s(n.address)+" ")])])])})),0),t("div",{staticClass:"pagination"},[t("el-pagination",{attrs:{"hide-on-single-page":"",layout:"prev, pager, next",total:e.total,"page-size":e.pageSize,"current-page":e.pageIndex},on:{"current-change":e.currentPaginationChange}})],1)])]):e._e(),"2"==e.panelType?t("section",{staticClass:"navigation"},[t("div",{staticClass:"form-view"},[t("el-form",{ref:"form",attrs:{"label-width":"100px"}},[t("el-form-item",{attrs:{label:"起始位置："}},[t("el-input",{attrs:{size:"mini",placeholder:"请输入起始位置",id:"startPosition"},model:{value:e.startPosition,callback:function(n){e.startPosition="string"===typeof n?n.trim():n},expression:"startPosition"}})],1),t("el-form-item",{attrs:{label:"终点位置："}},[t("el-input",{attrs:{size:"mini",placeholder:"请输入终点位置",id:"endPosition"},model:{value:e.endPosition,callback:function(n){e.endPosition="string"===typeof n?n.trim():n},expression:"endPosition"}})],1),t("el-form-item",{attrs:{label:"类型："}},[t("el-radio-group",{attrs:{disabled:"{}"==JSON.stringify(e.startPositionResult)||"{}"==JSON.stringify(e.endPositionResult),size:"mini"},on:{change:e.navigationTypeChange},model:{value:e.navigationType,callback:function(n){e.navigationType=n},expression:"navigationType"}},e._l(e.navigationTypeArr,(function(n,i){return t("el-radio-button",{key:i,attrs:{label:n.value}},[e._v(e._s(n.label))])})),1)],1)],1)],1),t("div",{staticClass:"steps-view",attrs:{id:"panel"}})]):e._e()],1)])}),s=[],c=(t("31a7"),t("208c"),t("f4d8"),t("129e"),t("c407")),d=t("c15f"),p=t("a35b"),u=(t("9b3f"),t("b772"),function(){function e(n){Object(d["a"])(this,e),this.AMap=n}return Object(p["a"])(e,[{key:"districtList",value:function(e){var n=this.AMap,t={level:null!==e&&void 0!==e&&e.level?e.level:"country",subdistrict:null!==e&&void 0!==e&&e.subdistrict?e.subdistrict:1,showbiz:null===e||void 0===e||!e.showbiz||e.showbiz,extensions:null!==e&&void 0!==e&&e.extensions?e.extensions:"base"},i=null!==e&&void 0!==e&&e.keyword?e.keyword:"中国";return new Promise((function(e,a){n.plugin("AMap.DistrictSearch",(function(){var o=new n.DistrictSearch(t);o.search(i,(function(n,t){"complete"==n?e(t.districtList[0]["districtList"]):a("Error")}))}))}))}},{key:"placeSearchType",get:function(){var e="汽车服务|汽车销售|汽车维修|摩托车服务|餐饮服务|购物服务|生活服务|体育休闲服务|医疗保健服务|住宿服务|风景名胜|商务住宅|政府机构及社会团体|科教文化服务|交通设施服务|金融保险服务|公司企业|道路附属设施|地名地址信息|公共设施";return e.split("|")}},{key:"plugin",get:function(){var e=[{label:"输入提示，根据输入关键字提示匹配信息",value:"Autocomplete"},{label:"地点搜索服务插件，提供某一特定地区的位置查询服务",value:"PlaceSearch"},{label:"行政区查询服务，提供行政区相关信息",value:"DistrictSearch"},{label:"驾车路线规划服务",value:"Driving"},{label:"公交换乘服务",value:"Transfer"},{label:"骑行路线规划服务",value:"Riding"},{label:"步行路线规划服务",value:"Walking"}],n=e.map((function(e){return"AMap.".concat(e.value)}));return n.toString()}},{key:"placeSearch",value:function(e){var n=this.AMap,t={city:null!==e&&void 0!==e&&e.city&&""!=e.city?e.city:"全国",citylimit:!(null===e||void 0===e||!e.citylimit)&&e.citylimit,children:null!==e&&void 0!==e&&e.children?e.children:0,type:null!==e&&void 0!==e&&e.type?e.type:"餐饮服务|商务住宅|生活服务",lang:null!==e&&void 0!==e&&e.lang?e.lang:"zh_cn",pageSize:null!==e&&void 0!==e&&e.pageSize?e.pageSize:10,pageIndex:null!==e&&void 0!==e&&e.pageIndex?e.pageIndex:1,extensions:null!==e&&void 0!==e&&e.extensions?e.extensions:"base",map:null!==e&&void 0!==e&&e.map?e.map:void 0,panel:null!==e&&void 0!==e&&e.panel?e.panel:"",showCover:null===e||void 0===e||!e.showCover||e.showCover,renderStyle:null!==e&&void 0!==e&&e.renderStyle?e.renderStyle:"default",autoFitView:null===e||void 0===e||!e.autoFitView||e.autoFitView},i=null!==e&&void 0!==e&&e.searchKeyword?e.searchKeyword:"",a=new n.PlaceSearch(t);return new Promise((function(e,t){n.plugin("AMap.PlaceSearch",(function(){a.search(i,(function(n,i){"complete"==n?e(i.poiList):t("Error")}))}))}))}},{key:"getDetails",value:function(e){var n=this.AMap,t=new n.PlaceSearch({extensions:"all"});return new Promise((function(n,i){t.getDetails(e,(function(e,t){"complete"===e&&"OK"===t.info?n(t):i("Error")}))}))}},{key:"AutoComplete",value:function(e){var n=this.AMap,t={type:null!==e&&void 0!==e&&e.type?e.type:"",city:null!==e&&void 0!==e&&e.city&&""!=e.city?e.city:"全国",datatype:null!==e&&void 0!==e&&e.datatype?e.datatype:"all",citylimit:!(null===e||void 0===e||!e.citylimit)&&e.citylimit,input:null!==e&&void 0!==e&&e.input?e.input:void 0,output:null!==e&&void 0!==e&&e.output?e.output:void 0,outPutDirAuto:null===e||void 0===e||!e.outPutDirAuto||e.outPutDirAuto};return new Promise((function(e,i){n.plugin("AMap.AutoComplete",(function(){var i=new n.AutoComplete(t);e(i)}))}))}},{key:"Driving",value:function(e){var n=this.AMap,t={map:null!==e&&void 0!==e&&e.map?e.map:void 0,policy:null!==e&&void 0!==e&&e.policy?e.policy:0,extensions:null!==e&&void 0!==e&&e.extensions?e.extensions:"base",ferry:null!==e&&void 0!==e&&e.ferry?e.ferry:0,panel:null!==e&&void 0!==e&&e.panel?e.panel:void 0,hideMarkers:!(null===e||void 0===e||!e.hideMarkers)&&e.hideMarkers,showTraffic:null===e||void 0===e||!e.showTraffic||e.showTraffic,province:null!==e&&void 0!==e&&e.province?e.province:void 0,number:null!==e&&void 0!==e&&e.number?e.number:void 0,isOutline:null!==e&&void 0!==e&&e.isOutline?e.isOutline:void 0,outlineColor:null!==e&&void 0!==e&&e.outlineColor?e.outlineColor:void 0,autoFitView:null!==e&&void 0!==e&&e.autoFitView?e.autoFitView:void 0};return new Promise((function(i,a){n.plugin("AMap.Driving",(function(){var o=new n.Driving(t);o.search(e.start,e.end,(function(e,n){"complete"==e?i(n):a("Error")}))}))}))}},{key:"Transfer",value:function(e){var n=this.AMap,t={map:null!==e&&void 0!==e&&e.map?e.map:void 0,city:null!==e&&void 0!==e&&e.city?e.city:"",policy:null!==e&&void 0!==e&&e.policy?e.policy:0,nightflag:!(null===e||void 0===e||!e.nightflag)&&e.nightflag,extensions:null!==e&&void 0!==e&&e.extensions?e.extensions:"base",panel:null!==e&&void 0!==e&&e.panel?e.panel:"",hideMarkers:!(null===e||void 0===e||!e.hideMarkers)&&e.hideMarkers,isOutline:null!==e&&void 0!==e&&e.isOutline?e.isOutline:void 0,outlineColor:null!==e&&void 0!==e&&e.outlineColor?e.outlineColor:void 0,autoFitView:null!==e&&void 0!==e&&e.autoFitView?e.autoFitView:void 0};return new Promise((function(i,a){n.plugin("AMap.Transfer",(function(){var o=new n.Transfer(t);o.search(e.start,e.end,(function(e,n){"complete"==e?i(n):a("Error")}))}))}))}},{key:"Riding",value:function(e){var n=this.AMap,t={map:null!==e&&void 0!==e&&e.map?e.map:void 0,policy:null!==e&&void 0!==e&&e.policy?e.policy:0,panel:null!==e&&void 0!==e&&e.panel?e.panel:"",hideMarkers:!(null===e||void 0===e||!e.hideMarkers)&&e.hideMarkers,isOutline:null!==e&&void 0!==e&&e.isOutline?e.isOutline:void 0,outlineColor:null!==e&&void 0!==e&&e.outlineColor?e.outlineColor:void 0,autoFitView:null!==e&&void 0!==e&&e.autoFitView?e.autoFitView:void 0};return new Promise((function(i,a){n.plugin("AMap.Riding",(function(){var o=new n.Riding(t);o.search(e.start,e.end,(function(e,n){"complete"==e?i(n):a("Error")}))}))}))}},{key:"Walking",value:function(e){var n=this.AMap,t={map:null!==e&&void 0!==e&&e.map?e.map:void 0,panel:null!==e&&void 0!==e&&e.panel?e.panel:"",hideMarkers:!(null===e||void 0===e||!e.hideMarkers)&&e.hideMarkers,isOutline:null!==e&&void 0!==e&&e.isOutline?e.isOutline:void 0,outlineColor:null!==e&&void 0!==e&&e.outlineColor?e.outlineColor:void 0,autoFitView:null!==e&&void 0!==e&&e.autoFitView?e.autoFitView:void 0};return new Promise((function(i,a){n.plugin("AMap.Walking",(function(){var o=new n.Walking(t);o.search(e.start,e.end,(function(e,n){"complete"==e?i(n):a("Error")}))}))}))}}]),e}()),m=u,h={props:{show:{type:Boolean,default:function(){return!1}},option:{type:Object,default:function(){return{}}}},data:function(){return{drawer:!1,_GaodeMap:null,_Utils:null,loading:!1,panelTypeArr:[{label:"兴趣点",value:"1"},{label:"路线规划与导航",value:"2"}],panelType:"1",range:"city",cityOptions:[],city:["210000","210100"],placeSearchType:[],searchType:["餐饮服务","商务住宅","生活服务"],polymerization:!1,keyword:"",pageIndex:1,pageSize:20,total:0,poisList:[],startPosition:"",endPosition:"",startPositionResult:{},endPositionResult:{},navigationTypeArr:[{label:"驾车",value:"1"},{label:"公交",value:"2"},{label:"骑行",value:"3"},{label:"步行",value:"4"}],navigationType:"",routeLocationArr:[]}},watch:{show:{handler:function(e,n){this.drawer=e,e&&this.initAutoComplete()},deep:!0,immediate:!0}},mounted:function(){var e=this;window._AMapSecurityConfig={securityJsCode:"2a0ce2005352672661417093c485a056"},this._Utils=new c["a"],this._Utils.loadJs("https://webapi.amap.com/maps?v=2.0&key=".concat("cb250acd7ee0e7b2049cb93747ae3d44","&plugin=").concat((new m).plugin),{append:"body",defer:!0}).then((function(){e._GaodeMap=new m(AMap),e.$nextTick((function(){e._GaodeMap.districtList({subdistrict:2}).then((function(n){e.cityOptions=n})),e.placeSearchType=e._GaodeMap.placeSearchType}))}))},methods:{navigationTypeChange:function(e){var n=this;document.getElementById("panel").innerHTML="";var t=[this.startPositionResult.poi.location.lng,this.startPositionResult.poi.location.lat],i=[this.endPositionResult.poi.location.lng,this.endPositionResult.poi.location.lat];"1"==e&&this._GaodeMap.Driving({panel:"panel",start:t,end:i}).then((function(e){if(0!=e.routes.length){for(var t=[],i=e.routes[0].steps,a=i.length,o=0;o<a;o++){var r=i[o];t.push([r.start_location.lng,r.start_location.lat]),a-1==o&&t.push([r.end_location.lng,r.end_location.lat])}n.$emit("load",{type:"navigation",style:"driving",data:t})}})),"2"==e&&this._GaodeMap.Transfer({panel:"panel",start:t,end:i,city:"沈阳市"}).then((function(e){})),"3"==e&&this._GaodeMap.Riding({panel:"panel",start:t,end:i}).then((function(e){if(0!=e.routes.length){for(var t=[],i=e.routes[0].rides,a=i.length,o=0;o<a;o++){var r=i[o];t.push([r.start_location.lng,r.start_location.lat]),a-1==o&&t.push([r.end_location.lng,r.end_location.lat])}n.$emit("load",{type:"navigation",style:"riding",data:t})}})),"4"==e&&this._GaodeMap.Walking({panel:"panel",start:t,end:i}).then((function(e){if(0!=e.routes.length){for(var t=[],i=e.routes[0].steps,a=i.length,o=0;o<a;o++){var r=i[o];t.push([r.start_location.lng,r.start_location.lat]),a-1==o&&t.push([r.end_location.lng,r.end_location.lat])}n.$emit("load",{type:"navigation",style:"walking",data:t})}}))},tabClick:function(e){"2"==e.name&&this.initAutoComplete()},initAutoComplete:function(){var e=this;setTimeout((function(){e._GaodeMap.AutoComplete({input:"startPosition"}).then((function(n){n.on("select",(function(n){n.poi.location?e.startPositionResult=n:e.$notify({title:"警告",message:"输入的地址有误，请重新输入",type:"warning"})}))})),e._GaodeMap.AutoComplete({input:"endPosition"}).then((function(n){n.on("select",(function(n){n.poi.location?e.endPositionResult=n:e.$notify({title:"警告",message:"输入的地址有误，请重新输入",type:"warning"})}))}))}),500)},poisClick:function(e){this.$emit("poisClick",e)},search:function(){var e=this;if(""!=this.keyword)if("city"!=this.range||0!=this.city.length){var n={pageSize:this.pageSize,pageIndex:this.pageIndex,searchKeyword:this.keyword,extensions:"all"};"city"==this.range&&(n.city=this.city[1]||""),0!=this.searchType.length&&(n.type=this.searchType.join("|")),this.loading=!0,this._GaodeMap.placeSearch(n).then((function(n){e.total=n.count,e.poisList=n.pois,e.$nextTick((function(){e.$refs.poisList.scrollTop=0})),e.loading=!1,e.$emit("load",{type:"pois",polymerization:e.polymerization,data:e.poisList})})).catch((function(n){e.$notify.error({title:"错误",message:"请重新搜索"})}))}else this.$message({message:"请选择城市",type:"warning"})},currentPaginationChange:function(e){this.pageIndex=e,this.search()},handleClose:function(){this.$emit("close")}}},g=h,v=(t("aaa7"),t("cba8")),y=Object(v["a"])(g,l,s,!1,null,"ea37cd90",null),f=y.exports,b=t("dd8c"),w=t("9e48"),x=t("f4bf"),_=function(e){var n=function(){return"czm_material czm_getMaterial(czm_materialInput materialInput)\n            {\n                 czm_material material = czm_getDefaultMaterial(materialInput);\n                 vec2 st = materialInput.st;\n                 vec4 colorImage = texture2D(image, vec2(fract(st.s - time), st.t));\n                 material.alpha = colorImage.a * color.a;\n                 material.diffuse = (colorImage.rgb+color.rgb)/2.0;\n                 return material;\n             }"};return{cesiumName:"Material_TrailLineMaterialProperty",image:"/cesium-template/Vue/Entity/wall/flow.png",color:e.Color.RED.withAlpha(.5),duration:15e3,uniforms:{color:new e.Color(1,1,1,1),image:e.Material.DefaultImageId,time:0,constantSpeed:300,depthFailMaterial:!0},source:n()}},C=t("4cef"),P=t("7adc"),M=t.n(P),T=[{codeLanguage:"VUE",relyOn:[{label:"gcoord（npm）",url:"https://www.npmjs.com/package/gcoord",externalLinks:!0},{label:"geojson（npm）",url:"https://www.npmjs.com/package/geojson",externalLinks:!0},{label:"Utils.js",url:"cesium/Utils.js"},{label:"Entity.js",url:"cesium/Entity.js"},{label:"Canvas.js",url:"cesium/Canvas.js"},{label:"Gaode/index.js",url:"cesium/Map/Gaode/index.js"},{label:"Materials/index.js",url:"cesium/Materials/index.js"},{label:"TrailLineMaterialProperty.js",url:"Vue/Maps/Gaode/PoiQuery/material/TrailLineMaterialProperty.js"},{label:"POI-panel.scss",url:"Vue/Maps/Gaode/PoiQuery/POI-panel.scss"},{label:"POI-panel.vue",url:"Vue/Maps/Gaode/PoiQuery/POI-panel.vue"},{label:"position.png",url:"Vue/Maps/Gaode/PoiQuery/position.png"},{label:"position-active.png",url:"Vue/Maps/Gaode/PoiQuery/position-active.png"},{label:"cluster_1.png",url:"Vue/Maps/Gaode/PoiQuery/cluster_1.png"},{label:"cluster_2.png",url:"Vue/Maps/Gaode/PoiQuery/cluster_2.png"},{label:"cluster_3.png",url:"Vue/Maps/Gaode/PoiQuery/cluster_3.png"},{label:"cluster_4.png",url:"Vue/Maps/Gaode/PoiQuery/cluster_4.png"}],code:[{codeLanguage:"html",content:'<template>\n                    <div class="container">\n                      <div id="cesiumContainer"></div>\n                      <el-button\n                        type="primary"\n                        class="tools"\n                        icon="el-icon-s-tools"\n                        circle\n                        @click="poiPanelShow = !poiPanelShow"\n                      ></el-button>\n                      <poi-Panel\n                        :show="poiPanelShow"\n                        @close="poiPanelShow = false"\n                        @load="load"\n                        @poisClick="poisClick"\n                      />\n                    </div>\n                  </template>'},{codeLanguage:"js",content:'import poiPanel from "./module/POI-panel.vue";\n                  import Canvas from "@/common/cesium/Canvas.js";\n                  import Entity from "@/common/cesium/Entity.js";\n                  import gcoord from "gcoord";\n                  import TrailLineMaterialProperty from "./module/material/TrailLineMaterialProperty"; //流动\n                  import Material from "@/common/cesium/Materials/index.js";\n                  import GeoJSON from "geojson";\n                  export default {\n                    name: "PoiQuery",\n                    components: { poiPanel },\n                    data() {\n                      return {\n                        poiPanelShow: false,\n                  \n                        viewer: null,\n                        _Entity: null,\n                        _Canvas: null,\n                  \n                        EntityArr: [],\n                      };\n                    },\n                    mounted() {\n                      this.init();\n                    },\n                    methods: {\n                      init() {\n                        const Cesium = this.cesium;\n                        Cesium.Ion.defaultAccessToken = process.env.VUE_APP_TOKEN;\n                        this.viewer = new Cesium.Viewer("cesiumContainer", {\n                          imageryProvider: new Cesium.ArcGisMapServerImageryProvider({\n                            url: "https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",\n                          }),\n                          terrainProvider: new Cesium.CesiumTerrainProvider({\n                            //加载火星在线地形\n                            url: "http://data.marsgis.cn/terrain",\n                          }),\n                          shouldAnimate: true,\n                          infoBox: false,\n                          selectionIndicator: false,\n                        });\n                        //地形侦测\n                        this.viewer.scene.globe.depthTestAgainstTerrain = false;\n                  \n                        this._Entity = new Entity(Cesium, this.viewer);\n                        this._Material = new Material(Cesium, this.viewer);\n                        this._Canvas = new Canvas(Cesium, this.viewer);\n                      },\n                      /**\n                       * 兴趣点触发\n                       * @param {*} e\n                       */\n                      poisClick(e) {\n                        //坐标系转换\n                        const result = gcoord.transform(\n                          [e.location.lng, e.location.lat], // 经纬度坐标\n                          gcoord.AMap, // 当前坐标系\n                          gcoord.WGS84 // 目标坐标系\n                        );\n                        this.setCamera({\n                          location: result,\n                        });\n                      },\n                      /**\n                       * 设置相机位置\n                       * @param {*} e\n                       */\n                      setCamera(e) {\n                        const Cesium = this.cesium;\n                        this.viewer.camera.flyTo({\n                          destination: Cesium.Cartesian3.fromDegrees(\n                            e.location[0],\n                            e.location[1],\n                            3000\n                          ),\n                        });\n                      },\n                      /**\n                       * 操作面板加载回调\n                       */\n                      load(e) {\n                        this.viewer.entities.removeAll();\n                        if (e.type == "pois") {\n                          this.setPointPosition(e).then((res) => {\n                            this.EntityArr = res;\n                            this.viewer.flyTo(res);\n                          });\n                        }\n                        if (e.type == "navigation") {\n                          this.setDrawRoute(e.data, e.style);\n                        }\n                      },\n                      /**\n                       * 绘制路线\n                       * @param {*} arr\n                       */\n                      setDrawRoute(arr, style) {\n                        const Cesium = this.cesium;\n                        let color = "";\n                        if (style == "driving") {\n                          color = "#409EFF";\n                        }\n                        if (style == "riding") {\n                          color = "#67C23A";\n                        }\n                        if (style == "walking") {\n                          color = "#E6A23C";\n                        }\n                  \n                        const arrData = [];\n                        arr.map((item) => {\n                          const result = gcoord.transform(\n                            [item[0], item[1]], // 经纬度坐标\n                            gcoord.AMap, // 当前坐标系\n                            gcoord.WGS84 // 目标坐标系\n                          );\n                          arrData.push(result[0], result[1]);\n                        });\n                  \n                        this._Material.create(TrailLineMaterialProperty(Cesium));\n                  \n                        const Route = this._Entity.createPolyline({\n                          positions: Cesium.Cartesian3.fromDegreesArray(arrData),\n                          // clampToGround: true,\n                          // material: new Cesium.Color.fromCssColorString(color),\n                          material: new Cesium.Material_TrailLineMaterialProperty(),\n                          arcType: Cesium.ArcType.GEODESIC,\n                          width: 10,\n                        });\n                        this.viewer.flyTo(Route);\n                      },\n                      /**\n                       * 设置标点\n                       */\n                      async setPointPosition(data) {\n                        const Cesium = this.cesium;\n                        \n                        //实体数据\n                        const EntityArr = [];\n                        //是否聚合\n                        const polymerization = data.polymerization;\n                        //json数据\n                        const arr = data.data;\n                        //geojson 数据\n                        return await new Promise((resolve, reject) => {\n                          if (polymerization) {\n                            const _getJson = GeoJSON.parse(arr, {\n                              Point: ["location.lat", "location.lng"],\n                            });\n                            new Cesium.GeoJsonDataSource().load(_getJson).then((dataSource) => {\n                              this.viewer.dataSources.add(dataSource);\n                              // 设置聚合参数\n                              dataSource.clustering.enabled = true;\n                              dataSource.clustering.pixelRange = 60;\n                              dataSource.clustering.minimumClusterSize = 2;\n                  \n                              // foreach用于调用数组的每个元素，并将元素传递给回调函数。\n                              for (let i = 0; i < dataSource.entities.values.length; i++) {\n                                const entity = dataSource.entities.values[i];\n                                // 将点拉伸一定高度，防止被地形压盖\n                                entity.position._value.z += 50.0;\n                                // 使用大小为64*64的icon，缩小展示poi\n                                entity.billboard = {\n                                  image:\n                                    process.env.VUE_APP_PUBLIC_URL +\n                                    "/Vue/Maps/Gaode/PoiQuery/position.png",\n                                  width: 16,\n                                  height: 22,\n                                };\n                                //⽂字标签\n                                entity.label = {\n                                  text: entity.properties.name._value,\n                                  font: "500 30px Helvetica", // 15pt monospace\n                                  scale: 0.5,\n                                  style: Cesium.LabelStyle.FILL_AND_OUTLINE,\n                                  fillColor: Cesium.Color.WHITE,\n                                  pixelOffset: new Cesium.Cartesian2(-8, -50), //偏移量\n                                  showBackground: false,\n                                  heightReference: Cesium.HeightReference.CLAMP_TO_GROUND,\n                                  distanceDisplayCondition: new Cesium.DistanceDisplayCondition(\n                                    0.0,\n                                    20000.0\n                                  ),\n                                };\n                                EntityArr.push(entity);\n                              }\n                  \n                              // 添加监听函数\n                              dataSource.clustering.clusterEvent.addEventListener(\n                                (clusteredEntities, cluster) => {\n                                  // 关闭自带的显示聚合数量的标签\n                                  cluster.label.show = false;\n                                  cluster.billboard.show = true;\n                                  cluster.billboard.verticalOrigin = Cesium.VerticalOrigin.BOTTOM;\n                  \n                                  // 根据聚合数量的多少设置不同层级的图片以及大小\n                                  if (clusteredEntities.length >= 20) {\n                                    cluster.billboard.image = this._Canvas.combineIconAndLabel({\n                                      url:\n                                        process.env.VUE_APP_PUBLIC_URL +\n                                        "/Vue/Maps/Gaode/PoiQuery/cluster_4.png",\n                                      label: clusteredEntities.length,\n                                      size: 72,\n                                    });\n                                    cluster.billboard.width = 72;\n                                    cluster.billboard.height = 72;\n                                  } else if (clusteredEntities.length >= 12) {\n                                    cluster.billboard.image = this._Canvas.combineIconAndLabel({\n                                      url:\n                                        process.env.VUE_APP_PUBLIC_URL +\n                                        "/Vue/Maps/Gaode/PoiQuery/cluster_3.png",\n                                      label: clusteredEntities.length,\n                                      size: 56,\n                                    });\n                                    cluster.billboard.width = 56;\n                                    cluster.billboard.height = 56;\n                                  } else if (clusteredEntities.length >= 8) {\n                                    cluster.billboard.image = this._Canvas.combineIconAndLabel({\n                                      url:\n                                        process.env.VUE_APP_PUBLIC_URL +\n                                        "/Vue/Maps/Gaode/PoiQuery/cluster_2.png",\n                                      label: clusteredEntities.length,\n                                      size: 48,\n                                    });\n                                    cluster.billboard.width = 48;\n                                    cluster.billboard.height = 48;\n                                  } else {\n                                    cluster.billboard.image = this._Canvas.combineIconAndLabel({\n                                      url:\n                                        process.env.VUE_APP_PUBLIC_URL +\n                                        "/Vue/Maps/Gaode/PoiQuery/cluster_1.png",\n                                      label: clusteredEntities.length,\n                                      size: 40,\n                                    });\n                                    cluster.billboard.width = 40;\n                                    cluster.billboard.height = 40;\n                                  }\n                                }\n                              );\n                            });\n                            setTimeout(()=>{\n                              resolve(EntityArr)\n                            },1000)\n                            // return await EntityArr;\n                          } else {\n                            for (let i = 0; i < arr.length; i++) {\n                              const item = arr[i];\n                              //坐标系转换\n                              const result = gcoord.transform(\n                                [item.location.lng, item.location.lat], // 经纬度坐标\n                                gcoord.AMap, // 当前坐标系\n                                gcoord.WGS84 // 目标坐标系\n                              );\n                              const _Entity_ = this._Entity.createBillboard({\n                                id: item.id,\n                                name: item.name,\n                                position: Cesium.Cartesian3.fromDegrees(result[0], result[1]),\n                                common: {\n                                  label: {\n                                    //⽂字标签\n                                    text: item.name,\n                                    font: "500 30px Helvetica", // 15pt monospace\n                                    scale: 0.5,\n                                    style: Cesium.LabelStyle.FILL_AND_OUTLINE,\n                                    fillColor: Cesium.Color.WHITE,\n                                    pixelOffset: new Cesium.Cartesian2(-8, -50), //偏移量\n                                    showBackground: false,\n                                    heightReference: Cesium.HeightReference.CLAMP_TO_GROUND,\n                                    distanceDisplayCondition: new Cesium.DistanceDisplayCondition(\n                                      0.0,\n                                      20000.0\n                                    ),\n                                  },\n                                },\n                                image:\n                                  process.env.VUE_APP_PUBLIC_URL +\n                                  "/Vue/Maps/Gaode/PoiQuery/position.png",\n                                verticalOrigin: Cesium.VerticalOrigin.BOTTOM,\n                                heightReference: Cesium.HeightReference.CLAMP_TO_GROUND,\n                                width: 16,\n                                height: 22,\n                              });\n                              EntityArr.push(_Entity_);\n                            }\n                            setTimeout(()=>{\n                              resolve(EntityArr)\n                            },1000)\n                            // return await EntityArr;\n                          }\n                        });\n                      },\n                    },\n                  };'},{codeLanguage:"css",content:".container {\n                    width: 100%;\n                    height: 100%;\n                    #cesiumContainer {\n                      width: 100%;\n                      height: 100%;\n                    }\n                    .tools {\n                      position: fixed;\n                      bottom: 40px;\n                      right: 20px;\n                    }\n                  }"}]},{codeLanguage:"JS",relyOn:[{label:"gcoord",url:"JavaScript/cesium/Tripartite/gcoord/dist/gcoord.js"},{label:"geojson",url:"JavaScript/cesium/Tripartite/geojson/geojson.min.js"},{label:"layer",url:"JavaScript/cesium/Tripartite/layer/layer.zip"},{label:"layui",url:"JavaScript/cesium/Tripartite/layui/layui.zip"},{label:"Utils.js",url:"JavaScript/cesium/Utils.js"},{label:"Entity.js",url:"JavaScript/cesium/Entity.js"},{label:"Canvas.js",url:"JavaScript/cesium/Canvas.js"},{label:"Gaode/index.js",url:"JavaScript/cesium/Map/Gaode/index.js"},{label:"position.png",url:"JavaScript/Maps/Gaode/PoiQuery/position.png"},{label:"position-active.png",url:"JavaScript/Maps/Gaode/PoiQuery/position-active.png"},{label:"cluster_1.png",url:"JavaScript/Maps/Gaode/PoiQuery/cluster_1.png"},{label:"cluster_2.png",url:"JavaScript/Maps/Gaode/PoiQuery/cluster_2.png"},{label:"cluster_3.png",url:"JavaScript/Maps/Gaode/PoiQuery/cluster_3.png"},{label:"cluster_4.png",url:"JavaScript/Maps/Gaode/PoiQuery/cluster_4.png"}],code:[{codeLanguage:"js",content:'function gaodePoi() {\n                      window.gaodePoiVar = {\n                          tabIndex: 0,\n                          securityJsCode: "2a0ce2005352672661417093c485a056",//高德code  测试不久之后会失效 需要自行注册\n                          key: "cb250acd7ee0e7b2049cb93747ae3d44",//高德key 测试不久之后会失效 需要自行注册\n                          openSetUpDomId: "openSetUp",//打开操作面板元素id\n                          openPOIPanelDomId: "POIPanel",//操作面板元素id\n                          filePath: "/test/Maps/Gaode/PoiQuery",//通用路径\n                          _Utils: null,\n                          _GaodeMap: null,\n                          _Entity: null,//初始化实体函数\n                          _Canvas: null,\n                          linkageAddressProvinceDom: null,//存放 初始化 城市联动dom元素（省）\n                          linkageAddressCityDom: null,//存放 初始化 城市联动dom元素（市）\n                          cityCode: "",//选择的市code （只存了市级的code 因为目前检索需要 而省则暂时不需要）\n                          placeSearchType: [],//搜索的兴趣点类别数据\n                          placeSearchTypeCheckboxDom: null,//暂存 兴趣点类别 复选数据\n                          districtList: [],//行政列表数据\n                          polymerization: false,//是否聚合\n                  \n                          pageSize: 10,\n                          pageIndex: 1,\n                          total: 0,\n                          poisList: [],//检索点数据\n                  \n                          poisEntityArr: [],//存入点位实体\n                  \n                  \n                          startPosition: "", //起始输入位置数据\n                          endPosition: "", //终点输入位置数据\n                          startPositionResult: {}, //起始结果位置数据\n                          endPositionResult: {}, //终点结果位置数据\n                  \n                  \n                  \n                          //初始化\n                          init() {\n                              window._AMapSecurityConfig = {\n                                  securityJsCode: this.securityJsCode,\n                              };\n                              this._Utils = new Utils()\n                              this._Canvas = new Canvas(Cesium)\n                              this._Entity = new Entity(Cesium, viewer);\n                              const url = "https://webapi.amap.com/maps?v=2.0&key="+this.key+"&plugin="+new GaodeMap().plugin"\n                              this._Utils.loadJs(url,{ append: "body", defer: true }).then(() => {\n                                      this._GaodeMap = new GaodeMap(AMap);\n                                      //行政列表\n                                      this._GaodeMap.districtList({ subdistrict: 2 }).then((res) => {\n                                          // console.log(res)\n                                          this.districtList = res\n                  \n                                          //创建 省 dom元素 start\n                                          let province = window.document.createElement("div");\n                                          province.id = "linkageAddress-province"\n                                          province.className = "linkageAddress-province linkageAddress-input"\n                                          let province_find_html = ""\n                                          for (let province_i = 0; province_i < res.length; province_i++) {\n                                              const province_item = res[province_i]\n                                              province_find_html += \'<li onclick="gaodePoiVar.linkageAddressTrigger(event,\'+\'province\'+\')" data-value="\'+province_item.adcode+\'" data-label="\'+province_item.name+\'">\'+province_item.name+\'</li>\'\n                                          }\n                                          let provinceHtml = "<p>请选择省<span>&or;</span></p><input><ul>+"province_find_html"+</ul>"\n                                          province.innerHTML = provinceHtml\n                                          this.linkageAddressProvinceDom = province\n                                          //创建 省 dom元素 end\n\n                                          // 创建 市 dom元素 start\n                                          let city = window.document.createElement("div");\n                                          city.id = "linkageAddress-city"\n                                          city.className = "linkageAddress-city linkageAddress-input disabled"\n                                          let cityHtml = "<p>请选择市<span>&or;</span></p><input><ul></ul>"\n                                          city.innerHTML = cityHtml\n                                          this.linkageAddressCityDom = city\n                                          // 创建 市 dom元素 end\n                  \n                                          //调用创建 面板打开关闭按钮\n                                          this.createOpenSetUpButton()\n                                          //创建操作面板\n                                          this.createPOIPanel({\n                                              linkageAddress: {\n                                                  province,\n                                                  city\n                                              }\n                                          })\n                                          //创建导航搜索组件\n                                          this.initAutoComplete()\n                                      });\n                                      //搜索数据的兴趣点类别\n                                      this.placeSearchType = this._GaodeMap.placeSearchType\n                                      let placeSearchType = window.document.createElement("div");\n                                      placeSearchType.id = "placeSearchType"\n                                      placeSearchType.className = "placeSearchType"\n                                      let placeSearchType_html = ""\n                                      for (let placeSearchType_i = 0; placeSearchType_i < this._GaodeMap.placeSearchType.length; placeSearchType_i++) {\n                                          const placeSearchType_item = this._GaodeMap.placeSearchType[placeSearchType_i]\n                                          placeSearchType_html += \'<label><input type="checkbox" value="\'+placeSearchType_item+\'" name="placeSearchType">\'+placeSearchType_item+\'</label>\'\n                                      }\n                                      placeSearchType.innerHTML = placeSearchType_html\n                                      this.placeSearchTypeCheckboxDom = placeSearchType\n                                  });\n                          },\n                          /**\n                          * 创建初始化 点击显示面板按钮\n                          */\n                          createOpenSetUpButton() {\n                              const createOpenSetUpDom = (id) => {\n                                  let _div = window.document.createElement("div");\n                                  _div.id = id\n                                  _div.className = id\n                                  let html = \'<div class="icon-view" onclick="gaodePoiVar.openPOIPanel()"><img src="\'+this.filePath\'+/icon-setup.png" alt="" /></div>\'\n                                  _div.innerHTML = html\n                                  return _div\n                              }\n                  \n                              if (!this._Utils.operationDom(\'has\', this.openSetUpDomId)) {\n                                  this._Utils.operationDom("append", \'MainCenter\', createOpenSetUpDom(this.openSetUpDomId))\n                              }\n                          },\n                          /**\n                          * 关闭操作面板\n                          */\n                          closePOIPanel() {\n                              document.getElementById(this.openPOIPanelDomId).className = "POIPanel";\n                          },\n                          /**\n                          * 打开操作面板\n                          */\n                          openPOIPanel() {\n                              document.getElementById(this.openPOIPanelDomId).className = "POIPanel active";\n                          },\n                          /**\n                          * 创建操作面板\n                          */\n                          createPOIPanel({ linkageAddress }) {\n                              /**\n                              * 创建操作面板dom\n                              * @param {*} id \n                              * @returns html\n                              */\n                              const createPOIPanelDom = (id) => {\n                                  let _div = window.document.createElement("div");\n                                  _div.id = id\n                                  _div.className = id\n                                  let html = \'<div class="poiHead"><div class="poiHead-title">操作面板</div><div class="poiHead-close" onclick="gaodePoiVar.closePOIPanel()">×</div></div>\'\n                                  html+= \'<div class="poi-operation"><div class="poi-tab"><div class="poi-tab-item active" onclick="gaodePoiVar.poiTabClick(0)">兴趣点</div><div class="poi-tab-item" onclick="gaodePoiVar.poiTabClick(1)">路线规划与导航</div></div>\'\n                                  html+=\'<div class="poi-tab-box active">\'\n                                  html+=\'<div class="poi-tab-box-item">\'\n                                  html+=\'<div class="poi-form">\'\n                                  html+=\'<div class="poi-form-item">\'\n                                  html+=\'<div class="poi-form-item-label">范围：</div>\'\n                                  html+=\'<div class="poi-form-item-value"><label><input onclick="gaodePoiVar.rangeClick(event)" class="radio" type="radio" name="range" value="city" checked="checked" />城市</label><label><input onclick="gaodePoiVar.rangeClick(event)" class="radio" type="radio" name="range" value="all"/>全国</label></div>\'\n                                  html+=\'</div>\'\n                                  html+=\'<div class="poi-form-item" id="city-poi-form-item">\'\n                                  html+=\'<div class="poi-form-item-label">城市：</div>\'\n                                  html+=\'<div class="poi-form-item-value"><div id="cityAddress" class="linkageAddress"></div></div>\'\n                                  html+=\'</div>\'\n                                  html+=\'<div class="poi-form-item">\'\n                                  html+=\'<div class="poi-form-item-label">兴趣点类别：</div>\'\n                                  html+=\'<div class="poi-form-item-value" id="placeSearchTypeWrap"></div>\'\n                                  html+=\'</div>\'\n                                  html+=\'<div class="poi-form-item">\'\n                                  html+=\'<div class="poi-form-item-label">是否聚合：</div>\'\n                                  html+=\'<div class="poi-form-item-value"><div class="polymerization"><label><input type="radio" name="polymerization" value="0" checked />否</label><label><input type="radio" name="polymerization" value="1" />是</label></div></div>\'\n                                  html+=\'</div>\'\n                                  html+=\'<div class="text-search">\'\n                                  html+=\'<input type="text" class="search-text" id="search-text" autocomplete="off" placeholder="请输入搜索关键词"/>\'\n                                  html+=\'<button class="text-search-button" onclick="gaodePoiVar.get_form_data()">搜索</button>\'\n                                  html+=\'</div>\'\n                                  html+=\'</div></div></div>\'\n                                  html+=\'<div class="poi-tab-box"><div class="poi-tab-box-item"><div class="poi-form">\'\n                                  html+=\'<div class="poi-form-item">\'\n                                  html+=\'<div class="poi-form-item-label">起始位置：</div>\'\n                                  html+=\'<div class="poi-form-item-value"><input type="text" class="poiInput" id="startPosition" autocomplete="off" placeholder="搜索起始位置"/></div>\'\n                                  html+=\'</div>\'\n                                  html+=\'<div class="poi-form-item">\'\n                                  html+=\'<div class="poi-form-item-label">终点位置：</div>\'\n                                  html+=\'<div class="poi-form-item-value"><input type="text" class="poiInput" id="endPosition" autocomplete="off" placeholder="搜索终点位置"/></div>\'\n                                  html+=\'</div>\'\n                                  html+=\'<div class="poi-form-item">\'\n                                  html+=\'<div class="poi-form-item-label">类型：</div>\'\n                                  html+=\'<div class="poi-form-item-value"><div class="navigationType"><label><input type="radio" name="navigationType" value="1"  />驾车</label><label><input type="radio" name="navigationType" value="2" />公交</label><label><input type="radio" name="navigationType" value="3"  />骑行</label><label><input type="radio" name="navigationType" value="4" />步行</label><button class="search-button" onclick="gaodePoiVar.get_form_data()">搜索</button></div></div>\'\n                                  html+=\'</div>\'\n                                  html+=\'</div></div></div></div>\'\n                                  html+=\'<div class="poi-main active"><div class="data-view" id="data-view"></div><div id="pagination-view" class="pagination-view"></div></div>\'\n                                  html+=\'<div class="poi-main" id="panel"></div>\'\n                                  _div.innerHTML = html\n                                  return _div\n                              }\n                              if (!this._Utils.operationDom(\'has\', this.openPOIPanelDomId)) {\n                                  this._Utils.operationDom("append", \'MainCenter\', createPOIPanelDom(this.openPOIPanelDomId))\n                              }\n                              const cityAddress = document.getElementById("cityAddress")\n                              cityAddress.appendChild(linkageAddress.province)\n                              cityAddress.appendChild(linkageAddress.city)\n                              document.getElementById("placeSearchTypeWrap").appendChild(this.placeSearchTypeCheckboxDom)\n                  \n                          },\n                  \n                          /**\n                          * 操作面板切换操作功能\n                          * @param {*} index\n                          */\n                          poiTabClick(index) {\n                              this.tabIndex = Number(index)\n                              const POIPanel = document.querySelector(\'#POIPanel\')\n                              const poiHeadTabItem = POIPanel.querySelectorAll(\'.poi-tab-item\');\n                              const poiTabBox = POIPanel.querySelectorAll(\'.poi-tab-box\');\n                              const poiMain = POIPanel.querySelectorAll(\'.poi-main\');\n                              for (let i = 0; i < poiHeadTabItem.length; i++) {\n                                  poiHeadTabItem[i].className = "poi-tab-item"\n                                  poiTabBox[i].className = "poi-tab-box"\n                                  poiMain[i].className = "poi-main"\n                              }\n                              poiHeadTabItem[index].className = "poi-tab-item active"\n                              poiTabBox[index].className = "poi-tab-box active"\n                              poiMain[index].className = "poi-main active " + "poi-main" + index\n                          },\n                          /**\n                          * 联动菜单组件触发\n                          * @param {*} event \n                          * @param {*} type province/省 city/市\n                          */\n                          linkageAddressTrigger(event, type) {\n                              const e = {\n                                  label: event.target.dataset.label,\n                                  value: event.target.dataset.value\n                              }\n                              //省触发\n                              if (type == "province") {\n                                  const province = document.getElementById("linkageAddress-province")\n                                  const p = province.getElementsByTagName("p")\n                                  p[0].innerHTML = e.label + \'<span>&or;</span>\'\n                  \n                                  const city = document.getElementById("linkageAddress-city")\n                                  city.className = "linkageAddress-city linkageAddress-input"\n                                  const ul = city.getElementsByTagName("ul")[0]\n                                  ul.innerHTML = ""\n                                  this.cityCode = ""\n                                  const city_p = city.getElementsByTagName("p")\n                                  city_p[0].innerHTML = "请选择市<span>&or;</span>"\n                                  const f_data = this.districtList.filter(item => item.adcode == e.value)\n                                  if (f_data.length == 0) return\n                  \n                                  let city_li_html = ""\n                                  for (let city_i = 0; city_i < f_data[0].districtList.length; city_i++) {\n                                      const city_item = f_data[0].districtList[city_i]\n                                      city_li_html += \'<li onclick="gaodePoiVar.linkageAddressTrigger(event,\'city\')" data-value="\'+city_item.adcode+\'" data-label="\'+city_item.name+\'">\'+city_item.name+\'</li>\'\n                                  }\n                                  ul.innerHTML = city_li_html\n                              }\n                  \n                              //市触发\n                              if (type == "city") {\n                                  const city = document.getElementById("linkageAddress-city")\n                                  const p = city.getElementsByTagName("p")\n                                  p[0].innerHTML = e.label + "<span>&or;</span>"\n                                  this.cityCode = e.value\n                              }\n                          },\n                  \n                          /**\n                          * 范围触发\n                          * @param {*} event \n                          */\n                          rangeClick(event) {\n                              const cityForm = document.getElementById("city-poi-form-item")\n                              if (event.target.defaultValue == "all") {\n                                  cityForm.style.display = "none"\n                              }\n                              if (event.target.defaultValue == "city") {\n                                  cityForm.style.display = "flex"\n                              }\n                          },\n                  \n                          /**\n                          * 操作分页\n                          */\n                          setPagination() {\n                              layui.use(\'laypage\', () => {\n                                  var laypage = layui.laypage;\n                                  //执行一个laypage实例\n                                  laypage.render({\n                                      elem: \'pagination-view\',\n                                      count: this.total,//数据总数，从服务端得到\n                                      limit: this.pageSize,\n                                      curr: this.pageIndex,\n                                      jump: (obj, first) => {\n                                          //obj包含了当前分页的所有参数，比如：\n                                          // console.log(obj.curr); //得到当前页，以便向服务端请求对应页的数据。\n                                          // console.log(obj.limit); //得到每页显示的条数\n                                          //首次不执行\n                                          if (!first) {\n                                              this.pageIndex = obj.curr\n                                              this.get_form_data()\n                                          }\n                                      }\n                                  });\n                              });\n                          },\n                  \n                          /**\n                          * 渲染视图\n                          */\n                          setView() {\n                              const dataView = document.getElementById("data-view")\n                              dataView.innerHTML = ""\n                              let _div = window.document.createElement("div");\n                              _div.className = "data-view-box"\n                              let html = ""\n                              let image = ""\n                              for (let i = 0; i < this.poisList.length; i++) {\n                                  const item = this.poisList[i]\n                                  if (item.photos.length != 0) {\n                                      image = \'<img src="\'+item.photos[0].url+\'"/>\'\n                                  } else {\n                                      image = \'<div class="imageError">error</div>\'\n                                  }\n\n                                  html += \'<div class="data-view-item" onclick=\'gaodePoiVar.setFlyTo("\'+item.id+\'")\'>\'\n                                  html += \'<div class="data-view-item-image">\'+image+\'</div>\'\n                                  html += \'<div class="data-view-item-text">\'\n                                  html += \'<h3>\'+item.name+\'</h3>\'\n                                  html += \'<p>电话：\'+item.tel+\'</p>\'\n                                  html += \'<p>类目：\'+item.type+\'</p>\'\n                                  html += \'<p> 地址：\'+item.pname+item.cityname+item.adname+item.address+\'</p>\'\n                                  html += \'</div>\'\n                                  html += \'</div>\'\n                              }\n                              _div.innerHTML = html\n                  \n                              dataView.appendChild(_div)\n                  \n                          },\n                  \n                          /**\n                          * 渲染点位\n                          */\n                          setPoint() {\n                              const _this = this\n                              async function setPointPosition(data) {\n                                  viewer.entities.removeAll();\n                                  //实体数据\n                                  const EntityArr = [];\n                                  //是否聚合\n                                  const polymerization = data.polymerization;\n                                  //json数据\n                                  const arr = data.data;\n                                  //geojson 数据\n                                  return await new Promise((resolve, reject) => {\n                                      if (polymerization) {\n                                          const _getJson = GeoJSON.parse(arr, {\n                                              Point: ["location.lat", "location.lng"],\n                                          });\n                                          new Cesium.GeoJsonDataSource().load(_getJson).then((dataSource) => {\n                                              viewer.dataSources.add(dataSource);\n                                              // 设置聚合参数\n                                              dataSource.clustering.enabled = true;\n                                              dataSource.clustering.pixelRange = 60;\n                                              dataSource.clustering.minimumClusterSize = 2;\n                  \n                                              // foreach用于调用数组的每个元素，并将元素传递给回调函数。\n                                              for (let i = 0; i < dataSource.entities.values.length; i++) {\n                                                  const entity = dataSource.entities.values[i];\n                                                  // 将点拉伸一定高度，防止被地形压盖\n                                                  entity.position._value.z += 50.0;\n                                                  // 使用大小为64*64的icon，缩小展示poi\n                                                  entity.billboard = {\n                                                      image:\n                                                          _this.filePath + "/position.png",\n                                                      width: 16,\n                                                      height: 22,\n                                                  };\n                                                  //⽂字标签\n                                                  entity.label = {\n                                                      text: entity.properties.name._value,\n                                                      font: "500 30px Helvetica", // 15pt monospace\n                                                      scale: 0.5,\n                                                      style: Cesium.LabelStyle.FILL_AND_OUTLINE,\n                                                      fillColor: Cesium.Color.WHITE,\n                                                      pixelOffset: new Cesium.Cartesian2(-8, -50), //偏移量\n                                                      showBackground: false,\n                                                      heightReference: Cesium.HeightReference.CLAMP_TO_GROUND,\n                                                      distanceDisplayCondition: new Cesium.DistanceDisplayCondition(\n                                                          0.0,\n                                                          20000.0\n                                                      ),\n                                                  };\n                                                  EntityArr.push(entity);\n                                              }\n                  \n                                              // 添加监听函数\n                                              dataSource.clustering.clusterEvent.addEventListener(\n                                                  (clusteredEntities, cluster) => {\n                                                      // 关闭自带的显示聚合数量的标签\n                                                      cluster.label.show = false;\n                                                      cluster.billboard.show = true;\n                                                      cluster.billboard.verticalOrigin = Cesium.VerticalOrigin.BOTTOM;\n                  \n                                                      // 根据聚合数量的多少设置不同层级的图片以及大小\n                                                      if (clusteredEntities.length >= 20) {\n                                                          cluster.billboard.image = _this._Canvas.combineIconAndLabel({\n                                                              url:\n                                                                  _this.filePath + "/cluster_4.png",\n                                                              label: clusteredEntities.length,\n                                                              size: 72,\n                                                          });\n                                                          cluster.billboard.width = 72;\n                                                          cluster.billboard.height = 72;\n                                                      } else if (clusteredEntities.length >= 12) {\n                                                          cluster.billboard.image = _this._Canvas.combineIconAndLabel({\n                                                              url:\n                                                                  _this.filePath + "/cluster_3.png",\n                                                              label: clusteredEntities.length,\n                                                              size: 56,\n                                                          });\n                                                          cluster.billboard.width = 56;\n                                                          cluster.billboard.height = 56;\n                                                      } else if (clusteredEntities.length >= 8) {\n                                                          cluster.billboard.image = _this._Canvas.combineIconAndLabel({\n                                                              url:\n                                                                  _this.filePath + "/cluster_2.png",\n                                                              label: clusteredEntities.length,\n                                                              size: 48,\n                                                          });\n                                                          cluster.billboard.width = 48;\n                                                          cluster.billboard.height = 48;\n                                                      } else {\n                                                          cluster.billboard.image = _this._Canvas.combineIconAndLabel({\n                                                              url:\n                                                                  _this.filePath + "/cluster_1.png",\n                                                              label: clusteredEntities.length,\n                                                              size: 40,\n                                                          });\n                                                          cluster.billboard.width = 40;\n                                                          cluster.billboard.height = 40;\n                                                      }\n                                                  }\n                                              );\n                                          });\n                                          setTimeout(() => {\n                                              resolve(EntityArr)\n                                          }, 1000)\n                                          // return await EntityArr;\n                                      } else {\n                                          for (let i = 0; i < arr.length; i++) {\n                                              const item = arr[i];\n                                              //坐标系转换\n                                              const result = gcoord.transform(\n                                                  [item.location.lng, item.location.lat], // 经纬度坐标\n                                                  gcoord.AMap, // 当前坐标系\n                                                  gcoord.WGS84 // 目标坐标系\n                                              );\n                                              const _Entity_ = _this._Entity.createBillboard({\n                                                  id: item.id,\n                                                  name: item.name,\n                                                  position: Cesium.Cartesian3.fromDegrees(result[0], result[1]),\n                                                  common: {\n                                                      label: {\n                                                          //⽂字标签\n                                                          text: item.name,\n                                                          font: "500 30px Helvetica", // 15pt monospace\n                                                          scale: 0.5,\n                                                          style: Cesium.LabelStyle.FILL_AND_OUTLINE,\n                                                          fillColor: Cesium.Color.WHITE,\n                                                          pixelOffset: new Cesium.Cartesian2(-8, -50), //偏移量\n                                                          showBackground: false,\n                                                          heightReference: Cesium.HeightReference.CLAMP_TO_GROUND,\n                                                          distanceDisplayCondition: new Cesium.DistanceDisplayCondition(\n                                                              0.0,\n                                                              20000.0\n                                                          ),\n                                                      },\n                                                  },\n                                                  image:\n                                                      _this.filePath + "/position.png",\n                                                  verticalOrigin: Cesium.VerticalOrigin.BOTTOM,\n                                                  heightReference: Cesium.HeightReference.CLAMP_TO_GROUND,\n                                                  width: 16,\n                                                  height: 22,\n                                              });\n                                              EntityArr.push(_Entity_);\n                                          }\n                                          setTimeout(() => {\n                                              resolve(EntityArr)\n                                          }, 1000)\n                                          // return await EntityArr;\n                                      }\n                                  });\n                              }\n                  \n                              setPointPosition({\n                                  polymerization: this.getPolymerization(),\n                                  data: this.poisList,\n                              }).then((res) => {\n                                  this.poisEntityArr = res;\n                                  viewer.flyTo(res);\n                              });\n                          },\n                          /**\n                          * 触发单条 视图定位\n                          * @param {*} id \n                          */\n                          setFlyTo(id) {\n                              this.poisEntityArr.map(item => {\n                                  if (item.id == id) {\n                                      viewer.flyTo(item);\n                                  }\n                              })\n                          },\n                          /**\n                          * 是否聚合\n                          */\n                          getPolymerization() {\n                              const arr = [...document.querySelectorAll(\'input[type=radio][name=polymerization]\')]\n                              let data = false\n                              arr.map(item => {\n                                  if (item.checked) {\n                                      if (item.defaultValue === "0") {\n                                          data = false\n                                      } else {\n                                          data = true\n                                      }\n                                  }\n                              })\n                              return data\n                          },\n                  \n                          /**\n                          * 初始化路线规划和导航的表单筛选\n                          */\n                          initAutoComplete() {\n                              //搜素组件\n                              this._GaodeMap\n                                  .AutoComplete({\n                                      input: "startPosition",\n                                  })\n                                  .then((res) => {\n                                      res.on("select", (result) => {\n                                          if (!result.poi.location) {\n                                              layer.msg(\'输入的地址有误，请重新输入\', { icon: 5 });\n                                              return;\n                                          }\n                                          this.startPositionResult = result;\n                                      });\n                                  });\n                  \n                              this._GaodeMap\n                                  .AutoComplete({\n                                      input: "endPosition",\n                                  })\n                                  .then((res) => {\n                                      res.on("select", (result) => {\n                                          if (!result.poi.location) {\n                                              layer.msg(\'输入的地址有误，请重新输入\', { icon: 5 });\n                                              return;\n                                          }\n                                          this.endPositionResult = result;\n                                      });\n                                  });\n                          },\n                          /**\n                          * 绘制路线\n                          * @param {*} arr \n                          * @param {*} style \n                          */\n                          setDrawRoute(arr, style) {\n                              let color = "";\n                              if (style == "driving") {\n                                  color = "#409EFF";\n                              }\n                              if (style == "riding") {\n                                  color = "#67C23A";\n                              }\n                              if (style == "walking") {\n                                  color = "#E6A23C";\n                              }\n                  \n                              const arrData = [];\n                              arr.map((item) => {\n                                  const result = gcoord.transform(\n                                      [item[0], item[1]], // 经纬度坐标\n                                      gcoord.AMap, // 当前坐标系\n                                      gcoord.WGS84 // 目标坐标系\n                                  );\n                                  arrData.push(result[0], result[1]);\n                              });\n                  \n                              const Route = this._Entity.createPolyline({\n                                  positions: Cesium.Cartesian3.fromDegreesArray(arrData),\n                                  material: new Cesium.Color.fromCssColorString(color),\n                                  arcType: Cesium.ArcType.GEODESIC,\n                                  width: 10,\n                              });\n                              viewer.flyTo(Route);\n                          },\n                          /**\n                          * 获取表单数据\n                          */\n                          get_form_data() {\n                              //获取复选框\n                              function getAllCheckbox() {\n                                  const arr = [...document.querySelectorAll(\'input[type=checkbox][name=placeSearchType]\')]\n                                  let arrData = []\n                                  arr.map(item => {\n                                      if (item.checked) {\n                                          arrData.push(item.defaultValue)\n                                      }\n                                  })\n                                  return arrData.join("|")\n                              }\n                  \n                              //全国/城市\n                              function getRange() {\n                                  const arr = [...document.querySelectorAll(\'input[type=radio][name=range]\')]\n                                  let data = ""\n                                  arr.map(item => {\n                                      if (item.checked) {\n                                          data = item.defaultValue\n                                      }\n                                  })\n                                  return data\n                              }\n                              //0=兴趣点 \n                              if (this.tabIndex == 0) {\n                                  const data = {\n                                      range: getRange(),//范围 all=全国 city=城市\n                                      cityCode: this.cityCode, //选择的城市code\n                                      placeSearchType: getAllCheckbox(),//兴趣点复选\n                                      polymerization: this.getPolymerization(),//是否启动聚合\n                                      searchText: document.getElementById("search-text").value//检索关键词\n                                  }\n                  \n                                  if (data.range == "city") {\n                                      if (data.cityCode == "") {\n                                          layer.msg(\'请选择城市\', { icon: 5 });\n                                          return\n                                      }\n                                  }\n                                  if (data.placeSearchType == "") {\n                                      layer.msg(\'请选择兴趣点\', { icon: 5 });\n                                      return\n                                  }\n                                  if (data.searchText == "") {\n                                      layer.msg(\'请输入搜索关键词\', { icon: 5 });\n                                      return\n                                  }\n                                  let placeSearchData = {\n                                      pageSize: this.pageSize,\n                                      pageIndex: this.pageIndex,\n                                      searchKeyword: data.searchText,\n                                      extensions: "all",\n                                  };\n                                  if (data.range == "city") {\n                                      placeSearchData.city = data.cityCode || "";\n                                  }\n                                  if (data.searchType != "") {\n                                      placeSearchData.type = data.placeSearchType;\n                                  }\n                                  // console.log(placeSearchData)\n                                  this._GaodeMap\n                                      .placeSearch(placeSearchData)\n                                      .then((res) => {\n                                          console.log(res)\n                                          this.total = res.count;\n                                          this.poisList = res.pois;\n                                          document.getElementById("data-view").scrollTop = 0\n                                          //操作分页\n                                          this.setPagination()\n                                          //渲染视图\n                                          this.setView()\n                                          //渲染散点\n                                          this.setPoint()\n                                      })\n                              }\n                              // 1=路线规划与导航\n                              if (this.tabIndex == 1) {\n                                  document.getElementById("panel").innerHTML = "";\n                                  /**\n                                  * 获取类型\n                                  * @returns \n                                  */\n                                  function getNavigationType() {\n                                      const arr = [...document.querySelectorAll(\'input[type=radio][name=navigationType]\')]\n                                      let data = ""\n                                      arr.map(item => {\n                                          if (item.checked) {\n                                              data = item.defaultValue\n                                          }\n                                      })\n                                      return data\n                                  }\n                                  if (JSON.stringify(this.startPositionResult) == "{}") {\n                                      layer.msg(\'请输入选择起始位置\', { icon: 5 });\n                                      return\n                                  }\n                                  if (JSON.stringify(this.endPositionResult) == "{}") {\n                                      layer.msg(\'请输入选择终点位置\', { icon: 5 });\n                                      return\n                                  }\n                                  const navigationType = getNavigationType()\n                                  if (navigationType == "") {\n                                      layer.msg(\'请选择类型\', { icon: 5 });\n                                      return\n                                  }\n                  \n                                  const start = [\n                                      this.startPositionResult.poi.location.lng,\n                                      this.startPositionResult.poi.location.lat,\n                                  ];\n                                  const end = [\n                                      this.endPositionResult.poi.location.lng,\n                                      this.endPositionResult.poi.location.lat,\n                                  ];\n                  \n                                  //驾车\n                                  if (navigationType == "1") {\n                                      this._GaodeMap\n                                          .Driving({\n                                              panel: "panel",\n                                              start,\n                                              end,\n                                          })\n                                          .then((res) => {\n                                              // console.log(res.routes);\n                                              if (res.routes.length != 0) {\n                                                  let routeLocationArr = [];\n                                                  const steps = res.routes[0].steps;\n                                                  const len = steps.length;\n                                                  for (let i = 0; i < len; i++) {\n                                                      const item = steps[i];\n                                                      routeLocationArr.push([\n                                                          item.start_location.lng,\n                                                          item.start_location.lat,\n                                                      ]);\n                                                      if (len - 1 == i) {\n                                                          routeLocationArr.push([\n                                                              item.end_location.lng,\n                                                              item.end_location.lat,\n                                                          ]);\n                                                      }\n                                                  }\n                                                  this.setDrawRoute(routeLocationArr, "driving");\n                                              }\n                                          });\n                                  }\n                                  //公交车\n                                  if (navigationType == "2") {\n                                      this._GaodeMap\n                                          .Transfer({\n                                              panel: "panel",\n                                              start,\n                                              end,\n                                              city: "沈阳市",\n                                          })\n                                          .then((res) => {\n                                              // console.log(res);\n                                          });\n                                  }\n                                  //骑行\n                                  if (navigationType == "3") {\n                                      this._GaodeMap\n                                          .Riding({\n                                              panel: "panel",\n                                              start,\n                                              end,\n                                          })\n                                          .then((res) => {\n                                              if (res.routes.length != 0) {\n                                                  let routeLocationArr = [];\n                                                  const rides = res.routes[0].rides;\n                                                  const len = rides.length;\n                                                  for (let i = 0; i < len; i++) {\n                                                      const item = rides[i];\n                                                      routeLocationArr.push([\n                                                          item.start_location.lng,\n                                                          item.start_location.lat,\n                                                      ]);\n                                                      if (len - 1 == i) {\n                                                          routeLocationArr.push([\n                                                              item.end_location.lng,\n                                                              item.end_location.lat,\n                                                          ]);\n                                                      }\n                                                  }\n                  \n                                                  this.setDrawRoute(routeLocationArr, "riding");\n                                              }\n                                          });\n                                  }\n                                  //步行\n                                  if (navigationType == "4") {\n                                      this._GaodeMap\n                                          .Walking({\n                                              panel: "panel",\n                                              start,\n                                              end,\n                                          })\n                                          .then((res) => {\n                                              if (res.routes.length != 0) {\n                                                  let routeLocationArr = [];\n                                                  const steps = res.routes[0].steps;\n                                                  const len = steps.length;\n                                                  for (let i = 0; i < len; i++) {\n                                                      const item = steps[i];\n                                                      routeLocationArr.push([\n                                                          item.start_location.lng,\n                                                          item.start_location.lat,\n                                                      ]);\n                                                      if (len - 1 == i) {\n                                                          routeLocationArr.push([\n                                                              item.end_location.lng,\n                                                              item.end_location.lat,\n                                                          ]);\n                                                      }\n                                                  }\n                                                  this.setDrawRoute(routeLocationArr, "walking");\n                                              }\n                                          });\n                                  }\n                  \n                              }\n                  \n                          },\n                  \n                  \n                  \n                      }\n                  \n                      //初始化\n                      gaodePoiVar.init()\n                  }'},{codeLanguage:"css",content:'.openSetUp {\n                        width: 40px;\n                        height: 40px;\n                        border-radius: 50%;\n                        position: fixed;\n                        right: 20px;\n                        bottom: 20px;\n                        background-color: #409EFF;\n                      \n                        cursor: pointer;\n                      \n                        .icon-view {\n                          width: 100%;\n                          height: 100%;\n                          border-radius: 50%;\n                          display: flex;\n                          align-items: center;\n                          justify-content: center;\n                        }\n                      \n                        img {\n                          width: 16px;\n                          display: block;\n                        }\n                      \n                        &:hover {\n                          opacity: 0.8;\n                        }\n                      }\n                      \n                      .POIPanel {\n                        width: 500px;\n                        height: 100vh;\n                        background-color: #fff;\n                        box-shadow: 0 8px 10px -5px rgba(0, 0, 0, 0.2), 0 16px 24px 2px rgba(0, 0, 0, 0.14), 0 6px 30px 5px rgba(0, 0, 0, 0.12);\n                        position: fixed;\n                        top: 0;\n                        right: -100%;\n                        box-sizing: border-box;\n                        padding-top: 60px;\n                        display: flex;\n                        flex-direction: column;\n                        transition: all 0.3s;\n                        &.active {\n                          right: 0;\n                        }\n                      \n                        .poiHead {\n                          padding: 10px 20px;\n                          box-sizing: border-box;\n                          border-bottom: 1px solid #ccc;\n                          display: flex;\n                          align-items: center;\n                          justify-content: space-between;\n                      \n                          .poiHead-title {\n                            font-size: 16px;\n                            font-weight: bold;\n                          }\n                      \n                          .poiHead-close {\n                            color: #409EFF;\n                            font-size: 20px;\n                            cursor: pointer;\n                      \n                            &:hover {\n                              color: #F56C6C;\n                            }\n                          }\n                        }\n                      \n                        .poi-operation {\n                          padding: 0 20px;\n                      \n                          .poi-tab {\n                            height: 40px;\n                            display: flex;\n                            align-items: center;\n                            // border-bottom: 1px solid #ccc;\n                            padding: 10px 0;\n                      \n                            .poi-tab-item {\n                              margin-right: 30px;\n                              cursor: pointer;\n                              color: #303133;\n                              font-size: 14px;\n                              position: relative;\n                              height: 100%;\n                              display: flex;\n                              align-items: center;\n                      \n                              &:hover {\n                                color: #409EFF;\n                              }\n                      \n                              &.active {\n                                color: #409EFF;\n                      \n                                &::after {\n                                  content: "";\n                                  display: block;\n                                  height: 2px;\n                                  width: 100%;\n                                  background-color: #409EFF;\n                                  position: absolute;\n                                  bottom: -10px;\n                                  left: 0;\n                                }\n                              }\n                            }\n                          }\n                      \n                          .poi-tab-box {\n                            display: none;\n                      \n                            &.active {\n                              display: block;\n                            }\n                      \n                            .poi-tab-box-item {\n                              .poi-form {\n                                padding-top: 10px;\n                      \n                                .poi-form-item {\n                                  display: flex;\n                                  align-items: center;\n                                  margin-bottom: 5px;\n                      \n                                  .poi-form-item-label {\n                                    white-space: nowrap;\n                                  }\n                      \n                                  .poi-form-item-value {\n                                    flex: 1;\n                      \n                                    .poiInput {\n                                      -webkit-appearance: none;\n                                      background-color: #FFF;\n                                      background-image: none;\n                                      border-radius: 4px;\n                                      border: 1px solid #DCDFE6;\n                                      -webkit-box-sizing: border-box;\n                                      box-sizing: border-box;\n                                      color: #606266;\n                                      display: inline-block;\n                                      font-size: 12px;\n                                      height: 28px;\n                                      line-height: 28px;\n                                      outline: 0;\n                                      padding: 0 15px;\n                                      -webkit-transition: border-color .2s cubic-bezier(.645, .045, .355, 1);\n                                      transition: border-color .2s cubic-bezier(.645, .045, .355, 1);\n                                      width: 100%;\n                                    }\n                      \n                                    .navigationType {\n                                      display: flex;\n                                      align-items: center;\n                      \n                                      .search-button {\n                                        margin-left: auto;\n                                        display: inline-block;\n                                        line-height: 1;\n                                        white-space: nowrap;\n                                        cursor: pointer;\n                                        border: 1px solid #DCDFE6;\n                                        color: #606266;\n                                        -webkit-appearance: none;\n                                        text-align: center;\n                                        -webkit-box-sizing: border-box;\n                                        box-sizing: border-box;\n                                        outline: 0;\n                                        -webkit-transition: .1s;\n                                        transition: .1s;\n                                        font-weight: 500;\n                                        padding: 7px 15px;\n                                        font-size: 12px;\n                                        border-radius: 3px;\n                      \n                                        color: #FFF;\n                                        background-color: #409EFF;\n                                        border-color: #409EFF;\n                                      }\n                                    }\n                                  }\n                      \n                                  label {\n                                    margin-bottom: 0;\n                      \n                                  }\n                                }\n                      \n                                .text-search {\n                                  display: flex;\n                                  align-items: center;\n                      \n                                  .search-text {\n                                    -webkit-appearance: none;\n                                    background-color: #FFF;\n                                    background-image: none;\n                                    border-radius: 4px;\n                                    border: 1px solid #DCDFE6;\n                                    -webkit-box-sizing: border-box;\n                                    box-sizing: border-box;\n                                    color: #606266;\n                                    display: inline-block;\n                                    font-size: 12px;\n                                    height: 28px;\n                                    line-height: 28px;\n                                    outline: 0;\n                                    padding: 0 15px;\n                                    -webkit-transition: border-color .2s cubic-bezier(.645, .045, .355, 1);\n                                    transition: border-color .2s cubic-bezier(.645, .045, .355, 1);\n                                    flex: 1;\n                                  }\n                      \n                                  .text-search-button {\n                                    display: inline-block;\n                                    line-height: 1;\n                                    white-space: nowrap;\n                                    cursor: pointer;\n                                    border: 1px solid #DCDFE6;\n                                    color: #606266;\n                                    -webkit-appearance: none;\n                                    text-align: center;\n                                    -webkit-box-sizing: border-box;\n                                    box-sizing: border-box;\n                                    outline: 0;\n                                    margin: 0;\n                                    -webkit-transition: .1s;\n                                    transition: .1s;\n                                    font-weight: 500;\n                                    padding: 7px 15px;\n                                    font-size: 12px;\n                                    border-radius: 3px;\n                      \n                                    color: #FFF;\n                                    margin-left: 10px;\n                                    background-color: #409EFF;\n                                    border-color: #409EFF;\n                      \n                                  }\n                                }\n                              }\n                            }\n                          }\n                        }\n                      \n                        .poi-main {\n                          height: calc(100vh - 360px);\n                          flex-direction: column;\n                          padding-top: 10px;\n                          display: none;\n                          &.poi-main1 {\n                            height: calc(100vh - 260px);\n                          }\n                          &.active {\n                            display: flex;\n                          }\n                          &#panel {\n                            overflow-y: auto;\n                          }\n                      \n                          .data-view {\n                            // flex: 1;\n                            height: calc(100% - 50px);\n                            overflow-y: auto;\n                            padding: 0 20px;\n                            overflow-x: hidden;\n                      \n                            .data-view-box {\n                              .data-view-item {\n                                height: 120px;\n                                display: flex;\n                                justify-content: space-between;\n                                margin-bottom: 10px;\n                                cursor: pointer;\n                      \n                                .data-view-item-image {\n                                  height: 120px;\n                                  width: 120px;\n                                  display: flex;\n                                  align-items: center;\n                                  justify-content: center;\n                                  overflow: hidden;\n                                  background-color: #eee;\n                      \n                                  img {\n                                    display: block;\n                                    max-width: 100%;\n                                    // max-height: 100%;\n                                    transition: all 0.6s cubic-bezier(0.34, 1.01, 1, 1);\n                                    -webkit-transition: all 0.6s cubic-bezier(0.34, 1.01, 1, 1);\n                                    -moz-transition: all 0.6s cubic-bezier(0.34, 1.01, 1, 1);\n                                    -ms-transition: all 0.6s cubic-bezier(0.34, 1.01, 1, 1);\n                                    -o-transition: all 0.6s cubic-bezier(0.34, 1.01, 1, 1);\n                                  }\n                                }\n                      \n                                .data-view-item-text {\n                                  width: calc(100% - 130px);\n                      \n                                  h3 {\n                                    font-size: 18px;\n                                  }\n                      \n                                  p {\n                                    font-size: 12px;\n                                  }\n                                }\n                      \n                                &:hover {\n                                  .data-view-item-image {\n                                    img {\n                                      transform: scale(1.15);\n                                      -webkit-transform: scale(1.15);\n                                      -moz-transform: scale(1.15);\n                                      -o-transform: scale(1.15);\n                                      -ms-transform: scale(1.15);\n                                    }\n                                  }\n                      \n                                  .data-view-item-text {\n                                    h3 {\n                                      color: #409EFF;\n                                    }\n                                  }\n                                }\n                              }\n                            }\n                          }\n                      \n                          .pagination-view {\n                            height: 50px;\n                            display: flex;\n                            justify-content: flex-end;\n                            padding: 0 20px;\n                          }\n                        }\n                      }\n                      \n                      \n                      .linkageAddress {\n                        display: flex;\n                        align-items: center;\n                      \n                        .linkageAddress-input {\n                          -webkit-appearance: none;\n                          background-color: #fff;\n                          background-image: none;\n                          border-radius: 4px;\n                          border: 1px solid #dcdfe6;\n                          box-sizing: border-box;\n                          color: #606266;\n                          display: inline-block;\n                          font-size: inherit;\n                          height: 28px;\n                          line-height: 28px;\n                          outline: none;\n                          padding: 0 15px;\n                          width: 160px;\n                          font-size: 12px;\n                          color: #333;\n                          cursor: pointer;\n                          position: relative;\n                          margin: 0 5px;\n                      \n                          &.disabled {\n                            background-color: #f5f7fa;\n                            border-color: #e4e7ed;\n                            color: #c0c4cc;\n                            cursor: not-allowed;\n                      \n                            input {\n                              display: none;\n                            }\n                          }\n                      \n                          p {\n                            display: flex;\n                            align-items: center;\n                            justify-content: space-between;\n                            color: #666;\n                          }\n                      \n                          ul {\n                            height: 180px;\n                            overflow-y: auto;\n                            position: absolute;\n                            top: 30px;\n                            left: 0;\n                            width: 100%;\n                            padding: 6px 0;\n                            box-sizing: border-box;\n                            list-style-type: none;\n                            background: #fff;\n                            visibility: hidden;\n                            opacity: 0;\n                            -webkit-transform: translate3d(0, -20px, 0);\n                            transform: translate3d(0, -20px, 0);\n                            -webkit-transition: opacity 0.3s ease, visibility 0.3s ease, transform 0.3s ease;\n                            transition: opacity 0.3s ease, visibility 0.3s ease, transform 0.3s ease;\n                      \n                            li {\n                              font-size: 14px;\n                              padding: 0 20px;\n                              position: relative;\n                              white-space: nowrap;\n                              overflow: hidden;\n                              text-overflow: ellipsis;\n                              color: #606266;\n                              height: 34px;\n                              line-height: 34px;\n                              box-sizing: border-box;\n                              cursor: pointer;\n                      \n                              &:hover {\n                                background: #F5F7FA;\n                              }\n                            }\n                          }\n                      \n                          input {\n                            position: absolute;\n                            top: 0;\n                            left: 0;\n                            width: 100%;\n                            height: 100%;\n                            opacity: 0;\n                            cursor: pointer;\n                      \n                            &:focus+ul {\n                              -webkit-transform: translate3d(0, 0, 0);\n                              transform: translate3d(0, 0, 0);\n                              visibility: visible;\n                              opacity: 1;\n                            }\n                          }\n                      \n                      \n                      \n                        }\n                      }'}]}],k={name:"PoiQuery",components:{poiPanel:f},data:function(){return{poiPanelShow:!1,viewer:null,_Entity:null,_Canvas:null,EntityArr:[]}},created:function(){this.$store.dispatch("highlight/set_code",T)},mounted:function(){this.init()},methods:{init:function(){var e=this.cesium;e.Ion.defaultAccessToken=Object({VUE_APP_BASE_API:"/prod-api",VUE_APP_PUBLIC_URL:"/cesium-template",VUE_APP_GAODE_KEY_WEB_SERVICE:"181ced609de9d446207b55e549bafcb6",VUE_APP_GAODE_KEY_WEB_TERMINAL:"cb250acd7ee0e7b2049cb93747ae3d44",VUE_APP_SECURITY_JS_CODE:"2a0ce2005352672661417093c485a056",NODE_ENV:"production",BASE_URL:"/cesium-template/"}).VUE_APP_TOKEN,this.viewer=new e.Viewer("cesiumContainer",{imageryProvider:new e.ArcGisMapServerImageryProvider({url:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer"}),terrainProvider:new e.CesiumTerrainProvider({url:"http://data.marsgis.cn/terrain"}),shouldAnimate:!0,infoBox:!1,selectionIndicator:!1}),this.viewer.scene.globe.depthTestAgainstTerrain=!1,this._Entity=new w["a"](e,this.viewer),this._Material=new C["a"](e,this.viewer),this._Canvas=new b["a"](e,this.viewer)},poisClick:function(e){var n=x["a"].transform([e.location.lng,e.location.lat],x["a"].AMap,x["a"].WGS84);this.setCamera({location:n})},setCamera:function(e){var n=this.cesium;this.viewer.camera.flyTo({destination:n.Cartesian3.fromDegrees(e.location[0],e.location[1],3e3)})},load:function(e){var n=this;this.viewer.entities.removeAll(),"pois"==e.type&&this.setPointPosition(e).then((function(e){n.EntityArr=e,n.viewer.flyTo(e)})),"navigation"==e.type&&this.setDrawRoute(e.data,e.style)},setDrawRoute:function(e,n){var t=this.cesium;var i=[];e.map((function(e){var n=x["a"].transform([e[0],e[1]],x["a"].AMap,x["a"].WGS84);i.push(n[0],n[1])})),this._Material.create(_(t));var a=this._Entity.createPolyline({positions:t.Cartesian3.fromDegreesArray(i),material:new t.Material_TrailLineMaterialProperty,arcType:t.ArcType.GEODESIC,width:10});this.viewer.flyTo(a)},setPointPosition:function(e){var n=this;return Object(r["a"])(Object(o["a"])().mark((function t(){var i,a,r,l;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=n.cesium,a=[],r=e.polymerization,l=e.data,t.next=6,new Promise((function(e,t){if(r){var o=M.a.parse(l,{Point:["location.lat","location.lng"]});(new i.GeoJsonDataSource).load(o).then((function(e){n.viewer.dataSources.add(e),e.clustering.enabled=!0,e.clustering.pixelRange=60,e.clustering.minimumClusterSize=2;for(var t=0;t<e.entities.values.length;t++){var o=e.entities.values[t];o.position._value.z+=50,o.billboard={image:"/cesium-template/Vue/Maps/Gaode/PoiQuery/position.png",width:16,height:22},o.label={text:o.properties.name._value,font:"500 30px Helvetica",scale:.5,style:i.LabelStyle.FILL_AND_OUTLINE,fillColor:i.Color.WHITE,pixelOffset:new i.Cartesian2(-8,-50),showBackground:!1,heightReference:i.HeightReference.CLAMP_TO_GROUND,distanceDisplayCondition:new i.DistanceDisplayCondition(0,2e4)},a.push(o)}e.clustering.clusterEvent.addEventListener((function(e,t){t.label.show=!1,t.billboard.show=!0,t.billboard.verticalOrigin=i.VerticalOrigin.BOTTOM,e.length>=20?(t.billboard.image=n._Canvas.combineIconAndLabel({url:"/cesium-template/Vue/Maps/Gaode/PoiQuery/cluster_4.png",label:e.length,size:72}),t.billboard.width=72,t.billboard.height=72):e.length>=12?(t.billboard.image=n._Canvas.combineIconAndLabel({url:"/cesium-template/Vue/Maps/Gaode/PoiQuery/cluster_3.png",label:e.length,size:56}),t.billboard.width=56,t.billboard.height=56):e.length>=8?(t.billboard.image=n._Canvas.combineIconAndLabel({url:"/cesium-template/Vue/Maps/Gaode/PoiQuery/cluster_2.png",label:e.length,size:48}),t.billboard.width=48,t.billboard.height=48):(t.billboard.image=n._Canvas.combineIconAndLabel({url:"/cesium-template/Vue/Maps/Gaode/PoiQuery/cluster_1.png",label:e.length,size:40}),t.billboard.width=40,t.billboard.height=40)}))})),setTimeout((function(){e(a)}),1e3)}else{for(var s=0;s<l.length;s++){var c=l[s],d=x["a"].transform([c.location.lng,c.location.lat],x["a"].AMap,x["a"].WGS84),p=n._Entity.createBillboard({id:c.id,name:c.name,position:i.Cartesian3.fromDegrees(d[0],d[1]),common:{label:{text:c.name,font:"500 30px Helvetica",scale:.5,style:i.LabelStyle.FILL_AND_OUTLINE,fillColor:i.Color.WHITE,pixelOffset:new i.Cartesian2(-8,-50),showBackground:!1,heightReference:i.HeightReference.CLAMP_TO_GROUND,distanceDisplayCondition:new i.DistanceDisplayCondition(0,2e4)}},image:"/cesium-template/Vue/Maps/Gaode/PoiQuery/position.png",verticalOrigin:i.VerticalOrigin.BOTTOM,heightReference:i.HeightReference.CLAMP_TO_GROUND,width:16,height:22});a.push(p)}setTimeout((function(){e(a)}),1e3)}}));case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t)})))()}}},z=k,A=(t("c20c"),Object(v["a"])(z,i,a,!1,null,"26fdea99",null));n["default"]=A.exports},aaa7:function(e,n,t){"use strict";t("21b7")},c20c:function(e,n,t){"use strict";t("50ff")},c407:function(e,n,t){"use strict";var i=t("c15f"),a=t("a35b"),o=(t("13b6"),t("b474"),t("d3f5"),function(){function e(n,t){Object(i["a"])(this,e),this.Cesium=n,this.viewer=t}return Object(a["a"])(e,[{key:"getRandomColor",get:function(){for(var e="#",n=["a","b","c","d","e","f","0","1","2","3","4","5","6","7","8","9"],t=0;t<6;t++){var i=Math.floor(Math.random()*n.length+1)-1;e+=n[i]}return e}},{key:"operationDom",value:function(e,n,t){if("append"===e&&document.getElementById(n).appendChild(t),"remove"===e&&document.getElementById(n).remove(),"has"===e)return document.getElementById(n)}},{key:"debounce",value:function(e){var n,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return function(){var a=this,o=arguments;if(n&&clearTimeout(n),i){var r=!n;n=setTimeout((function(){n=null}),t),r&&e.apply(a,o)}else n=setTimeout((function(){e.apply}),t)}}},{key:"throttle",value:function(e,n,t){var i,a=0;return function(){var o=this,r=arguments;if(1===t){var l=Date.now();l-a>n&&(e.apply(o,r),a=l)}else 2===t&&(i||(i=setTimeout((function(){i=null,e.apply(o,r)}),n)))}}},{key:"createScript",value:function(e){var n=document.createElement("script");n.setAttribute("type","text/javascript"),n.setAttribute("src",e),document.getElementsByTagName("head")[0].appendChild(n)}},{key:"loadJs",value:function(e,n){return new Promise((function(t,i){var a=document.createElement("script");a.type="text/javascript",null!==n&&void 0!==n&&n.async&&n.async&&(a.async="async"),null!==n&&void 0!==n&&n.defer&&n.defer&&(a.defer="defer");var o="body";null!==n&&void 0!==n&&n.append&&n.append&&("body"==n.append||"head"==n.append)&&(o=n.append),a.src=e,document[o].appendChild(a),a.onload=function(){t()},a.onerror=function(){i()}}))}},{key:"randomPoint",value:function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=this.Cesium;function a(e,n){return Math.floor(Math.random()*(n-e+1)+e)}var o=a(e[0]*t,n[0]*t)/t,r=a(e[1]*t,n[1]*t)/t;return i.Cartesian3.fromDegrees(o,r,30)}},{key:"getEntityPosition",value:function(e){var n=this.Cesium;return e.position._value||n.Property.getValueOrUndefined(e.position,this.viewer.clock.currentTime||n.JulianDate.now(),new n.Cartesian3)}},{key:"toDegrees",value:function(e){var n=this.Cesium;if(this.isDegreesOrCartesian(e)){var t=function(e){var t=new n.Cartesian3(e.x,e.y,e.z),i=n.Cartographic.fromCartesian(t);return{lng:parseFloat(n.Math.toDegrees(i.longitude).toFixed(8)),lat:parseFloat(n.Math.toDegrees(i.latitude).toFixed(8)),alt:parseFloat(i.height.toFixed(8))}};return e.x&&(e=t(e)),e}}},{key:"getCameraInfo",value:function(){var e=this.viewer;if(e&&e.camera&&e.camera.position&&e.camera.heading){var n=this.toDegrees(e.camera.position),t=Cesium.Math.toDegrees(e.camera.heading),i=Cesium.Math.toDegrees(e.camera.pitch),a=Cesium.Math.toDegrees(e.camera.roll);return{heading:parseFloat(t).toFixed(5),pitch:parseFloat(i).toFixed(5),roll:parseFloat(a).toFixed(5),lng:parseFloat(n.lng).toFixed(7),lat:parseFloat(n.lat).toFixed(7),alt:parseFloat(n.alt).toFixed(2)}}throw new Error("Error in Parameter!")}},{key:"isDegreesOrCartesian",value:function(e){if(!e)throw new Error("Error in Parameter!");return"number"===typeof e.x&&"number"===typeof e.y&&"number"===typeof e.z||"number"===typeof e.lng&&"number"===typeof e.lat}},{key:"toCartesian",value:function(e){var n=this.Cesium;if(this.isDegreesOrCartesian(e)){var t=function(e){return n.Cartesian3.fromDegrees(e.lng,e.lat,e.alt||0)};return e.lng&&(e=t(e)),e}}},{key:"point2LineDistance",value:function(e,n,t){e=this.toCartesian(e),n=this.toCartesian(n),t=this.toCartesian(t);var i=Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2)+Math.pow(e.z-n.z,2)),a=Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)+Math.pow(e.z-t.z,2)),o=Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2)+Math.pow(t.z-n.z,2)),r=(Math.pow(a,2)+Math.pow(i,2)-Math.pow(o,2))/(2*i*a),l=Math.sqrt(1-Math.pow(r,2)),s=((e.x-t.x)*(e.x-n.x)+(e.y-t.y)*(e.y-n.y)+(e.z-t.z)*(e.z-n.z))/(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2)+Math.pow(e.z-n.z,2));return s<0?a:s<=1&&s>=0?a*l:s>1?o:void 0}},{key:"countArea",value:function(e){if(!e||e.length<3)throw new Error("Error in Parameter!");for(var n=0,t=0;t<e.length;t++){var i=(t+1)%e.length,a=e[t],o=e[i];a=this.toCartesian(a),o=this.toCartesian(o),n+=a.x*o.y,n-=a.y*o.x}return n/=2,Math.abs(n)}},{key:"countAreaByThreePoints",value:function(e,n,t){e=this.toCartesian(e),n=this.toCartesian(n),t=this.toCartesian(t);var i=-1,a=[];if(a[0]=Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2)+Math.pow(e.z-n.z,2)),a[1]=Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)+Math.pow(e.z-t.z,2)),a[2]=Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2)+Math.pow(t.z-n.z,2)),a[0]+a[1]<=a[2]||a[0]+a[2]<=a[1]||a[1]+a[2]<=a[0])return i;var o=(a[0]+a[1]+a[2])/2;return i=Math.sqrt(o*(o-a[0])*(o-a[1])*(o-a[2])),i}},{key:"getDistance",value:function(e,n){if(!e||!n)throw new Error("Error in Parameter!");return e=this.toCartesian(e),n=this.toCartesian(n),Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2)+Math.pow(e.z-n.z,2))}},{key:"getNormal",value:function(e,n,t){e=this.toCartesian(e),n=this.toCartesian(n),t=this.toCartesian(t);var i=(n.y-e.y)*(t.z-e.z)-(n.z-e.z)*(t.y-e.y),a=(n.z-e.z)*(t.x-e.x)-(n.x-e.x)*(t.z-e.z),o=(n.x-e.x)*(t.y-e.y)-(n.y-e.y)*(t.x-e.x);return{x:i,y:a,z:o}}},{key:"countIntersectionOfLineAndPlane",value:function(e,n,t,i){var a,o,r,l,s,c,d,p,u,m,h,g,v,y;a=e.x,o=e.y,r=e.z,l=n.x,s=n.y,c=n.z,d=t.x,p=t.y,u=t.z,m=i.x,h=i.y,g=i.z,y=d*a+p*o+u*r;var f={};if(0!==y)return v=((l-m)*a+(s-h)*o+(c-g)*r)/y,f.x=m+d*v,f.y=h+p*v,f.z=g+u*v,f}},{key:"getPointInPolygon",value:function(){var e=this.getNormal(polygon[0],polygon[1],polygon[2]),n=line[0].x-line[1].x,t=line[0].y-line[1].y,i=line[0].z-line[1].z,a={x:n,y:t,z:i},o=this.countIntersectionOfLineAndPlane(e,polygon[1],a,line[0]);return o||!1}},{key:"isPointInQuadrilateral",value:function(){var e,n,t,i,a,o,r,l,s,c,d;r=this.getDistance(quadrilateral[0],quadrilateral[1]),l=this.getDistance(quadrilateral[1],quadrilateral[2]),s=this.getDistance(quadrilateral[0],quadrilateral[2]),c=this.getDistance(quadrilateral[2],quadrilateral[3]),d=this.getDistance(quadrilateral[3],quadrilateral[4]);var p,u,m,h,g=(r+l+s)/2,v=(s+c+d)/2;e=Math.sqrt(g*(g-r)*(g-l)*(g-s)),n=Math.sqrt(v*(v-s)*(v-c)*(v-d)),p=this.getDistance(point,quadrilateral[0]),u=this.getDistance(point,quadrilateral[1]),m=this.getDistance(point,quadrilateral[2]),h=this.getDistance(point,quadrilateral[3]);var y=(r+p+u)/2,f=(l+u+m)/2,b=(c+m+h)/2,w=(d+h+p)/2;return t=Math.sqrt(y*(y-r)*(y-p)*(y-u)),i=Math.sqrt(f*(f-l)*(f-u)*(f-m)),a=Math.sqrt(b*(b-c)*(b-m)*(b-h)),o=Math.sqrt(w*(w-d)*(w-h)*(w-p)),!(Math.abs(t+i+a+o-(e+n))>1e-4)}},{key:"JudgePointInPolygon",value:function(e,n){var t,i,a,o,r,l,s,c,d=function(e,n){return e.y*n.z-n.y*e.z+(e.z*n.x-e.x*n.z)+(e.x*n.y-e.y*n.x)},p=n[0],u=n[1],m=n[2],h=n[3];return t={x:u.x-p.x,y:u.y-p.y,z:u.z-p.z},i={x:e.x-p.x,y:e.y-p.y,z:e.z-p.z},a={x:h.x-m.x,y:h.y-m.y,z:h.z-m.z},o={x:e.x-m.x,y:e.y-m.y,z:e.z-m.z},r={x:m.x-u.x,y:m.y-u.y,z:m.z-u.z},l={x:e.x-u.x,y:e.y-u.y,z:e.z-u.z},s={x:h.x-p.x,y:h.y-p.y,z:h.z-p.z},c={x:e.x-h.x,y:e.y-h.y,z:e.z-h.z},!(d(t,i)*d(a,o)>=0&&d(r,l)*d(s,c)>=0)}},{key:"JudgePointInPolyline",value:function(e,n){var t=Math.sqrt(Math.pow(n[0].x-n[1].x,2)+Math.pow(n[0].y-n[1].y,2)+Math.pow(n[0].z-n[1].z,2)),i=Math.sqrt(Math.pow(e.x-n[1].x,2)+Math.pow(e.y-n[1].y,2)+Math.pow(e.z-n[1].z,2)),a=Math.sqrt(Math.pow(e.x-n[0].x,2)+Math.pow(e.y-n[0].y,2)+Math.pow(e.z-n[0].z,2)),o=i+a-t;return 1e4*o<1}},{key:"GetPanelEquation",value:function(e){var n,t,i,a;if(!(e.length<3))return n=e[0].y*(e[1].z-e[2].z)+e[1].y*(e[2].z-e[0].z)+e[2].y*(e[0].z-e[1].z),t=e[0].z*(e[1].x-e[2].x)+e[1].z*(e[2].x-e[0].x)+e[2].z*(e[0].x-e[1].x),i=e[0].x*(e[1].y-e[2].y)+e[1].x*(e[2].y-e[0].y)+e[2].x*(e[0].y-e[1].y),a=-e[0].x*(e[1].y*e[2].z-e[2].y*e[1].z)-e[1].x*(e[2].y*e[0].z-e[0].y*e[2].z)-e[2].x*(e[0].y*e[1].z-e[1].y*e[0].z),{A:n,B:t,C:i,D:a}}}]),e}());n["a"]=o},dd8c:function(e,n,t){"use strict";var i=t("d941"),a=t("c3ae"),o=t("c15f"),r=t("a35b"),l=(t("13b6"),function(){function e(n,t){Object(o["a"])(this,e),this.Cesium=n,this.viewer=t}return Object(r["a"])(e,[{key:"drawText",value:function(e){var n=e.text,t=document.createElement("canvas"),i=(n+"").length*e.fontSize;t.width=i,t.height=e.fontSize;var a=t.getContext("2d");return a.fillStyle=e.color,a.font="bold "+e.fontSize+"px 微软雅黑",a.textBaseline="hanging",a.fillText(n,0,0),t}},{key:"drawImageText",value:function(){var e=Object(a["a"])(Object(i["a"])().mark((function e(n){return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e,t){var i,a=document.createElement("img");a.src=n.src,a.onload=function(){i=document.createElement("canvas"),i.height=n.height,i.width=n.width;var t=i.getContext("2d");t.clearRect(0,0,i.width,i.height),t.drawImage(a,0,0),t.font="30px bold 楷体",t.fillStyle="#fff";var o="阳性："+n.data.num;t.fillText(o,(i.width-30*o.length)/2,(i.height+30)/2),e(i)}}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function n(n){return e.apply(this,arguments)}return n}()},{key:"combineIconAndLabel",value:function(e){var n=e.url,t=e.label,i=e.size,a=this.Cesium,o=document.createElement("canvas");o.width=i,o.height=i;var r=o.getContext("2d"),l=new a.Resource.fetchImage(n).then((function(e){try{r.drawImage(e,0,0)}catch(n){console.log(n)}return r.fillStyle=a.Color.WHITE.toCssColorString(),r.font="bold 20px Microsoft YaHei",r.textAlign="center",r.textBaseline="middle",r.fillText(t,i/2,i/2),o}));return l}}]),e}());n["a"]=l}}]);