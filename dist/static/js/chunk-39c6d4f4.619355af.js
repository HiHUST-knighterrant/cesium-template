(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-39c6d4f4"],{"0c12":function(e,t,n){"use strict";n("5881")},"29e1":function(e,t,n){"use strict";n.r(t);var s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[n("div",{attrs:{id:"cesiumContainer"}}),n("panel-view",{on:{draws:e.draws,clears:e.clears}})],1)},i=[],r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-card",{staticClass:"panel-card"},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("span",[e._v("操作面板")]),n("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:e.clears}},[e._v("清除")])],1),n("div",{staticClass:"panel-content"},e._l(e.clickCreateFor,(function(t,s){return n("el-button",{key:s,attrs:{type:"primary",size:"mini"},on:{click:function(n){return e.clickCreate(t.value)}}},[e._v(e._s(t.label))])})),1)])},o=[],a={props:{option:{type:Object,default:function(){return{}}}},data:function(){return{clickCreateFor:[{label:"雨",value:"Rain"},{label:"雪",value:"Snow"},{label:"雾",value:"Fog"},{label:"雾（私有）",value:"private-Fog"},{label:"太阳（私有）",value:"private-Sun"},{label:"月亮（私有）",value:"private-Moon"},{label:"黑白",value:"colourless"},{label:"高斯模糊",value:"gaussianBlur"},{label:"亮度",value:"brightness"},{label:"景深",value:"depthOfField"},{label:"耀斑",value:"solarFlare"},{label:"夜视",value:"nightVision"},{label:"环境遮蔽",value:"ambientOcclusion"},{label:"阴影",value:"shadow"},{label:"天际线",value:"Skyline"},{label:"轮廓（描边）",value:"Stroke"},{label:"泛光",value:"Bloom"}]}},created:function(){},mounted:function(){},methods:{clickCreate:function(e){this.$emit("draws",e)},clears:function(){this.$emit("clears")}}},c=a,l=(n("0c12"),n("cba8")),u=Object(l["a"])(c,r,o,!1,null,"5c565ff7",null),v=u.exports,h=n("4bb1"),f=n("e143"),m=function(){function e(t,n){Object(h["a"])(this,e),this.Cesium=t,this.viewer=n,this.rainStage=void 0,this.rainMaterials="uniform sampler2D colorTexture;\nvarying vec2 v_textureCoordinates;\nfloat hash(float x){\nreturn fract(sin(x*133.3)*13.13);\n}\nvoid main(void){\nfloat time = czm_frameNumber / 60.0;\nvec2 resolution = czm_viewport.zw;\n vec2 uv=(gl_FragCoord.xy*2.-resolution.xy)/min(resolution.x,resolution.y);\nvec3 c=vec3(.6,.7,.8);\n float a=-.4;\n float si=sin(a),co=cos(a);\nuv*=mat2(co,-si,si,co);\nuv*=length(uv+vec2(0,4.9))*.3+1.;\n float v=1.-sin(hash(floor(uv.x*100.))*2.);\nfloat b=clamp(abs(sin(20.*time*v+uv.y*(5./(2.+v))))-.95,0.,1.)*20.;\nc*=v*b;\ngl_FragColor = mix(texture2D(colorTexture, v_textureCoordinates), vec4(c,1), 0.5);\n}\n"}return Object(f["a"])(e,[{key:"create",value:function(){var e=this.Cesium;return this.rainStage=this.viewer.scene.postProcessStages.add(new e.PostProcessStage({name:"czm_rain",fragmentShader:this.rainMaterials})),this.viewer.scene.skyAtmosphere.hueShift=-.5,this.viewer.scene.skyAtmosphere.saturationShift=-.7,this.viewer.scene.skyAtmosphere.brightnessShift=-.33,this.viewer.scene.fog.density=.001,this.viewer.scene.fog.minimumBrightness=.8,this.rainStage}},{key:"remove",value:function(){void 0!=this.rainStage&&(this.viewer.scene.postProcessStages.remove(this.rainStage),this.rainStage=void 0)}}]),e}(),d=m,g=function(){function e(t,n){Object(h["a"])(this,e),this.Cesium=t,this.viewer=n,this.snowStage=void 0,this.snowMaterials="\n        uniform sampler2D colorTexture; //输入的场景渲染照片\n          varying vec2 v_textureCoordinates;\n          \n          float snow(vec2 uv,float scale)\n          {\n              float time = czm_frameNumber / 60.0;\n              float w=smoothstep(1.,0.,-uv.y*(scale/10.));if(w<.1)return 0.;\n              uv+=time/scale;uv.y+=time*2./scale;uv.x+=sin(uv.y+time*.5)/scale;\n              uv*=scale;vec2 s=floor(uv),f=fract(uv),p;float k=3.,d;\n             p=.5+.35*sin(11.*fract(sin((s+p+scale)*mat2(7,3,6,5))*5.))-f;d=length(p);k=min(d,k);\n             k=smoothstep(0.,k,sin(f.x+f.y)*0.01);\n             return k*w;\n         }\n         \n         void main(void){\n             vec2 resolution = czm_viewport.zw;\n             vec2 uv=(gl_FragCoord.xy*2.-resolution.xy)/min(resolution.x,resolution.y);\n             vec3 finalColor=vec3(0);\n             //float c=smoothstep(1.,0.3,clamp(uv.y*.3+.8,0.,.75));\n             float c = 0.0;\n             c+=snow(uv,30.)*.0;\n             c+=snow(uv,20.)*.0;\n             c+=snow(uv,15.)*.0;\n             c+=snow(uv,10.);\n             c+=snow(uv,8.);\n             c+=snow(uv,6.);\n             c+=snow(uv,5.);\n             finalColor=(vec3(c)); //屏幕上雪的颜色\n              gl_FragColor = mix(texture2D(colorTexture, v_textureCoordinates), vec4(finalColor,1), 0.5);  //将雪和三维场景融合\n        }\n          "}return Object(f["a"])(e,[{key:"create",value:function(){var e=this.Cesium;return this.snowStage=this.viewer.scene.postProcessStages.add(new e.PostProcessStage({name:"czm_snow",fragmentShader:this.snowMaterials})),this.snowStage}},{key:"remove",value:function(){void 0!=this.snowStage&&(this.viewer.scene.postProcessStages.remove(this.snowStage),this.snowStage=void 0)}}]),e}(),p=g,S=function(){function e(t,n){Object(h["a"])(this,e),this.Cesium=t,this.viewer=n,this.fogStage=void 0,this.fogMaterials="  uniform sampler2D colorTexture;\n  uniform sampler2D depthTexture;\n  varying vec2 v_textureCoordinates;\n  void main(void)\n  {\n      vec4 origcolor=texture2D(colorTexture, v_textureCoordinates);\n      vec4 fogcolor=vec4(0.8,0.8,0.8,0.5);\n\n      float depth = czm_readDepth(depthTexture, v_textureCoordinates);\n      vec4 depthcolor=texture2D(depthTexture, v_textureCoordinates);\n\n      float f=(depthcolor.r-0.22)/0.8;\n      if(f<0.0) f=0.0;\n      else if(f>1.0) f=1.0;\n      gl_FragColor = mix(origcolor,fogcolor,f);\n   }"}return Object(f["a"])(e,[{key:"create",value:function(){var e=this.Cesium;return this.fogStage=this.viewer.scene.postProcessStages.add(new e.PostProcessStage({name:"czm_fog",fragmentShader:this.fogMaterials})),this.fogStage}},{key:"remove",value:function(){void 0!=this.fogStage&&(this.viewer.scene.postProcessStages.remove(this.fogStage),this.fogStage=void 0)}}]),e}(),w=S,b=(n("e72f"),function(){function e(t,n){Object(h["a"])(this,e),this.Cesium=t,this.viewer=n}return Object(f["a"])(e,[{key:"create",value:function(){var e=this.Cesium,t=this.viewer.scene.postProcessStages,n=e.PostProcessStageLibrary.createEdgeDetectionStage(),s=new e.PostProcessStage({name:"czm_skylinetemp",fragmentShader:"uniform sampler2D colorTexture;uniform sampler2D depthTexture;varying vec2 v_textureCoordinates;void main(void){float depth = czm_readDepth(depthTexture, v_textureCoordinates);vec4 color = texture2D(colorTexture, v_textureCoordinates);if(depth<1.0 - 0.000001){gl_FragColor = color;}else{gl_FragColor = vec4(1.0,0.0,0.0,1.0);}}"}),i=new e.PostProcessStage({name:"czm_skylinetemp1",fragmentShader:"uniform sampler2D colorTexture;uniform sampler2D redTexture;uniform sampler2D silhouetteTexture;varying vec2 v_textureCoordinates;void main(void){vec4 redcolor=texture2D(redTexture, v_textureCoordinates);vec4 silhouetteColor = texture2D(silhouetteTexture, v_textureCoordinates);vec4 color = texture2D(colorTexture, v_textureCoordinates);if(redcolor.r == 1.0){gl_FragColor = mix(color, vec4(1.0,0.0,0.0,1.0), silhouetteColor.a);}else{gl_FragColor = color;}}",uniforms:{redTexture:s.name,silhouetteTexture:n.name}}),r=new e.PostProcessStageComposite({name:"czm_skyline",stages:[n,s,i],inputPreviousStageTexture:!1,uniforms:n.uniforms});t.add(r)}}]),e}()),y=b,_=function(){function e(t,n){Object(h["a"])(this,e),this.Cesium=t,this.viewer=n,this.scene=n.scene}return Object(f["a"])(e,[{key:"fog",value:function(){var e=this.scene;e.fog.enabled=!0,e.fog.density=.001,e.fog.minimumBrightness=.8}},{key:"sun",value:function(){var e=this.scene;e.sun.show=!0,e.sun.glowFactor=10}},{key:"moon",value:function(){var e=this.scene;e.moon.show=!0,e.moon.onlySunLighting=!0}},{key:"skyBox",value:function(){var e=this.scene;e.skyBox.show=!0}},{key:"skyAtmosphere",value:function(){var e=this.scene;e.skyAtmosphere.show=!0,e.skyAtmosphere.hueShift=-1,e.skyAtmosphere.saturationShift=-1,e.skyAtmosphere.brightnessShift=-1}},{key:"colourless",value:function(){var e=this.Cesium,t=this.scene.postProcessStages,n=t.add(e.PostProcessStageLibrary.createBlackAndWhiteStage());n.enabled=!0,n.uniforms.gradations=15}},{key:"gaussianBlur",value:function(){var e=this.Cesium,t=this.viewer.scene.postProcessStages,n=t.add(e.PostProcessStageLibrary.createBlurStage());n.enabled=!0,n.uniforms.delta=1,n.uniforms.sigma=1,n.uniforms.stepSize=20}},{key:"brightness",value:function(){var e=this.Cesium,t=this.viewer.scene.postProcessStages,n=t.add(e.PostProcessStageLibrary.createBrightnessStage());n.enabled=!0,n.uniforms.brightness=.1}},{key:"depthOfField",value:function(){var e=this.Cesium,t=this.viewer.scene.postProcessStages,n=t.add(e.PostProcessStageLibrary.createDepthOfFieldStage());n.enabled=!0,n.uniforms.focalDistance=1,n.uniforms.delta=1,n.uniforms.sigma=1,n.uniforms.stepSize=1}},{key:"solarFlare",value:function(){var e=this.Cesium,t=this.viewer.scene.postProcessStages.add(e.PostProcessStageLibrary.createLensFlareStage());function n(){t.enabled=5,t.uniforms.intensity=5,t.uniforms.distortion=5,t.uniforms.ghostDispersal=5,t.uniforms.haloWidth=5,t.uniforms.dirtAmount=5,t.uniforms.earthRadius=5}n();var s=this.viewer.scene.camera;s.position=new e.Cartesian3(40010447.97500168,56238683.46406788,20776576.752223067),s.direction=new e.Cartesian3(-.5549701431494752,-.7801872010801355,-.2886452346452218),s.up=new e.Cartesian3(-.3016252360948521,-.13464820558887716,.9438707950150912),s.right=e.Cartesian3.cross(s.direction,s.up,new e.Cartesian3),this.viewer.clock.currentTime=new e.JulianDate(2458047,27399.860215000022)}},{key:"nightVision",value:function(){var e=this.Cesium,t=this.viewer.scene.postProcessStages,n=t.add(e.PostProcessStageLibrary.createNightVisionStage());n.enabled=!0}},{key:"ambientOcclusion",value:function(){var e=this.Cesium,t=e.PostProcessStageLibrary.createAmbientOcclusionStage();t.enabled=!0,t.uniforms.intensity=5,t.uniforms.bias=15,t.uniforms.lengthCap=5,t.uniforms.stepSize=5,t.uniforms.frustumLength=5}},{key:"shadow",value:function(){var e=this.Cesium;this.viewer.scene.shadowMap=new e.ShadowMap({lightCamera:this.viewer.camera,context:this.viewer.scene.context}),this.viewer.scene.shadowMap.enabled=!0}},{key:"Stroke",value:function(){var e=this.Cesium,t=this.viewer.scene.postProcessStages,n=t.add(e.PostProcessStageLibrary.createSilhouetteStage());n.enabled=!0,n.uniforms.color=e.Color.YELLOW}},{key:"Bloom",value:function(){var e=this.viewer.scene.postProcessStages.bloom;e.enabled=!0,e.uniforms.glowOnly=!1,e.uniforms.contrast=128,e.uniforms.brightness=-.3,e.uniforms.delta=1,e.uniforms.sigma=2,e.uniforms.stepSize=1}}]),e}(),C=_,x={components:{panelView:v},data:function(){return{viewer:null,handler:null,_Rain:null,_Snow:null,_Fog:null,_Skyline:null,_Scene:null}},mounted:function(){this.init()},methods:{init:function(){var e=this.cesium;e.Ion.defaultAccessToken="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiJlNTIzZTZiYi05OWQxLTQ0OTUtYTUzNC1mYjYxNWI4OTZiZTYiLCJpZCI6OTA3MDUsImlhdCI6MTY1MDUzNDAzMn0.0f1DG8NlExZnbrueMn_AgO6GX_g_RASavpxAWcVymPs",this.viewer=new e.Viewer("cesiumContainer",{animation:!1,timeline:!1,shouldAnimate:!0,infoBox:!1,selectionIndicator:!1}),this.viewer.cesiumWidget.screenSpaceEventHandler.removeInputAction(e.ScreenSpaceEventType.LEFT_DOUBLE_CLICK),this._Rain=new d(e,this.viewer),this._Snow=new p(e,this.viewer),this._Fog=new w(e,this.viewer),this._Skyline=new y(e,this.viewer),this._Scene=new C(e,this.viewer)},clears:function(){var e=this.cesium;this.handler&&(this.handler.removeInputAction(e.ScreenSpaceEventType.LEFT_DOWN),this.handler.removeInputAction(e.ScreenSpaceEventType.MOUSE_MOVE),this.handler.removeInputAction(e.ScreenSpaceEventType.LEFT_UP),this.handler.destroy(),this.handler=null),this.viewer.entities.removeAll(),this.viewer.scene.postProcessStages.removeAll()},draws:function(e){var t=this.cesium,n=this.viewer;this.handler=new t.ScreenSpaceEventHandler(n.scene.canvas),"Rain"!=e?"Snow"!=e?"Fog"!=e?"private-Fog"!=e?"private-Sun"!=e?"private-Moon"!=e?"colourless"!=e?"gaussianBlur"!=e?"brightness"!=e?"depthOfField"!=e?"solarFlare"!=e?"nightVision"!=e?"ambientOcclusion"!=e?"shadow"!=e?"Skyline"!=e?"Stroke"!=e?"Bloom"!=e||this._Scene.Bloom():this._Scene.Stroke():this._Skyline.create():this._Scene.shadow():this._Scene.ambientOcclusion():this._Scene.nightVision():this._Scene.solarFlare():this._Scene.depthOfField():this._Scene.brightness():this._Scene.gaussianBlur():this._Scene.colourless():this._Scene.moon():this._Scene.sun():this._Scene.fog():this._Fog.create():this._Snow.create():this._Rain.create()}}},k=x,P=(n("6ba3"),Object(l["a"])(k,s,i,!1,null,"106cdbb7",null));t["default"]=P.exports},"4bb1":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));n("a567");function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},5881:function(e,t,n){},"6ba3":function(e,t,n){"use strict";n("d8cd")},d8cd:function(e,t,n){},e143:function(e,t,n){"use strict";function s(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function i(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}n.d(t,"a",(function(){return i}))}}]);