(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-30ae3b42"],{"19bc":function(t,e,n){var r=n("46a7"),a=n("d2b9"),i=n("e136").f,o=a((function(){return!Object.getOwnPropertyNames(1)}));r({target:"Object",stat:!0,forced:o},{getOwnPropertyNames:i})},"1baa":function(t,e,n){},2237:function(t,e,n){"use strict";var r=n("46a7"),a=n("4162"),i=n("d2cf"),o=n("4488"),s=n("7f99"),c=n("d2b9"),u=RangeError,l=String,h=Math.floor,f=a(s),d=a("".slice),y=a(1..toFixed),p=function(t,e,n){return 0===e?n:e%2===1?p(t,e-1,n*t):p(t*t,e/2,n)},v=function(t){var e=0,n=t;while(n>=4096)e+=12,n/=4096;while(n>=2)e+=1,n/=2;return e},m=function(t,e,n){var r=-1,a=n;while(++r<6)a+=e*t[r],t[r]=a%1e7,a=h(a/1e7)},g=function(t,e){var n=6,r=0;while(--n>=0)r+=t[n],t[n]=h(r/e),r=r%e*1e7},x=function(t){var e=6,n="";while(--e>=0)if(""!==n||0===e||0!==t[e]){var r=l(t[e]);n=""===n?r:n+f("0",7-r.length)+r}return n},z=c((function(){return"0.000"!==y(8e-5,3)||"1"!==y(.9,0)||"1.25"!==y(1.255,2)||"1000000000000000128"!==y(0xde0b6b3a7640080,0)}))||!c((function(){y({})}));r({target:"Number",proto:!0,forced:z},{toFixed:function(t){var e,n,r,a,s=o(this),c=i(t),h=[0,0,0,0,0,0],y="",z="0";if(c<0||c>20)throw u("Incorrect fraction digits");if(s!=s)return"NaN";if(s<=-1e21||s>=1e21)return l(s);if(s<0&&(y="-",s=-s),s>1e-21)if(e=v(s*p(2,69,1))-69,n=e<0?s*p(2,-e,1):s/p(2,e,1),n*=4503599627370496,e=52-e,e>0){m(h,0,n),r=c;while(r>=7)m(h,1e7,0),r-=7;m(h,p(10,r,1),0),r=e-1;while(r>=23)g(h,1<<23),r-=23;g(h,1<<r),m(h,1,1),g(h,2),z=x(h)}else m(h,0,n),m(h,1<<-e,0),z=x(h)+f("0",c);return c>0?(a=z.length,z=y+(a<=c?"0."+f("0",c-a)+z:d(z,0,a-c)+"."+d(z,a-c))):z=y+z,z}})},4488:function(t,e,n){var r=n("4162");t.exports=r(1..valueOf)},"4bb1":function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));n("a567");function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},6410:function(t,e,n){"use strict";var r=n("46a7"),a=n("4162"),i=n("923b"),o=n("c68c"),s=n("f27a"),c=a([].join),u=i!=Object,l=s("join",",");r({target:"Array",proto:!0,forced:u||!l},{join:function(t){return c(o(this),void 0===t?",":t)}})},"7e36":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},a=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("div",{attrs:{id:"cesiumContainer"}})])}],i=(n("eb3b"),n("b1f6"),n("19bc"),n("d060"),n("c407"),{data:function(){return{viewer:null,_Utils:null}},mounted:function(){this.init()},methods:{init:function(){var t=this.cesium;t.Ion.defaultAccessToken="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiJlNTIzZTZiYi05OWQxLTQ0OTUtYTUzNC1mYjYxNWI4OTZiZTYiLCJpZCI6OTA3MDUsImlhdCI6MTY1MDUzNDAzMn0.0f1DG8NlExZnbrueMn_AgO6GX_g_RASavpxAWcVymPs",this.viewer=new t.Viewer("cesiumContainer",{infoBox:!1,shouldAnimate:!0,vrButton:!0,geocoder:!1,homeButton:!1,sceneModePicker:!1,baseLayerPicker:!0,navigationHelpButton:!1,animation:!1,timeline:!1,fullscreenButton:!1}),this.start()},start:function(){var t=this.cesium,e=this.viewer;t.TILE_EFFECT_STATE=!0,t.TILE_FS_BODY=" float stc_pl = fract(czm_frameNumber / 120.0) * 3.14159265 * 2.0;\n                float stc_sd = v_stcVertex.z / 320.0 + sin(stc_pl) * 0.1;\n                gl_FragColor *= vec4(stc_sd, stc_sd, stc_sd, 1.0);\n                float stc_a13 = fract(czm_frameNumber / 360.0);\n                float stc_h = clamp(v_stcVertex.z / 450.0, 0.0, 1.0);\n                stc_a13 = abs(stc_a13 - 0.5) * 2.0;\n                float stc_diff = step(0.005, abs(stc_h - stc_a13));\n                gl_FragColor.rgb += gl_FragColor.rgb * (1.0 - stc_diff);";var n=e.scene.primitives.add(new t.Cesium3DTileset({url:"https://lab.earthsdk.com/model/702aa950d03c11e99f7ddd77cbe22fea/tileset.json"}));n.tileVisible.addEventListener((function(t){for(var e,n=t.content,r=n.featuresLength,a=function(){e=n.getFeature(i);var t=e.content._model;t._shouldRegenerateShaders=!0,Object.getOwnPropertyNames(t._sourcePrograms).forEach((function(e){var n=t._sourcePrograms[0];t._rendererResources.sourceShaders[n.fragmentShader]="\n     varying vec3 v_positionEC;\n     void main(void){\n       vec4 position = czm_inverseModelView * vec4(v_positionEC,1); // 位置\n       float glowRange = 100.0; // 光环的移动范围(高度)\n       gl_FragColor = vec4(0.0, 0.3, 0.8, 0.8); // 颜色\n       \n       // 小于20米的低楼都不再变暗\n       if(position.y > 20.0) {\n         gl_FragColor *= vec4(vec3(position.y / 20.0), 0.8); // 渐变\n       }\n       \n       // 动态光环\n       float time = fract(czm_frameNumber / 360.0);\n       time = abs(time - 0.5) * 3.0;\n       float diff = step(0.005, abs( clamp(position.y / glowRange, 0.0, 1.0) - time));\n       gl_FragColor.rgb += gl_FragColor.rgb * (1.0 - diff);\n     }\n     "})),t._shouldRegenerateShaders=!0},i=0;i<r;i+=2)a()})),n.readyPromise.then((function(n){n.style=new t.Cesium3DTileStyle({color:{conditions:[["true","color('cyan')"]]}}),e.flyTo(n)}))}}}),o=i,s=(n("9e73"),n("cba8")),c=Object(s["a"])(o,r,a,!1,null,"9639ba90",null);e["default"]=c.exports},"9e73":function(t,e,n){"use strict";n("1baa")},c407:function(t,e,n){"use strict";var r=n("4bb1"),a=n("e143"),i=(n("6410"),n("eb3b"),n("b1f6"),n("2237"),n("a567"),function(){function t(e,n){Object(r["a"])(this,t),this.Cesium=e,this.viewer=n}return Object(a["a"])(t,[{key:"getRandomColor",get:function(){for(var t="#",e=["a","b","c","d","e","f","0","1","2","3","4","5","6","7","8","9"],n=0;n<6;n++){var r=Math.floor(Math.random()*e.length+1)-1;t+=e[r]}return t}},{key:"operationDom",value:function(t,e,n){if("append"===t&&document.getElementById(e).appendChild(n),"remove"===t&&document.getElementById(e).remove(),"has"===t)return document.getElementById(e)}},{key:"crecteIframe",value:function(t,e){var n=document.createElement("iframe");return n.src=t,n.setAttribute("frameBorder",0),null!==e&&void 0!==e&&e.width&&(n.width=e.width),null!==e&&void 0!==e&&e.height&&(n.height=e.height),n}},{key:"queryParams",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"brackets",r=e?"?":"",a=[];-1==["indices","brackets","repeat","comma"].indexOf(n)&&(n="brackets");var i=function(e){var r=t[e];if(["",void 0,null].indexOf(r)>=0)return"continue";if(r.constructor===Array)switch(n){case"indices":for(var i=0;i<r.length;i++)a.push(e+"["+i+"]="+r[i]);break;case"brackets":r.forEach((function(t){a.push(e+"[]="+t)}));break;case"repeat":r.forEach((function(t){a.push(e+"="+t)}));break;case"comma":var o="";r.forEach((function(t){o+=(o?",":"")+t})),a.push(e+"="+o);break;default:r.forEach((function(t){a.push(e+"[]="+t)}))}else a.push(e+"="+r)};for(var o in t)i(o);return a.length?r+a.join("&"):""}},{key:"debounce",value:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return function(){var a=this,i=arguments;if(e&&clearTimeout(e),r){var o=!e;e=setTimeout((function(){e=null}),n),o&&t.apply(a,i)}else e=setTimeout((function(){t.apply}),n)}}},{key:"throttle",value:function(t,e,n){var r,a=0;return function(){var i=this,o=arguments;if(1===n){var s=Date.now();s-a>e&&(t.apply(i,o),a=s)}else 2===n&&(r||(r=setTimeout((function(){r=null,t.apply(i,o)}),e)))}}},{key:"createScript",value:function(t){var e=document.createElement("script");e.setAttribute("type","text/javascript"),e.setAttribute("src",t),document.getElementsByTagName("head")[0].appendChild(e)}},{key:"loadJs",value:function(t,e){return new Promise((function(n,r){var a=document.createElement("script");a.type="text/javascript",null!==e&&void 0!==e&&e.async&&e.async&&(a.async="async"),null!==e&&void 0!==e&&e.defer&&e.defer&&(a.defer="defer");var i="body";null!==e&&void 0!==e&&e.append&&e.append&&("body"==e.append||"head"==e.append)&&(i=e.append),a.src=t,document[i].appendChild(a),a.onload=function(){n()},a.onerror=function(){r()}}))}},{key:"randomPoint",value:function(t){var e=t.start,n=t.end,r=t.range||1e3,a=t.height||0,i=t.type||"cartesian3",o=this.Cesium;function s(t,e){return Math.floor(Math.random()*(e-t+1)+t)}var c=s(e[0]*r,n[0]*r)/r,u=s(e[1]*r,n[1]*r)/r;return"cartesian3"==i?o.Cartesian3.fromDegrees(c,u,a):"jwd"==i?[c,u,a]:void 0}},{key:"getEntityPosition",value:function(t){var e=this.Cesium;return t.position?t.position._value||e.Property.getValueOrUndefined(t.position,this.viewer.clock.currentTime||e.JulianDate.now(),new e.Cartesian3):void 0}},{key:"toDegrees",value:function(t){var e=this.Cesium;if(this.isDegreesOrCartesian(t)){var n=function(t){var n=new e.Cartesian3(t.x,t.y,t.z),r=e.Cartographic.fromCartesian(n);return{lng:parseFloat(e.Math.toDegrees(r.longitude).toFixed(8)),lat:parseFloat(e.Math.toDegrees(r.latitude).toFixed(8)),alt:parseFloat(r.height.toFixed(8))}};return t.x&&(t=n(t)),t}}},{key:"getCameraInfo",value:function(){var t=this.viewer;if(t&&t.camera&&t.camera.position&&t.camera.heading){var e=this.toDegrees(t.camera.position),n=Cesium.Math.toDegrees(t.camera.heading),r=Cesium.Math.toDegrees(t.camera.pitch),a=Cesium.Math.toDegrees(t.camera.roll);return{heading:parseFloat(n).toFixed(5),pitch:parseFloat(r).toFixed(5),roll:parseFloat(a).toFixed(5),lng:parseFloat(e.lng).toFixed(7),lat:parseFloat(e.lat).toFixed(7),alt:parseFloat(e.alt).toFixed(2)}}throw new Error("Error in Parameter!")}},{key:"isDegreesOrCartesian",value:function(t){if(!t)throw new Error("Error in Parameter!");return"number"===typeof t.x&&"number"===typeof t.y&&"number"===typeof t.z||"number"===typeof t.lng&&"number"===typeof t.lat}},{key:"toCartesian",value:function(t){var e=this.Cesium;if(this.isDegreesOrCartesian(t)){var n=function(t){return e.Cartesian3.fromDegrees(t.lng,t.lat,t.alt||0)};return t.lng&&(t=n(t)),t}}},{key:"point2LineDistance",value:function(t,e,n){t=this.toCartesian(t),e=this.toCartesian(e),n=this.toCartesian(n);var r=Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)+Math.pow(t.z-e.z,2)),a=Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2)+Math.pow(t.z-n.z,2)),i=Math.sqrt(Math.pow(n.x-e.x,2)+Math.pow(n.y-e.y,2)+Math.pow(n.z-e.z,2)),o=(Math.pow(a,2)+Math.pow(r,2)-Math.pow(i,2))/(2*r*a),s=Math.sqrt(1-Math.pow(o,2)),c=((t.x-n.x)*(t.x-e.x)+(t.y-n.y)*(t.y-e.y)+(t.z-n.z)*(t.z-e.z))/(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)+Math.pow(t.z-e.z,2));return c<0?a:c<=1&&c>=0?a*s:c>1?i:void 0}},{key:"countArea",value:function(t){if(!t||t.length<3)throw new Error("Error in Parameter!");for(var e=0,n=0;n<t.length;n++){var r=(n+1)%t.length,a=t[n],i=t[r];a=this.toCartesian(a),i=this.toCartesian(i),e+=a.x*i.y,e-=a.y*i.x}return e/=2,Math.abs(e)}},{key:"countAreaByThreePoints",value:function(t,e,n){t=this.toCartesian(t),e=this.toCartesian(e),n=this.toCartesian(n);var r=-1,a=[];if(a[0]=Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)+Math.pow(t.z-e.z,2)),a[1]=Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2)+Math.pow(t.z-n.z,2)),a[2]=Math.sqrt(Math.pow(n.x-e.x,2)+Math.pow(n.y-e.y,2)+Math.pow(n.z-e.z,2)),a[0]+a[1]<=a[2]||a[0]+a[2]<=a[1]||a[1]+a[2]<=a[0])return r;var i=(a[0]+a[1]+a[2])/2;return r=Math.sqrt(i*(i-a[0])*(i-a[1])*(i-a[2])),r}},{key:"getDistance",value:function(t,e){if(!t||!e)throw new Error("Error in Parameter!");return t=this.toCartesian(t),e=this.toCartesian(e),Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)+Math.pow(t.z-e.z,2))}},{key:"getNormal",value:function(t,e,n){t=this.toCartesian(t),e=this.toCartesian(e),n=this.toCartesian(n);var r=(e.y-t.y)*(n.z-t.z)-(e.z-t.z)*(n.y-t.y),a=(e.z-t.z)*(n.x-t.x)-(e.x-t.x)*(n.z-t.z),i=(e.x-t.x)*(n.y-t.y)-(e.y-t.y)*(n.x-t.x);return{x:r,y:a,z:i}}},{key:"countIntersectionOfLineAndPlane",value:function(t,e,n,r){var a,i,o,s,c,u,l,h,f,d,y,p,v,m;a=t.x,i=t.y,o=t.z,s=e.x,c=e.y,u=e.z,l=n.x,h=n.y,f=n.z,d=r.x,y=r.y,p=r.z,m=l*a+h*i+f*o;var g={};if(0!==m)return v=((s-d)*a+(c-y)*i+(u-p)*o)/m,g.x=d+l*v,g.y=y+h*v,g.z=p+f*v,g}},{key:"getPointInPolygon",value:function(){var t=this.getNormal(polygon[0],polygon[1],polygon[2]),e=line[0].x-line[1].x,n=line[0].y-line[1].y,r=line[0].z-line[1].z,a={x:e,y:n,z:r},i=this.countIntersectionOfLineAndPlane(t,polygon[1],a,line[0]);return i||!1}},{key:"isPointInQuadrilateral",value:function(){var t,e,n,r,a,i,o,s,c,u,l;o=this.getDistance(quadrilateral[0],quadrilateral[1]),s=this.getDistance(quadrilateral[1],quadrilateral[2]),c=this.getDistance(quadrilateral[0],quadrilateral[2]),u=this.getDistance(quadrilateral[2],quadrilateral[3]),l=this.getDistance(quadrilateral[3],quadrilateral[4]);var h,f,d,y,p=(o+s+c)/2,v=(c+u+l)/2;t=Math.sqrt(p*(p-o)*(p-s)*(p-c)),e=Math.sqrt(v*(v-c)*(v-u)*(v-l)),h=this.getDistance(point,quadrilateral[0]),f=this.getDistance(point,quadrilateral[1]),d=this.getDistance(point,quadrilateral[2]),y=this.getDistance(point,quadrilateral[3]);var m=(o+h+f)/2,g=(s+f+d)/2,x=(u+d+y)/2,z=(l+y+h)/2;return n=Math.sqrt(m*(m-o)*(m-h)*(m-f)),r=Math.sqrt(g*(g-s)*(g-f)*(g-d)),a=Math.sqrt(x*(x-u)*(x-d)*(x-y)),i=Math.sqrt(z*(z-l)*(z-y)*(z-h)),!(Math.abs(n+r+a+i-(t+e))>1e-4)}},{key:"JudgePointInPolygon",value:function(t,e){var n,r,a,i,o,s,c,u,l=function(t,e){return t.y*e.z-e.y*t.z+(t.z*e.x-t.x*e.z)+(t.x*e.y-t.y*e.x)},h=e[0],f=e[1],d=e[2],y=e[3];return n={x:f.x-h.x,y:f.y-h.y,z:f.z-h.z},r={x:t.x-h.x,y:t.y-h.y,z:t.z-h.z},a={x:y.x-d.x,y:y.y-d.y,z:y.z-d.z},i={x:t.x-d.x,y:t.y-d.y,z:t.z-d.z},o={x:d.x-f.x,y:d.y-f.y,z:d.z-f.z},s={x:t.x-f.x,y:t.y-f.y,z:t.z-f.z},c={x:y.x-h.x,y:y.y-h.y,z:y.z-h.z},u={x:t.x-y.x,y:t.y-y.y,z:t.z-y.z},!(l(n,r)*l(a,i)>=0&&l(o,s)*l(c,u)>=0)}},{key:"JudgePointInPolyline",value:function(t,e){var n=Math.sqrt(Math.pow(e[0].x-e[1].x,2)+Math.pow(e[0].y-e[1].y,2)+Math.pow(e[0].z-e[1].z,2)),r=Math.sqrt(Math.pow(t.x-e[1].x,2)+Math.pow(t.y-e[1].y,2)+Math.pow(t.z-e[1].z,2)),a=Math.sqrt(Math.pow(t.x-e[0].x,2)+Math.pow(t.y-e[0].y,2)+Math.pow(t.z-e[0].z,2)),i=r+a-n;return 1e4*i<1}},{key:"GetPanelEquation",value:function(t){var e,n,r,a;if(!(t.length<3))return e=t[0].y*(t[1].z-t[2].z)+t[1].y*(t[2].z-t[0].z)+t[2].y*(t[0].z-t[1].z),n=t[0].z*(t[1].x-t[2].x)+t[1].z*(t[2].x-t[0].x)+t[2].z*(t[0].x-t[1].x),r=t[0].x*(t[1].y-t[2].y)+t[1].x*(t[2].y-t[0].y)+t[2].x*(t[0].y-t[1].y),a=-t[0].x*(t[1].y*t[2].z-t[2].y*t[1].z)-t[1].x*(t[2].y*t[0].z-t[0].y*t[2].z)-t[2].x*(t[0].y*t[1].z-t[1].y*t[0].z),{A:e,B:n,C:r,D:a}}}]),t}());e["a"]=i},d060:function(t,e){"undefined"!==typeof Cesium&&function(t){function e(){t.ModelUtility.updateForwardAxis=function(e){this._model=e;var n=e.gltf.extras.sourceVersion;(t.defined(n)&&"2.0"!==n||"2.0"!==t.ModelUtility.getAssetVersion(e.gltf))&&(e._gltfForwardAxis=t.Axis.X)},t.ModelUtility.modifyFragmentShaderForLogDepth=function(e){var n=!1;return t.TILE_EFFECT_STATE&&this._model&&-1!==this._model._resource._url.indexOf("b3dm")&&(n=!0),e=t.ShaderSource.replaceMain(e,"czm_depth_main"),e+=n?"\n                varying vec3 v_stcVertex;\n                void main(){\n                    czm_depth_main();\n                    "+t.TILE_FS_BODY+"\n                    czm_writeLogDepth();\n                }\n                ":"\n                    varying vec3 v_stcVertex;\n                    void main(){\n                        czm_depth_main();\n                        czm_writeLogDepth();\n                    }\n                    ",e},t.ModelUtility.modifyVertexShaderForLogDepth=function(e,n){return e=t.ShaderSource.replaceMain(e,"czm_depth_main"),e+="\nvarying vec3 v_stcVertex;\nvoid main() \n{ \n    czm_depth_main(); \n    v_stcVertex = a_position;\n    czm_vertexLogDepth("+n+"); \n} \n",e}}t.TILE_EFFECT_STATE=!0,t.TILE_FS_BODY=" float stc_pl = fract(czm_frameNumber / 120.0) * 3.14159265 * 2.0;\n                float stc_sd = v_stcVertex.z / 60.0 + sin(stc_pl) * 0.1;\n                gl_FragColor *= vec4(stc_sd, stc_sd, stc_sd, 1.0);\n                float stc_a13 = fract(czm_frameNumber / 360.0);\n                float stc_h = clamp(v_stcVertex.z / 450.0, 0.0, 1.0);\n                stc_a13 = abs(stc_a13 - 0.5) * 2.0;\n                float stc_diff = step(0.005, abs(stc_h - stc_a13));\n                gl_FragColor.rgb += gl_FragColor.rgb * (1.0 - stc_diff);",e()}(Cesium)},e143:function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function a(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}n.d(e,"a",(function(){return a}))}}]);